(window.webpackJsonp=window.webpackJsonp||[]).push([["receive"],{1527:function(e,t,n){"use strict";n("e7e5");var i=n("d399"),o=n("7185");t.a={data:function(){return{count:{showCount:!1,num:60,codeBtnDisable:!1}}},methods:{validateMobileOrPsw:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mobile",t=this.userinfo[e],n=o.a[e];0===t.length&&(this.errorMessage[e]=""),this.errorMessage[e]=n.validator(t)?"":n.message},validatedChecker:function(){this.userinfo.mobile.length>11&&(this.userinfo.mobile=this.userinfo.mobile.substring(0,11));var e=this.userinfo.mobile,t=o.a.mobile;this.validated.mobile=t.validator(e)},countDown:function(){var e=this;this.$nextTick((function(){e.$refs.smsCode.$refs.input.focus()})),this.count.showCount=!0,this.count.codeBtnDisable=!0,this.count.num=60;var t=setInterval((function(){if(e.count.num<=0)return e.count.codeBtnDisable=!1,e.count.showCount=!1,void clearInterval(t);e.count.num-=1}),1e3)},handleSubmit:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.btnDisable||this.fastLogin({mobile:this.userinfo.mobile,smsToken:this.userinfo.smsToken,smsCode:this.userinfo.smsCode,loginType:"sms",client:"h5"}).then((function(t){return e(t)})).catch((function(e){t&&t(e.message),i.a.fail(e.message)}))},handleSendSms:function(){var e=this;this.sendSmsSend(this.userinfo).then((function(t){e.userinfo.smsToken=t.smsToken,e.countDown(),e.dragEnable=!1,e.userinfo.dragCaptchaToken=""})).catch((function(t){switch(t.code){case 4030301:case 4030302:e.dragKey+=1,e.userinfo.dragCaptchaToken="",e.userinfo.smsToken="",i.a.fail(t.message);break;case 4030303:e.dragEnable?i.a.fail(t.message):e.dragEnable=!0;break;default:i.a.fail(t.message)}}))},clickSmsBtn:function(){!this.count.codeBtnDisable&&this.validated.mobile&&(this.dragEnable?this.$refs.dragComponent.dragToEnd?this.$refs.dragComponent.initDragCaptcha():Object(i.a)("请先完成拼图验证"):this.handleSendSms())}}}},4637:function(e,t,n){"use strict";n.r(t),n("8e6e"),n("ac6a"),n("456d"),n("e17f");var i=n("2241"),o=(n("96cf"),n("3b8d")),r=(n("6b54"),n("a481"),n("7f7f"),n("bd86")),s=(n("6762"),n("2fdb"),n("e7e5"),n("d399")),a=n("f13d"),c=n("1527"),u=n("2f62"),l=n("a262"),d=n("d863");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={name:"Login",components:{EDrag:a.a},props:{show:{type:Boolean,default:!1},processIsDone:{type:Boolean,default:!1}},data:function(){return{visible:this.show,userinfo:{mobile:"",dragCaptchaToken:void 0,smsCode:"",smsToken:"",type:"sms_login"},dragEnable:!1,dragKey:0,errorMessage:{mobile:"",password:""},validated:{mobile:!1},loginMode:"fastLoginMode",currentLoginMode:{},fastLoginMode:{accountPlaceholder:"请输入手机号",passwordPlaceholder:"请输入验证码"},normalLoginMode:{accountPlaceholder:"请输入手机号/邮箱号/用户名",passwordPlaceholder:"请输入密码"}}},computed:h({},Object(u.d)({isLogin:function(e){return!!e.token}}),{btnDisable:function(){return"fastLoginMode"===this.loginMode?!(/^1\d{10}$/.test(this.userinfo.mobile)&&this.userinfo.smsCode):!(this.userinfo.mobile&&this.userinfo.smsCode&&this.validateEmail())},cansentCode:function(){return!(this.count.codeBtnDisable||!this.validated.mobile)}}),watch:{show:function(){this.visible=this.show}},mixins:[l.a,d.a,c.a],created:function(){this.currentLoginMode=this[this.loginMode]},methods:h({},Object(u.b)(["addUser","setMobile","sendSmsSend","fastLogin","userLogin"]),{jump2register:function(){this.$router.push({name:"register",query:{redirect:this.$route.fullPath}})},onSubmit:function(){var e=this;this.btnDisable||("fastLoginMode"!==this.loginMode?this.userLogin({username:this.userinfo.mobile,password:this.userinfo.smsCode}).then((function(t){e.updateShow(),e.$emit("submit")})).catch((function(t){s.a.fail(t.message),4040104===t.code&&(e.errorMessage.mobile=t.message,e.errorMessage.password=""),5000116===t.code&&(e.errorMessage.mobile="",e.errorMessage.password=t.message),e.userinfo.smsCode=""})):this.handleSubmit(this.handleSubmitSuccess,this.handleSubmitFail))},updateShow:function(){this.$emit("update:show",!1)},updateProcessIsDone:function(){this.$emit("update:processIsDone",!0)},handleSmsSuccess:function(e){this.userinfo.dragCaptchaToken=e,this.handleSendSms()},handleSubmitSuccess:function(){this.updateShow(),this.$emit("submit")},handleSubmitFail:function(e){this.errorMessage.password=e},changeLoginMode:function(){this.loginMode="fastLoginMode"===this.loginMode?"normalLoginMode":"fastLoginMode",this.currentLoginMode=this[this.loginMode],this.userinfo.mobile="",this.userinfo.smsCode="",this.errorMessage.mobile="",this.errorMessage.password=""},validateEmail:function(){if(this.userinfo.mobile.includes("@")){var e=/^\w+@\w+(\.\w+)+$/;return e.test(this.userinfo.mobile)?this.errorMessage.mobile="":this.errorMessage.mobile="邮箱输入错误",e.test(this.userinfo.mobile)}return!0}})},p=n("a6c2"),m=Object(p.a)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("van-action-sheet",{attrs:{title:" "},on:{close:function(t){return e.updateShow(e.show)}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("div",{staticClass:"login__container"},[n("div",{staticClass:"receive-login-input"},[n("van-field",{attrs:{placeholder:e.currentLoginMode.accountPlaceholder,border:!1,"error-message":e.errorMessage.mobile,type:"text",clearable:""},on:{focus:function(t){e.errorMessage.mobile=""},blur:function(t){"fastLoginMode"===e.loginMode?e.validateMobileOrPsw("mobile"):e.validateEmail()},input:function(t){"fastLoginMode"===e.loginMode&&e.validatedChecker()}},model:{value:e.userinfo.mobile,callback:function(t){e.$set(e.userinfo,"mobile",t)},expression:"userinfo.mobile"}})],1),n("div",{staticClass:"receive-login-input"},[n("van-field",{ref:"smsCode",attrs:{type:"fastLoginMode"===e.loginMode?"text":"password",border:!1,maxlength:"fastLoginMode"===e.loginMode?6:64,placeholder:e.currentLoginMode.passwordPlaceholder,"error-message":e.errorMessage.password,clearable:""},on:{focus:function(t){e.errorMessage.password=""}},model:{value:e.userinfo.smsCode,callback:function(t){e.$set(e.userinfo,"smsCode",t)},expression:"userinfo.smsCode"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"fastLoginMode"===e.loginMode,expression:"loginMode === 'fastLoginMode'"}],class:["code-btn",e.cansentCode?"":"code-btn--disabled"],attrs:{slot:"button"},on:{click:e.clickSmsBtn},slot:"button"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.count.showCount,expression:"!count.showCount"}]},[e._v("发送验证码")]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.count.showCount,expression:"count.showCount"}]},[e._v(e._s(e.count.num)+" s")])])]),n("router-link",{staticClass:"reset-password",attrs:{to:"/setting/password/reset",tag:"div"}},[e._v("忘记密码？\n        ")])],1),e.dragEnable?n("div",{staticClass:"mobile-drag"},[n("div",{staticClass:"mobile-drag-content"},[e.dragEnable?n("e-drag",{key:e.dragKey,ref:"dragComponent",attrs:{"limit-type":"receive_coupon"},on:{success:e.handleSmsSuccess}}):e._e()],1)]):e._e(),n("div",{class:["receive-login__btn",e.btnDisable?"disabled__btn":""],on:{click:e.onSubmit}},[e._v("登录并领取\n      ")]),n("div",{staticClass:"choice-bar"},[n("div",{staticClass:"left"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLogin,expression:"!isLogin"}],on:{click:e.jump2register}},[e._v("注册账号")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"fastLoginMode"===e.loginMode,expression:"loginMode === 'fastLoginMode'"}],staticClass:"right",on:{click:e.changeLoginMode}},[e._v("使用其他方式登录 >>")]),n("div",{directives:[{name:"show",rawName:"v-show",value:"normalLoginMode"===e.loginMode,expression:"loginMode === 'normalLoginMode'"}],staticClass:"right",on:{click:e.changeLoginMode}},[e._v("使用手机快捷登录 >>")])]),n("div",{staticClass:"receive-login__text"},[n("span",{directives:[{name:"show",rawName:"v-show",value:"fastLoginMode"===e.loginMode,expression:"loginMode === 'fastLoginMode'"}],staticClass:"receive-login-tools"},[e._v("新用户领取将为您自动注册")]),n("div",{directives:[{name:"show",rawName:"v-show",value:"normalLoginMode"===e.loginMode,expression:"loginMode === 'normalLoginMode'"}],staticClass:"third-part-login"})])])])],1)}),[],!1,null,"2a148508",null).exports,v=n("3ce7");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var y={name:"ValidCard",components:{eLogin:m},data:function(){return{coin:"",date:"",money:0,password:"",show:!1,invalidCard:!1,initProcess:!1,processIsDone:!1,message:"",isECard:void 0,token:"",cash:0,cardStatusList:{expired:"卡已过期，去看看其他精品吧～",invalid:"卡已失效，去看看其他精品吧～",recharged:"",usedByOther:"卡已被其他人充值，去看看其他精品吧～",empty:"卡已被抢完，去看看其他精品吧～"},isLoading:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.d)({account:function(e){return e.user.verifiedMobile||e.user.nickname},isLogin:function(e){return!!e.token},settingsName:function(e){return e.settings.name},userToken:function(e){return e.token},userId:function(e){return e.user.id}}),{formattedPassword:function(){return this.password.toString().replace(/\W/g,"").replace(/....(?!$)/g,"$& ")}}),created:function(){document.title="学习卡充值",this.token=this.$route.params.token||"",this.password=this.$route.params.password||"",this.isECard=!!this.token.length,this.init()},methods:{init:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCoin();case 2:return e.next=4,this.getCash();case 4:!0===this.isECard?this.getMoneyCardByToken():this.getMoneyCardByPassword();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getCoin:function(){var e=this;return v.a.getCoin().then((function(t){e.coin=t.name,e.isLoading+=1})).catch((function(e){}))},switchCharge:function(e,t){var n=this;this.isLoading-=1,v.a[e]({query:Object(r.a)({},t,this[t]),headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Token":this.userToken}}).then((function(e){n.isLoading+=1,e.cardPassword&&(n.password=e.cardPassword),!0===e.success?(n.invalidCard=!1,n.message=e.message,n.cash=e.cash):(n.invalidCard=!0,n.message=e.error.message,"recharged"===e.error.status&&(n.message=n.cardStatusList.recharged)),n.processIsDone=!0})).catch((function(e){}))},switchSubmit:function(){this.initProcess?this.initStatus():this.submit()},switchUser2charge:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCash();case 2:!0===this.isECard?this.chargeMoneyCardByToken():this.chargeMoneyCardByPassword();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initStatus:function(){this.initProcess=!1,this.invalidCard?this.processIsDone=!0:!this.isLogin&&this.jump2login()},getCash:function(){var e=this;return v.a.getCash({query:{userId:this.userId}}).then((function(t){e.cash=t.cash,e.cardStatusList.recharged="之前已充值，当前账户余额："+t.cash+e.coin+"<br/>尽情去购物啦～"})).catch((function(e){}))},getMoneyCardByToken:function(){var e=this;v.a.getMoneyCardByToken({query:{token:this.token}}).then((function(t){e.isLoading+=1,e.date=t.deadline,e.money=t.coin,"normal"!==t.batchStatus&&(e.message=e.cardStatusList[t.batchStatus],e.initProcess=!1,e.invalidCard=!0,e.processIsDone=!0)})).catch((function(t){e.$router.push("/")}))},getMoneyCardByPassword:function(){var e=this;v.a.getMoneyCardByPassword({query:{password:this.password}}).then((function(t){e.isLoading+=1,e.date=t.deadline,e.money=t.coin,e.code=t.password,"normal"===t.cardStatus||t.rechargeUserId===e.userId&&"receive"===t.cardStatus||(t.cardStatus=t.rechargeUserId===e.userId||"recharged"!==t.cardStatus&&"receive"!==t.cardStatus?t.cardStatus:"usedByOther",e.message=e.cardStatusList[t.cardStatus],e.initProcess=!1,e.invalidCard=!0,e.processIsDone=!0)})).catch((function(t){e.$router.push("/")}))},submit:function(){var e=this;!this.invalidCard&&this.isLogin&&i.a.confirm({title:"将充值到当前登录账户",message:this.account,cancelButtonText:"充值其他账户"}).then((function(){!0===e.isECard?e.chargeMoneyCardByToken():e.chargeMoneyCardByPassword()})).catch((function(){e.jump2login()})),this.invalidCard||this.isLogin||this.jump2login()},jump2login:function(){this.show=!0},chargeMoneyCardByToken:function(){this.switchCharge("chargeMoneyCardByToken","token")},chargeMoneyCardByPassword:function(){this.switchCharge("chargeMoneyCardByPassword","password")}}},w=Object(p.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"valid-card"},[2!==e.isLoading?n("e-loading"):e._e(),n("div",{staticClass:"container"},[n("div",{staticClass:"top text-overflow"},[e._v("\n      "+e._s(e.settingsName)+"\n    ")]),n("div",{staticClass:"middle"},[n("div",{staticClass:"card"},[n("div",{staticClass:"valid-date"},[e._v("\n          学习卡充值有效期至："+e._s(e.date)+"\n        ")]),n("div",{staticClass:"money"},[e._v(e._s(e.money)+"\n          "),n("span",[e._v(e._s(e.coin))])]),n("div",{staticClass:"password"},[e._v(e._s(e.formattedPassword))])]),n("div",{staticClass:"result-box"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.initProcess&&!e.invalidCard&&this.isLogin&&!e.processIsDone,expression:"!initProcess && !invalidCard && this.isLogin && !processIsDone"}],staticClass:"result-box__valid-card"},[n("div",[e._v("将充值到当前账户："+e._s(e.account))]),n("a",{staticClass:"link",attrs:{href:"javascript: void(0)"},on:{click:e.jump2login}},[e._v("是否放入其他账户")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.invalidCard,expression:"invalidCard"}],staticClass:"result-box__invalid-card--process-is-done"},[e._m(0),n("div",{staticClass:"res-msg",domProps:{innerHTML:e._s(e.message)}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.processIsDone&&!e.invalidCard,expression:"processIsDone && !invalidCard"}],staticClass:"result-box__valid-card--process-is-done"},[e._m(1),n("div",{staticClass:"result-box__account"},[e._v("当前账户余额："+e._s(e.cash)+e._s(e.coin))]),n("div",[e._v("尽情去购物啦～")])])])]),n("div",{staticClass:"bottom"},[n("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.processIsDone,expression:"!processIsDone"}],attrs:{type:"primary",block:""},on:{click:e.switchSubmit}},[e._v("立即充值")]),n("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.initProcess&&e.processIsDone,expression:"!initProcess && processIsDone"}],attrs:{type:"primary",block:"",to:"/"}},[e._v("去首页")])],1)]),n("e-login",{attrs:{show:e.show},on:{"update:show":function(t){e.show=t},submit:e.switchUser2charge}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"icon"},[t("i",{staticClass:"iconfont icon-Fail"}),t("span",[this._v("充值失败")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"icon"},[t("i",{staticClass:"result-box__icon-Success"}),t("span",[this._v("充值成功")])])}],!1,null,null,null);t.default=w.exports},"4eb5":function(e,t,n){var i=n("6981"),o={autoSetContainer:!1,appendToBody:!0},r={install:function(e){e.prototype.$clipboardConfig=o,e.prototype.$copyText=function(e,t){return new Promise((function(n,r){var s=document.createElement("button"),a=new i(s,{text:function(){return e},action:function(){return"copy"},container:"object"==typeof t?t:document.body});a.on("success",(function(e){a.destroy(),n(e)})),a.on("error",(function(e){a.destroy(),r(e)})),o.appendToBody&&document.body.appendChild(s),s.click(),o.appendToBody&&document.body.removeChild(s)}))},e.directive("clipboard",{bind:function(e,t,n){if("success"===t.arg)e._vClipboard_success=t.value;else if("error"===t.arg)e._vClipboard_error=t.value;else{var r=new i(e,{text:function(){return t.value},action:function(){return"cut"===t.arg?"cut":"copy"},container:o.autoSetContainer?e:void 0});r.on("success",(function(t){var n=e._vClipboard_success;n&&n(t)})),r.on("error",(function(t){var n=e._vClipboard_error;n&&n(t)})),e._vClipboard=r}},update:function(e,t){"success"===t.arg?e._vClipboard_success=t.value:"error"===t.arg?e._vClipboard_error=t.value:(e._vClipboard.text=function(){return t.value},e._vClipboard.action=function(){return"cut"===t.arg?"cut":"copy"})},unbind:function(e,t){"success"===t.arg?delete e._vClipboard_success:"error"===t.arg?delete e._vClipboard_error:(e._vClipboard.destroy(),delete e._vClipboard)}})},config:o};e.exports=r},6981:function(e,t,n){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT © Zeno Rocha
 */
e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=c(n(1)),s=c(n(3)),a=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"resolveOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===i(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,a.default)(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new r.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}]),t}();function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}e.exports=u},function(e,t,n){"use strict";var i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),a=(i=s)&&i.__esModule?i:{default:i},c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return r(e,[{key:"resolveOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,a.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,a.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=c},function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),o=document.createRange();o.selectNodeContents(e),i.removeAllRanges(),i.addRange(o),t=i.toString()}return t}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var i=this;function o(){i.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,o=n.length;i<o;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],o=[];if(i&&t)for(var r=0,s=i.length;r<s;r++)i[r].fn!==t&&i[r].fn._!==t&&o.push(i[r]);return o.length?n[e]=o:delete n[e],this}},e.exports=n},function(e,t,n){var i=n(5),o=n(6);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(e))return f=t,h=n,(d=e).addEventListener(f,h),{destroy:function(){d.removeEventListener(f,h)}};if(i.nodeList(e))return c=e,u=t,l=n,Array.prototype.forEach.call(c,(function(e){e.addEventListener(u,l)})),{destroy:function(){Array.prototype.forEach.call(c,(function(e){e.removeEventListener(u,l)}))}};if(i.string(e))return r=e,s=t,a=n,o(document.body,r,s,a);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var r,s,a,c,u,l,d,f,h}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){var i=n(7);function o(e,t,n,o,r){var s=function(e,t,n,o){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&o.call(e,n)}}.apply(this,arguments);return e.addEventListener(n,s,r),{destroy:function(){e.removeEventListener(n,s,r)}}}e.exports=function(e,t,n,i,r){return"function"==typeof e.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return o(e,t,n,i,r)})))}},function(e,t){if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}}])},7067:function(e,t,n){"use strict";n("e17f");var i=n("2241"),o=(n("e7e5"),n("d399")),r=n("a026"),s=n("3ce7"),a=n("4eb5"),c=n.n(a);r.a.use(c.a);var u=/micromessenger/.test(navigator.userAgent.toLowerCase());t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||n&&!t)o.a.fail("缺少分享参数");else{var a={domainUri:location.origin,itemUri:"",source:"h5"};s.a.marketingActivities({query:{activityId:e},data:a}).then((function(e){var s=-1!==e.url.indexOf("?")?"&":"?",a=n?"".concat(t).concat(s,"ticket=").concat(e.ticket):e.url;u?window.location.href=a:i.a.confirm({message:"去微信完成活动",confirmButtonText:"复制链接",title:""}).then((function(){try{r.a.prototype.$copyText(a).then((function(){o.a.success("复制成功")}),(function(){o.a.fail("请更换浏览器复制")}))}catch(e){o.a.fail("请更换浏览器复制")}})).catch((function(){}))})).catch((function(e){o.a.fail(e.message)}))}}},a262:function(e,t,n){"use strict";var i=n("7067");t.a={methods:{activityHandle:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i.a)(e,t,n)}}}},d863:function(e,t,n){"use strict";n("a481");var i=n("7067");t.a={data:function(){return{redirect:""}},created:function(){this.redirect=decodeURIComponent(this.$route.fullPath)},methods:{afterLogin:function(){var e=this,t=this.$route.query.redirect?decodeURIComponent(this.$route.query.redirect):"/",n=this.$route.query.skipUrl?decodeURIComponent(this.$route.query.skipUrl):"",o=this.$route.query.callbackType,r=this.$route.query.activityId,s=decodeURIComponent(this.$route.query.callback);setTimeout((function(){if(o)switch(o){case"marketing":Object(i.a)(r,s)}else n?e.$router.replace({path:t,query:{backUrl:n}}):e.$router.replace({path:t})}),2e3)}}}},f13d:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var i=n("75fc"),o=(n("e7e5"),n("d399")),r=n("bd86"),s=(n("c5f6"),n("3ce7"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var c={props:{tips:{type:String,default:"拖动左边滑块完成上方拼图"},limitType:{type:String,default:""}},data:function(){return{imgInfo:{url:"",jigsaw:"",token:""},dragState:{left:0,width:0,currentX:0,currentLeft:0,btnWidth:0,maskWidth:0},dragToEnd:!1}},created:function(){this.initDragCaptcha()},mounted:function(){var e=this.$refs.bar,t=this.$refs.dragBtn,n=(this.$refs.drag,e.getBoundingClientRect());Object.assign(this.dragState,{left:Number(n.left.toFixed(2)),width:e.clientWidth,btnWidth:t.offsetWidth/2})},methods:{initDragCaptcha:function(){var e=this,t={};this.limitType&&(t={limitType:this.limitType}),s.a.dragCaptcha({data:t}).then((function(t){e.imgInfo=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),Object.assign(e.dragState,{currentLeft:0,maskWidth:0}),e.dragToEnd=!1})).catch((function(e){o.a.fail(e.message)}))},handletTouchEnd:function(){var e=this;if(!this.dragToEnd&&this.dragState.currentLeft){var t=this.getToken();this.dragToEnd=!0,s.a.dragValidate({query:{token:t}}).then((function(n){o.a.success("验证成功"),e.$emit("success",t)})).catch((function(t){o.a.fail(t.message),e.initDragCaptcha()}))}},handleTouchMove:function(e){if(!this.dragToEnd){e.preventDefault();var t=this.$refs.dragBtn,n=(this.$refs.dragImgBg,this.dragState),i=e.clientX?e.clientX.toFixed(2):e.targetTouches[0].pageX.toFixed(2)-this.$refs.drag.offsetLeft,o=(i-n.left-n.btnWidth).toFixed(2);o<0&&(o=0),i>n.width+this.$refs.drag.offsetLeft&&(o=n.width-this.$refs.dragImg.width),Object.assign(this.dragState,{currentLeft:o,maskWidth:(Number(o)+t.offsetWidth/2).toFixed(2)})}},calPositionX:function(){var e=this.$refs.dragImgBg,t=(e.naturalWidth/e.width).toFixed(2);return(Number(this.dragState.currentLeft).toFixed(2)*t).toFixed(2)},getToken:function(){var e={token:this.imgInfo.token,captcha:this.calPositionX()};return Object(i.a)(btoa(JSON.stringify(e))).reverse().join("")}}},u=n("a6c2"),l=Object(u.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"drag",staticClass:"e-drag"},[n("div",{staticClass:"e-drag-section"},[n("div",{staticClass:"e-drag-img"},[n("img",{ref:"dragImgBg",attrs:{src:e.imgInfo.url,alt:""}}),n("img",{ref:"dragImg",staticClass:"e-drag-img__dragable",style:{left:e.dragState.currentLeft+"px"},attrs:{src:e.imgInfo.jigsaw,alt:""}})]),n("div",{ref:"bar",staticClass:"e-drag-bar"},[n("span",[e._v(e._s(e.tips))]),n("div",{staticClass:"e-drag-bar__mask",style:{width:e.dragState.maskWidth+"px"}}),n("div",{ref:"dragBtn",staticClass:"e-drag-btn",style:{left:e.dragState.currentLeft+"px"},on:{touchend:e.handletTouchEnd,touchmove:e.handleTouchMove}},[n("img",{attrs:{src:"static/images/drag.png",alt:""}})])])])])}),[],!1,null,null,null);t.a=l.exports}}]);