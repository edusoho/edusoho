(window.webpackJsonp=window.webpackJsonp||[]).push([["exerciseIntro"],{"391c":function(e,t,s){"use strict";s("e17f");var n=s("2241");s("456d"),s("ac6a"),t.a={methods:{canDoing:function(e,t){return new Promise((function(s,r){if(e&&"doing"===e.status){var i="exercise-".concat(t,"-").concat(e.id),c=JSON.parse(localStorage.getItem(i));c=c?Object.keys(c).forEach((function(e){c[e]=c[e].filter((function(e){return""!==e}))})):{},n.a.confirm({title:"提示",cancelButtonText:"放弃做题",confirmButtonText:"继续做题",message:"您有未完成的练习，是否继续？"}).then((function(){s()})).catch((function(){r({answer:c})}))}}))}}}},dad4:function(e,t,s){"use strict";s.r(t),s("8e6e"),s("ac6a"),s("456d"),s("e7e5");var n=s("d399"),r=s("bd86"),i=s("3ce7"),c=s("2f62");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(s,!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={name:"ExerciseIntro",mixins:[s("391c").a],data:function(){return{courseId:null,taskId:null,exercise:null}},computed:a({hasResult:function(){return!!this.exercise.latestExerciseResult}},Object(c.d)({isLoading:function(e){return e.isLoading},user:function(e){return e.user}})),created:function(){this.getInfo()},beforeRouteEnter:function(e,t,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(e,t,s){document.getElementById("app").style.background="",s()},methods:a({},Object(c.b)("course",["handExercisedo"]),{getInfo:function(){var e=this;this.courseId=this.$route.query.courseId,this.taskId=this.$route.query.taskId,i.a.getExerciseIntro({query:{courseId:this.courseId,taskId:this.taskId}}).then((function(t){e.exercise=t.exercise,e.interruption()}))},interruption:function(){var e=this;this.canDoing(this.exercise.latestExerciseResult,this.user.id).then((function(){e.startExercise()})).catch((function(t){var s=t.answer;e.submitExercise(s)}))},showResult:function(){this.$router.push({name:"exerciseResult",query:{exerciseId:this.exercise.id,exerciseResultId:this.exercise.latestExerciseResult.id,courseId:this.courseId,taskId:this.taskId}})},startExercise:function(){this.$router.push({name:"exerciseDo",query:{targetId:this.taskId,exerciseId:this.exercise.id,courseId:this.courseId},params:{KeepDoing:!0}})},submitExercise:function(e){var t=this,s={answer:e,exerciseId:this.exercise.id,userId:this.user.id,exerciseResultId:this.exercise.latestExerciseResult.id};this.handExercisedo(s).then((function(e){t.showResult()})).catch((function(e){n.a.fail(e.message)}))}})},l=s("a6c2"),d=Object(l.a)(u,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isLoading?s("e-loading"):e._e(),e.exercise?s("div",{staticClass:"intro-body"},[s("van-panel",{staticClass:"panel intro-panel",attrs:{title:"练习名称"}},[s("div",{staticClass:"intro-panel__content intro-panel__content--title"},[e._v(e._s(e.exercise.name))])]),s("van-panel",{staticClass:"panel intro-panel",attrs:{title:"题目数量"}},[s("div",{staticClass:"intro-panel__content"},[e._v("\n        共计 "+e._s(e.exercise.itemCount)+" 题\n      ")])])],1):e._e(),e.exercise?s("div",{staticClass:"intro-footer"},[e.hasResult?s("van-button",{staticClass:"intro-footer__btn",attrs:{type:"primary"},on:{click:e.showResult}},[e._v("查看结果")]):s("van-button",{staticClass:"intro-footer__btn",attrs:{type:"primary"},on:{click:function(t){return e.startExercise()}}},[e._v("开始答题")])],1):e._e()],1)}),[],!1,null,null,null);t.default=d.exports}}]);