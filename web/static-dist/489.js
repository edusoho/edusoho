/*! For license information please see 489.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[489],{109:function(t,e,n){t.exports=n(688)},116:function(t,e,n){t.exports=n(559)},1665:function(t,e,n){"use strict";var r={props:{type:null}},a=n(39),o=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return"random"===t.type?n("div",{staticClass:"paper-type paper-type-random"},[t._v(t._s(t._f("trans")("question.bank.paper.random")))]):"regular"===t.type?n("div",{staticClass:"paper-type paper-type-regular"},[t._v("\n  "+t._s(t._f("trans")("question.bank.paper.regular"))+"\n")]):"aiPersonality"===t.type?n("div",{staticClass:"paper-type paper-type-ai"},[t._v("\n  "+t._s(t._f("trans")("question.bank.paper.aiPersonality"))+"\n")]):t._e()}),[],!1,null,null,null);e.a=o.exports},19:function(t,e,n){t.exports=n(696)},1977:function(t,e,n){"use strict";n.r(e);var r=n(24),a=n.n(r),o=n(29),i=n.n(o),s=n(12),c=n.n(s),u=n(38),l=n.n(u),p=n(16),f=n.n(p),d=n(21),h=n.n(d),v=n(109),y=n.n(v),g=n(84),m=n.n(g),w=n(72),b=n.n(w),_=n(80),x=n.n(_),k=n(34),T=n.n(k),S=n(19),I=n.n(S),E=n(65),L=n.n(E),R=n(15),O=n.n(R),A=n(116),q=n.n(A),P=n(27),K=n.n(P),C=n(49),j=n.n(C),D=n(23),N=n.n(D),G=n(85),z=n(1665);function $(t,e){var n=void 0!==O.a&&t[L.a]||t["@@iterator"];if(!n){if(I()(t)||(n=function(t,e){if(t){if("string"==typeof t)return F(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?q()(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function B(){B=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=h.a||function(t,e,n){t[e]=n.value},s="function"==typeof O.a?O.a:{},u=s.iterator||"@@iterator",p=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function v(t,e,n){return h()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{v({},"")}catch(t){v=function(t,e,n){return t[e]=n}}function y(t,e,n,r){var a=e&&e.prototype instanceof x?e:x,i=f()(a.prototype),s=new j(r||[]);return o(i,"_invoke",{value:q(t,n,s)}),i}function g(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=y;var m="suspendedStart",w="executing",b="completed",_={};function x(){}function k(){}function T(){}var S={};v(S,u,(function(){return this}));var I=l.a,E=I&&I(I(D([])));E&&E!==n&&r.call(E,u)&&(S=E);var L=T.prototype=x.prototype=f()(S);function R(t){["next","throw","return"].forEach((function(e){v(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(a,o,i,s){var u=g(t[a],t,o);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==c()(p)&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(p).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,s)}))}s(u.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(o,o):o()}})}function q(e,n,r){var a=m;return function(o,i){if(a===w)throw Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===_)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=w;var u=g(e,n,r);if("normal"===u.type){if(a=r.done?b:"suspendedYield",u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=b,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var o=g(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,_;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function K(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(K,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(c()(e)+" is not iterable")}return k.prototype=T,o(L,"constructor",{value:T,configurable:!0}),o(T,"constructor",{value:k,configurable:!0}),k.displayName=v(T,d,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return i.a?i()(t,T):(t.__proto__=T,v(t,d,"GeneratorFunction")),t.prototype=f()(L),t},e.awrap=function(t){return{__await:t}},R(A.prototype),v(A.prototype,p,(function(){return this})),e.AsyncIterator=A,e.async=function(t,n,r,o,i){void 0===i&&(i=a.a);var s=new A(y(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},R(L),v(L,d,"Generator"),v(L,u,(function(){return this})),v(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}function Y(t,e){var n=T()(t);if(x.a){var r=x()(t);e&&(r=r.filter((function(e){return b()(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){j()(t,e,n[e])})):m.a?y()(t,m()(n)):Y(Object(n)).forEach((function(e){h()(t,e,b()(n,e))}))}return t}var V=[{title:Translator.trans("question.bank.paper.name"),dataIndex:"name",scopedSlots:{customRender:"name"},ellipsis:!0,width:240},{title:Translator.trans("question.bank.paper.type"),dataIndex:"type",scopedSlots:{customRender:"type"},width:120},{title:Translator.trans("question.bank.paper.num"),dataIndex:"num",scopedSlots:{customRender:"num"},width:90,align:"right"},{title:Translator.trans("question.bank.paper.status"),dataIndex:"status",scopedSlots:{customRender:"status"},width:90},{title:Translator.trans("question.bank.paper.numberOfItems/score"),scopedSlots:{customRender:"numberOfItemsAndScore"},width:100},{title:Translator.trans("question.bank.paper.updatePerson/updatedAt"),scopedSlots:{customRender:"creatorAndCreatedAt"},width:160}],U={components:{TestpaperTypeTag:z.a},props:{itemBankId:null,exerciseId:null,moduleId:null},name:"AddTestPaper",data:function(){return{drawerVisible:!1,type:void 0,keywordType:"name",keyword:void 0,columns:V,pageData:[],loading:!1,pagination:{current:1,total:0,pageSize:10},selectedRowKeys:[]}},methods:{closeDrawer:function(){document.getElementById("add-test-paper-drawer-visible").value=!1},confirm:function(){this.$confirm({title:Translator.trans("item_bank_exercise.abandonOperation"),content:Translator.trans("item_bank_exercise.unsaved"),okText:Translator.trans("site.confirm"),cancelText:Translator.trans("site.cancel"),onOk:this.closeDrawer})},fetchTestPaper:function(t){var e=this;return N()(B().mark((function n(){var r,a,o,i;return B().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,G.I.search(K()(M({limit:20,itemBankId:e.itemBankId,exerciseId:e.exerciseId,moduleId:e.moduleId,status:"open"},t),"creator"===e.keywordType?{createdUser:e.keyword}:{nameLike:e.keyword}));case 3:r=n.sent,a=r.data,o=r.paging,(i=M({},e.pagination)).total=o.total,i.pageSize=Number(o.limit),e.loading=!1,e.pageData=a,e.pagination=i;case 12:case"end":return n.stop()}}),n)})))()},onSelectChange:function(t){this.selectedRowKeys=t},handleSelectAllChange:function(t){var e=this.pageData.map((function(t){return t.id}));t.target.checked?this.selectedRowKeys=this.selectedRowKeys.filter((function(t){return!e.includes(t)})).concat(e):this.selectedRowKeys=this.selectedRowKeys.filter((function(t){return!e.includes(t)}))},addTestPaper:function(){var t=this;return N()(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.I.addToExercise({exerciseId:t.exerciseId,moduleId:t.moduleId,ids:t.selectedRowKeys});case 2:t.$message.success("添加成功"),document.getElementById("add-test-paper-drawer-visible").value=!1,t.$emit("addTestPaper");case 5:case"end":return e.stop()}}),e)})))()}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,hideDefaultSelections:!0}},isSelectAll:function(){var t,e=$(this.pageData.map((function(t){return t.id})));try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!this.selectedRowKeys.includes(n))return!1}}catch(t){e.e(t)}finally{e.f()}return!0},isIndeterminate:function(){var t,e=$(this.pageData.map((function(t){return t.id})));try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this.selectedRowKeys.includes(n))return!0}}catch(t){e.e(t)}finally{e.f()}return!1}},created:function(){var t=this;return N()(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTestPaper(t.pagination);case 2:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this,e=document.getElementById("add-test-paper-drawer-visible");new MutationObserver((function(n){n.forEach((function(n){"value"===n.attributeName&&(t.drawerVisible="true"===e.value)}))})).observe(e,{attributes:!0,attributeFilter:["value"]})},watch:{drawerVisible:function(t){var e=this;return N()(B().mark((function n(){var r;return B().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=8;break}return(r=M({},e.pagination)).current=1,e.pagination=r,n.next=6,e.fetchTestPaper(e.pagination);case 6:n.next=9;break;case 8:e.selectedRowKeys=[];case 9:case"end":return n.stop()}}),n)})))()}}},H=n(39),J=Object(H.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-drawer",{staticClass:"exercise-container-drawer",attrs:{title:t._f("trans")("item_bank_exercise.addTestpaper"),visible:t.drawerVisible,width:"960","body-style":{paddingBottom:"80px"}},on:{close:t.confirm}},[n("div",{staticClass:"condition-bar"},[n("a-select",{staticStyle:{width:"156px"},attrs:{placeholder:t._f("trans")("question.bank.paper.type"),"allow-clear":""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[n("a-select-option",{attrs:{value:"regular"}},[t._v("\n          "+t._s(t._f("trans")("question.bank.paper.regular"))+"\n        ")]),t._v(" "),n("a-select-option",{attrs:{value:"random"}},[t._v("\n          "+t._s(t._f("trans")("question.bank.paper.random"))+"\n        ")]),t._v(" "),n("a-select-option",{attrs:{value:"aiPersonality"}},[t._v("\n          "+t._s(t._f("trans")("question.bank.paper.aiPersonality"))+"\n        ")])],1),t._v(" "),n("a-select",{staticStyle:{width:"100px"},model:{value:t.keywordType,callback:function(e){t.keywordType=e},expression:"keywordType"}},[n("a-select-option",{attrs:{value:"name"}},[t._v("\n          "+t._s(t._f("trans")("question.bank.paper.name"))+"\n        ")]),t._v(" "),n("a-select-option",{attrs:{value:"creator"}},[t._v("\n          "+t._s(t._f("trans")("question.bank.paper.creator"))+"\n        ")])],1),t._v(" "),n("a-input",{staticStyle:{flex:"1 0 0"},attrs:{placeholder:t._f("trans")("question.bank.paper.typeKeyword")},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.fetchTestPaper({type:t.type})}}},[t._v(t._s(t._f("trans")("site.search_hint")))]),t._v(" "),n("a-button",{on:{click:function(e){t.type=void 0,t.keywordType="name",t.keyword=void 0}}},[t._v("\n        "+t._s(t._f("trans")("question.bank.reset.btn"))+"\n      ")])],1),t._v(" "),n("a-table",{attrs:{columns:t.columns,"data-source":t.pageData,"row-key":function(t){return t.id},pagination:!1,loading:t.loading,"row-selection":t.rowSelection},scopedSlots:t._u([{key:"name",fn:function(e){return[n("a-tooltip",{attrs:{title:e}},[n("span",[t._v(t._s(e))])])]}},{key:"type",fn:function(t){return[n("testpaper-type-tag",{attrs:{type:t}})]}},{key:"num",fn:function(e){return[n("span",[t._v(t._s(e||"-"))])]}},{key:"status",fn:function(e){return["draft"===e?n("a-badge",{attrs:{color:"gray",text:t._f("trans")("question.bank.paper.draft")}}):t._e(),t._v(" "),"open"===e?n("a-badge",{attrs:{color:"green",text:t._f("trans")("question.bank.paper.published")}}):t._e(),t._v(" "),"closed"===e?n("a-badge",{attrs:{color:"red",text:t._f("trans")("question.bank.paper.closed")}}):t._e(),t._v(" "),"generating"===e?n("a-badge",{attrs:{color:"orange",text:t._f("trans")("question.bank.paper.generating")}}):t._e()]}},{key:"numberOfItemsAndScore",fn:function(e){return[t._v("\n        "+t._s(e.question_count+" / "+e.total_score)+"\n      ")]}},{key:"creatorAndCreatedAt",fn:function(e){return[n("div",[n("span",[t._v(t._s(e.updated_user.nickname))]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"created_time"},[t._v(t._s(t.$dateFormat(e.updated_time,"YYYY-MM-DD HH:mm:ss")))])])]}}])}),t._v(" "),n("div",{staticClass:"drawer-bottom"},[n("div",{staticClass:"selector-operate"},[n("a-checkbox",{attrs:{indeterminate:t.isIndeterminate&&!t.isSelectAll,checked:t.selectedRowKeys&&t.selectedRowKeys.length>0&&t.isSelectAll},on:{change:t.handleSelectAllChange}},[n("span",{staticClass:"checkbox-text"},[t._v(t._s(t._f("trans")("question.bank.paper.selectAll")))])]),t._v(" "),n("span",[t._v(t._s(t._f("trans")("question.bank.paper.selectedItems",{select:this.selectedRowKeys.length})))])],1),t._v(" "),n("div",[n("a-button",{style:{marginRight:"8px"},on:{click:t.confirm}},[t._v("\n          "+t._s(t._f("trans")("site.cancel"))+"\n        ")]),t._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:t.addTestPaper}},[t._v("\n          "+t._s(t._f("trans")("site.data.create"))+"\n        ")])],1)])],1)}),[],!1,null,null,null).exports;function Q(){Q=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=h.a||function(t,e,n){t[e]=n.value},s="function"==typeof O.a?O.a:{},u=s.iterator||"@@iterator",p=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function v(t,e,n){return h()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{v({},"")}catch(t){v=function(t,e,n){return t[e]=n}}function y(t,e,n,r){var a=e&&e.prototype instanceof x?e:x,i=f()(a.prototype),s=new j(r||[]);return o(i,"_invoke",{value:q(t,n,s)}),i}function g(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=y;var m="suspendedStart",w="executing",b="completed",_={};function x(){}function k(){}function T(){}var S={};v(S,u,(function(){return this}));var I=l.a,E=I&&I(I(D([])));E&&E!==n&&r.call(E,u)&&(S=E);var L=T.prototype=x.prototype=f()(S);function R(t){["next","throw","return"].forEach((function(e){v(t,e,(function(t){return this._invoke(e,t)}))}))}function A(t,e){function n(a,o,i,s){var u=g(t[a],t,o);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==c()(p)&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(p).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,s)}))}s(u.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(o,o):o()}})}function q(e,n,r){var a=m;return function(o,i){if(a===w)throw Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===_)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=w;var u=g(e,n,r);if("normal"===u.type){if(a=r.done?b:"suspendedYield",u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=b,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var o=g(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,_;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,_):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function K(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(K,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(c()(e)+" is not iterable")}return k.prototype=T,o(L,"constructor",{value:T,configurable:!0}),o(T,"constructor",{value:k,configurable:!0}),k.displayName=v(T,d,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return i.a?i()(t,T):(t.__proto__=T,v(t,d,"GeneratorFunction")),t.prototype=f()(L),t},e.awrap=function(t){return{__await:t}},R(A.prototype),v(A.prototype,p,(function(){return this})),e.AsyncIterator=A,e.async=function(t,n,r,o,i){void 0===i&&(i=a.a);var s=new A(y(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},R(L),v(L,d,"Generator"),v(L,u,(function(){return this})),v(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),_}},e}function W(t,e){var n=T()(t);if(x.a){var r=x()(t);e&&(r=r.filter((function(e){return b()(t,e).enumerable}))),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){j()(t,e,n[e])})):m.a?y()(t,m()(n)):W(Object(n)).forEach((function(e){h()(t,e,b()(n,e))}))}return t}function Z(t,e){var n=void 0!==O.a&&t[L.a]||t["@@iterator"];if(!n){if(I()(t)||(n=function(t,e){if(t){if("string"==typeof t)return tt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?q()(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var et=[{title:Translator.trans("question.bank.paper.name"),dataIndex:"name",scopedSlots:{customRender:"name"},ellipsis:!0,width:340},{title:Translator.trans("question.bank.paper.type"),dataIndex:"type",scopedSlots:{customRender:"type"},width:120},{title:Translator.trans("question.bank.paper.num"),dataIndex:"num",scopedSlots:{customRender:"num"},width:90,align:"right"},{title:Translator.trans("question.bank.paper.numberOfItems/score"),scopedSlots:{customRender:"numberOfItemsAndScore"},width:150,align:"center"},{title:Translator.trans("question.bank.paper.operation"),scopedSlots:{customRender:"operation"},width:150}],nt={components:{TestpaperTypeTag:z.a,AddTestPaperDrawer:J},props:{itemBankId:null,exerciseId:null,moduleId:null},data:function(){return{columns:et,pageData:[],loading:!1,pagination:{current:1,total:0,pageSize:10},selectedRowKeys:[],pageSizeOptions:["10","20","30","40","50"]}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,hideDefaultSelections:!0}},isSelectAll:function(){var t,e=Z(this.pageData.map((function(t){return t.id})));try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!this.selectedRowKeys.includes(n))return!1}}catch(t){e.e(t)}finally{e.f()}return!0},isIndeterminate:function(){var t,e=Z(this.pageData.map((function(t){return t.id})));try{for(e.s();!(t=e.n()).done;){var n=t.value;if(this.selectedRowKeys.includes(n))return!0}}catch(t){e.e(t)}finally{e.f()}return!1}},methods:{preview:function(t){window.location.href="".concat(window.location.origin,"/question_bank/").concat(this.itemBankId,"/testpaper/").concat(t.assessmentId,"/preview")},onSelectChange:function(t){this.selectedRowKeys=t},handleSelectAllChange:function(t){var e=this.pageData.map((function(t){return t.id}));t.target.checked?this.selectedRowKeys=this.selectedRowKeys.filter((function(t){return!e.includes(t)})).concat(e):this.selectedRowKeys=this.selectedRowKeys.filter((function(t){return!e.includes(t)}))},fetchTestPaper:function(t){var e=this;return N()(Q().mark((function n(){var r,a,o,i;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,G.I.searchExercise(X({limit:20,exerciseId:e.exerciseId,moduleId:e.moduleId},t));case 3:r=n.sent,a=r.data,o=r.paging,(i=X({},e.pagination)).total=o.total,i.pageSize=Number(o.limit),e.loading=!1,e.pageData=a.map((function(t){return K()(t.assessment,{id:t.id,assessmentId:t.assessment.id})})),e.pagination=i;case 12:case"end":return n.stop()}}),n)})))()},getTableTotal:function(t){return Translator.trans("question.bank.paper.pageTotal",{total:t})},handlePaginationChange:function(t,e){var n=this;return N()(Q().mark((function r(){var a;return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(a=X({},n.pagination)).current=t,a.pageSize=e,n.pagination=a,r.next=6,n.handleTableChange(n.pagination);case 6:case"end":return r.stop()}}),r)})))()},batchDelete:function(){var t=this;return N()(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$confirm({title:"确定要删除".concat(t.selectedRowKeys.length,"份试卷吗？"),icon:"exclamation-circle",okText:"删除",cancelText:Translator.trans("site.cancel"),onOk:function(){var e=N()(Q().mark((function e(){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.I.deleteExercise({exerciseId:t.exerciseId,ids:t.selectedRowKeys});case 2:return t.$message.success("删除成功"),n={limit:t.pagination.pageSize,offset:(t.pagination.current-1)*t.pagination.pageSize},e.next=6,t.fetchTestPaper(n);case 6:t.selectedRowKeys=[];case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)})))()},handleDelete:function(t){var e,n=this,r=this.fetchTestPaper;this.$confirm({title:"确定要移除该试卷吗？",icon:"exclamation-circle",okText:"删除",cancelText:"取消",centered:!0,onOk:(e=N()(Q().mark((function e(){var a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.I.deleteExercise({exerciseId:n.exerciseId,ids:[t.id]});case 3:return n.$message.success("移除成功"),a={limit:n.pagination.pageSize,offset:(n.pagination.current-1)*n.pagination.pageSize},n.selectedRowKeys=n.selectedRowKeys.filter((function(e){return e!==t.id})),e.next=8,r(a);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n.$message.success("移除失败",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(){return e.apply(this,arguments)})})},handleAddTestPaper:function(){var t=this;return N()(Q().mark((function e(){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=X({},t.pagination)).current=1,t.pagination=n,e.next=5,t.fetchTestPaper(t.pagination);case 5:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;return N()(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTestPaper(t.pagination);case 2:case"end":return e.stop()}}),e)})))()}},rt=nt,at=Object(H.a)(rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-table",{attrs:{columns:t.columns,"data-source":t.pageData,"row-key":function(t){return t.id},pagination:!1,loading:t.loading,"row-selection":t.rowSelection},scopedSlots:t._u([{key:"name",fn:function(e){return[n("a-tooltip",{attrs:{title:e}},[n("span",[t._v(t._s(e))])])]}},{key:"type",fn:function(t){return[n("testpaper-type-tag",{attrs:{type:t}})]}},{key:"num",fn:function(e){return[n("span",[t._v(t._s(e||"-"))])]}},{key:"numberOfItemsAndScore",fn:function(e){return[t._v("\n      "+t._s(e.question_count+" / "+e.total_score)+"\n    ")]}},{key:"operation",fn:function(e){return[n("div",{staticClass:"operation-group"},["aiPersonality"!==e.type&&["draft","open"].includes(e.status)?n("a-button",{staticClass:"operation-group-button-active",attrs:{type:"link"},on:{click:function(n){return t.preview(e)}}},[t._v("\n          "+t._s(t._f("trans")("question.bank.paper.preview"))+"\n        ")]):t._e(),t._v(" "),"aiPersonality"!==e.type&&["generating","fail"].includes(e.status)?n("a-button",{attrs:{type:"link",disabled:!0}},[t._v("\n          "+t._s(t._f("trans")("question.bank.paper.preview"))+"\n        ")]):t._e(),t._v(" "),n("a-button",{attrs:{type:"link"},on:{click:function(n){return t.handleDelete(e)}}},[t._v("\n          "+t._s(t._f("trans")("decorate.remove"))+"\n        ")])],1)]}}])}),t._v(" "),n("div",{staticClass:"list-bottom"},[n("div",{staticClass:"selector-operate"},[n("a-checkbox",{attrs:{indeterminate:t.isIndeterminate&&!t.isSelectAll,checked:t.selectedRowKeys&&t.selectedRowKeys.length>0&&t.isSelectAll},on:{change:t.handleSelectAllChange}},[n("span",{staticClass:"checkbox-text"},[t._v(t._s(t._f("trans")("question.bank.paper.selectAll")))])]),t._v(" "),n("span",[t._v(t._s(t._f("trans")("question.bank.paper.selectedItems",{select:this.selectedRowKeys.length})))]),t._v(" "),n("a-button",{attrs:{type:"danger",ghost:"",size:"small",disabled:0===this.selectedRowKeys.length},on:{click:t.batchDelete}},[t._v(t._s(t._f("trans")("question.bank.paper.batch.delete")))])],1),t._v(" "),n("a-pagination",{attrs:{"show-quick-jumper":"","show-size-changer":"","page-size-options":t.pageSizeOptions,"show-total":function(e){return t.getTableTotal(e)},total:t.pagination.total},on:{showSizeChange:t.handlePaginationChange,change:t.handlePaginationChange},model:{value:t.pagination.current,callback:function(e){t.$set(t.pagination,"current",e)},expression:"pagination.current"}})],1),t._v(" "),n("add-test-paper-drawer",{attrs:{"item-bank-id":t.itemBankId,"exercise-id":t.exerciseId,"module-id":t.moduleId},on:{addTestPaper:t.handleAddTestPaper}})],1)}),[],!1,null,null,null);e.default=at.exports},27:function(t,e,n){t.exports=n(557)},34:function(t,e,n){t.exports=n(686)},387:function(t,e,n){t.exports=n(684)},4:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},49:function(t,e,n){var r=n(21);t.exports=function(t,e,n){return e in t?r(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},5:function(t,e,n){var r=n(21);function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),r(t,a.key,a)}}t.exports=function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}},684:function(t,e,n){n(685),t.exports=n(55).Reflect.deleteProperty},685:function(t,e,n){var r=n(71),a=n(279).f,o=n(133);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=a(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},686:function(t,e,n){n(687),t.exports=n(55).Object.keys},687:function(t,e,n){var r=n(215),a=n(204);n(174)("keys",(function(){return function(t){return a(r(t))}}))},688:function(t,e,n){n(689);var r=n(55).Object;t.exports=function(t,e){return r.defineProperties(t,e)}},689:function(t,e,n){var r=n(71);r(r.S+r.F*!n(126),"Object",{defineProperties:n(553)})},690:function(t,e,n){n(691),t.exports=n(55).Object.getOwnPropertyDescriptors},691:function(t,e,n){var r=n(71),a=n(692),o=n(159),i=n(279),s=n(554);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),c=i.f,u=a(r),l={},p=0;u.length>p;)void 0!==(n=c(r,e=u[p++]))&&s(l,e,n);return l}})},692:function(t,e,n){var r=n(432),a=n(388),o=n(133),i=n(114).Reflect;t.exports=i&&i.ownKeys||function(t){var e=r.f(o(t)),n=a.f;return n?e.concat(n(t)):e}},693:function(t,e,n){n(694);var r=n(55).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},694:function(t,e,n){var r=n(159),a=n(279).f;n(174)("getOwnPropertyDescriptor",(function(){return function(t,e){return a(r(t),e)}}))},695:function(t,e,n){n(389),t.exports=n(55).Object.getOwnPropertySymbols},696:function(t,e,n){n(697),t.exports=n(55).Array.isArray},697:function(t,e,n){var r=n(71);r(r.S,"Array",{isArray:n(390)})},72:function(t,e,n){t.exports=n(693)},80:function(t,e,n){t.exports=n(695)},84:function(t,e,n){t.exports=n(690)}}]);