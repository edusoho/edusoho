!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/static-dist/",n(n.s=23)}([function(e,t,n){e.exports=!n(8)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){e.exports=n(9)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){var r=n(10);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r(e,i.key,i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(17),i=n(18),o=n(20),a=Object.defineProperty;t.f=n(0)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(4),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){e.exports=n(11)},function(e,t,n){n(12);var r=n(4).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(13);r(r.S+r.F*!n(0),"Object",{defineProperty:n(7).f})},function(e,t,n){var r=n(6),i=n(4),o=n(14),a=n(16),u=n(22),c=function(e,t,n){var s,f,l,d=e&c.F,p=e&c.G,v=e&c.S,y=e&c.P,h=e&c.B,m=e&c.W,_=p?i:i[t]||(i[t]={}),g=_.prototype,w=p?r:v?r[t]:(r[t]||{}).prototype;for(s in p&&(n=t),n)(f=!d&&w&&void 0!==w[s])&&u(_,s)||(l=f?w[s]:n[s],_[s]=p&&"function"!=typeof w[s]?n[s]:h&&f?o(l,r):m&&w[s]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):y&&"function"==typeof l?o(Function.call,l):l,y&&((_.virtual||(_.virtual={}))[s]=l,e&c.R&&g&&!g[s]&&a(g,s,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(15);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(7),i=n(21);e.exports=n(0)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(5);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(0)&&!n(8)((function(){return 7!=Object.defineProperty(n(19)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(5),i=n(6).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),u=n(3),c=n.n(u),s=function(){function e(t,n,r){a()(this,e),this.select1=t,this.select2=n,this.object=r,this._initEvent()}return c()(e,[{key:"_initEvent",value:function(){var e=this;this.select1.on("change",(function(t){return e._selectChange(t)}))}},{key:"_selectChange",value:function(e){var t=this.select1.data("url"),n=this.select1.val(),r=this;0!=n?$.post(t,{bankId:n,isTree:!0},(function(e){""!=e?(r.select2.find(".js-treeview-data").text(i()(e)),r.select2.find(".js-treeview-ipt").val(""),r.select2.find(".js-treeview-text").val(""),new window.$.CheckTreeviewInput({$elem:r.select2,disableNodeCheck:!0,saveColumn:"id",transportChildren:!0}),r.select2.removeClass("hidden")):r.select2.addClass("hidden")})):this.select2.hide()}}]),e}();function f(){var e=$("#questionBankSelect").data("checkNumUrl"),t=$("#questionBankSelect").val(),n=$('[name="range[categoryIds]"]').val(),r=$('[name="difficulty"]').val();$.post(e,{bankId:t,categoryIds:n,difficulty:r},(function(e){$('[role="questionNum"]').text(0),$.each(e,(function(e,t){$("[type='"+e+"']").text(t.itemNum)}))}))}new(function(){function e(t){a()(this,e),this.$element=t,this.validator2=null,this._setValidateRule(),this._init(),this._initEvent()}return c()(e,[{key:"_init",value:function(){this._inItStep2form(),this.fix()}},{key:"_initEvent",value:function(){var e=this;window.ltc.on("getActivity",(function(t){window.ltc.emit("returnActivity",{valid:e.validator2.form(),data:window.ltc.getFormSerializeObject($("#step2-form"))})})),window.ltc.on("getValidate",(function(t){window.ltc.emit("returnValidate",{valid:e.validator2.form()})}))}},{key:"_inItStep2form",value:function(){var e=$("#step2-form");this.validator2=e.validate({rules:{title:{required:!0,maxlength:50,trim:!0,course_title:!0},itemCount:{required:!0,positiveInteger:!0,min:1,max:9999},range:{required:!0},difficulty:{required:!0},"questionTypes[]":{required:!0,remote:{url:$('[name="checkQuestion"]').data("checkUrl"),type:"post",dataType:"json",async:!1,data:{itemCount:function(){return $('[name="itemCount"]').val()},range:function(){var e={},t=$('[name="range[bankId]"]').val();if(e.bankId=t,$('[name="range[categoryIds]"]').length>0){var n=$('[name="range[categoryIds]"]').val();e.categoryIds=n}return i()(e)},difficulty:function(){return $('[name="difficulty"]').val()},types:function(){var e=[];return $('[name="questionTypes[]"]:checked').each((function(){e.push($(this).val())})),e}}}}},messages:{required:Translator.trans("activity.exercise_manage.title_required_error_hint"),range:Translator.trans("activity.exercise_manage.title_range_error_hint"),itemCount:{required:Translator.trans("activity.exercise_manage.item_count_required_error_hint"),positiveInteger:Translator.trans("activity.exercise_manage.item_count_positive_integer_error_hint"),min:Translator.trans("activity.exercise_manage.item_count_min_error_hint"),max:Translator.trans("activity.exercise_manage.item_count_max_error_hint")},difficulty:Translator.trans("activity.exercise_manage.difficulty_required_error_hint"),"questionTypes[]":{required:Translator.trans("activity.exercise_manage.question_required_error_hint"),remote:Translator.trans("activity.exercise_manage.question_remote_error_hint")}}})}},{key:"_setValidateRule",value:function(){$.validator.addMethod("positiveInteger",(function(e,t){return this.optional(t)||/^[1-9]\d*$/.test(e)}),$.validator.format(Translator.trans("activity.exercise_manage.item_count_positive_integer_error_hint")))}},{key:"fix",value:function(){var e=this;$(".js-question-type").click((function(){e.validator2.form()}))}}]),e}())($("#step2-form")),f(),$("#questionBankSelect").change((function(){f()})),$('[name="range[categoryIds]"]').change((function(){f()})),$('[name="difficulty"]').change((function(){f()})),$("#questionBankSelect").select2({treeview:!0,dropdownAutoWidth:!0,treeviewInitState:"collapsed",placeholderOption:"first",formatResult:function(e){var t=(e.text+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />");return e.id?'<div class="select2-result-text"><span class="select2-match"></span><span><i class="es-icon es-icon-tiku"></i>'.concat(t,"</span></div>"):t},dropdownCss:{width:""}});var l=new window.$.CheckTreeviewInput({$elem:$("#questionCategorySelect"),disableNodeCheck:!0,saveColumn:"id",transportChildren:!0});new s($("#questionBankSelect"),$("#questionCategorySelect"),l),$(".task-iframe-body").find(".select2-results").css("max-height","180px")}]);