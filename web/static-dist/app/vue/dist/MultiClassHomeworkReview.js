/*! For license information please see MultiClassHomeworkReview.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[447],{109:function(t,e,n){t.exports=n(688)},1631:function(t,e,n){"use strict";n.r(e);var r=n(24),a=n.n(r),o=n(29),i=n.n(o),s=n(12),c=n.n(s),u=n(38),l=n.n(u),f=n(16),d=n.n(f),h=n(15),p=n.n(h),g=n(21),m=n.n(g),v=n(109),y=n.n(v),w=n(84),x=n.n(w),k=n(72),b=n.n(k),_=n(80),L=n.n(_),S=n(34),E=n.n(S),R=n(27),T=n.n(R),I=n(23),O=n.n(I),P=n(49),j=n.n(P),N=n(85),z=n(1804),M=n(68),C=n.n(M);function Y(){Y=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=m.a||function(t,e,n){t[e]=n.value},s="function"==typeof p.a?p.a:{},u=s.iterator||"@@iterator",f=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function g(t,e,n){return m()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{g({},"")}catch(t){g=function(t,e,n){return t[e]=n}}function v(t,e,n,r){var a=e&&e.prototype instanceof _?e:_,i=d()(a.prototype),s=new C(r||[]);return o(i,"_invoke",{value:j(t,n,s)}),i}function y(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=v;var w="suspendedStart",x="executing",k="completed",b={};function _(){}function L(){}function S(){}var E={};g(E,u,(function(){return this}));var R=l.a,T=R&&R(R(D([])));T&&T!==n&&r.call(T,u)&&(E=T);var I=S.prototype=_.prototype=d()(E);function O(t){["next","throw","return"].forEach((function(e){g(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function n(a,o,i,s){var u=y(t[a],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==c()(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,s)}))}s(u.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(o,o):o()}})}function j(e,n,r){var a=w;return function(o,i){if(a===x)throw Error("Generator is already running");if(a===k){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=N(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===w)throw a=k,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=x;var u=y(e,n,r);if("normal"===u.type){if(a=r.done?k:"suspendedYield",u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=k,r.method="throw",r.arg=u.arg)}}}function N(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,N(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var o=y(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,b;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function z(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(z,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(c()(e)+" is not iterable")}return L.prototype=S,o(I,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:L,configurable:!0}),L.displayName=g(S,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===L||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return i.a?i()(t,S):(t.__proto__=S,g(t,h,"GeneratorFunction")),t.prototype=d()(I),t},e.awrap=function(t){return{__await:t}},O(P.prototype),g(P.prototype,f,(function(){return this})),e.AsyncIterator=P,e.async=function(t,n,r,o,i){void 0===i&&(i=a.a);var s=new P(v(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},O(I),g(I,h,"Generator"),g(I,u,(function(){return this})),g(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function D(t,e){var n=E()(t);if(L.a){var r=L()(t);e&&(r=r.filter((function(e){return b()(t,e).enumerable}))),n.push.apply(n,r)}return n}var F=[{title:"课时",dataIndex:"lesson",scopedSlots:{customRender:"lesson"}},{title:"作业/考试",dataIndex:"name",scopedSlots:{customRender:"name"},filters:[{text:"作业",value:"homework"},{text:"考试",value:"testpaper"}]},{title:"题量",dataIndex:"item_count",scopedSlots:{customRender:"item_count"}},{title:"已批",dataIndex:"finished",scopedSlots:{customRender:"finished"}},{title:"未批",dataIndex:"reviewing",scopedSlots:{customRender:"reviewing"}},{title:"未交",dataIndex:"doing",scopedSlots:{customRender:"doing"}},{title:"开始时间",dataIndex:"startTime",scopedSlots:{customRender:"startTime"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],G=[{title:"姓名",dataIndex:"nickname",scopedSlots:{customRender:"nickname"}},{title:"成绩",dataIndex:"grade",scopedSlots:{customRender:"grade"}},{title:"提交时间",dataIndex:"end_time",scopedSlots:{customRender:"end_time"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"批阅人",dataIndex:"teacherInfo",scopedSlots:{customRender:"teacherInfo"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],H={all:{total:0,offset:0,pageSize:5},reviewing:{total:0,offset:0,pageSize:5},doing:{total:0,offset:0,pageSize:5},finished:{total:0,offset:0,pageSize:5}},$={name:"HomeWorkReview",components:{ClassName:z.a},data:function(){return{columns:F,resultColumns:G,getListLoading:!1,homeworksList:[],examResultList:{},paging:{total:0,offset:0,pageSize:10},examPaging:H,modalVisible:!1,currentTab:0,currentTask:{},status:["all","reviewing","doing","finished"],statusMap:{doing:"进行中",paused:"暂停",reviewing:"未批阅",finished:"已批阅"},gradeMap:{excellent:"优秀",good:"良好",passed:"合格",unpassed:"不合格"}}},watch:{currentTab:function(t){this.getExamResults(t)}},computed:{examResults:function(){var t=this.status[this.currentTab];return this.examResultList[t]}},created:function(){this.getHomeworkList()},methods:{handleExamTableChange:function(t){var e=this.status[this.currentTab],n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){j()(t,e,n[e])})):x.a?y()(t,x()(n)):D(Object(n)).forEach((function(e){m()(t,e,b()(n,e))}))}return t}({},this.examPaging[e]);n.current=t.current,n.offset=(t.current-1)*t.pageSize,this.examPaging[e]=n;var r={limit:t.pageSize,offset:(t.current-1)*t.pageSize};this.getExamResults(this.currentTab,r)},getHomeworkList:function(){var t=arguments,e=this;return O()(Y().mark((function n(){var r,a,o,i;return Y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:{},e.getListLoading=!0,n.prev=2,n.next=5,N.w.getExams({multiClassId:e.$route.params.id,types:r.types||[],offset:r.offset||0,limit:r.pageSize||10});case 5:a=n.sent,o=a.data,i=a.paging,e.homeworksList=o,e.paging=C.a.assign(i,{pageSize:Number(i.limit)});case 10:return n.prev=10,e.getListLoading=!1,n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[2,,10,13]])})))()},showResultListModal:function(t,e){var n=this.status.indexOf(t);this.currentTask=e,this.currentTab=n,this.currentTab==n&&this.getExamResults(n),this.modalVisible=!0},getExamResults:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.status[e];console.log(r),console.log(this.examPaging[r]),N.w.getExamResults({status:r,multiClassId:this.$route.params.id,taskId:this.currentTask.id,offset:n.offset||this.examPaging[r].offset||H[r].offset,limit:n.limit||this.examPaging[r].pageSize||H[r].pageSize}).then((function(e){e.paging.page=e.paging.offset/e.paging.limit+1,t.examPaging[r]=T()(t.examPaging[r],e.paging),t.$set(t.examResultList,r,e)}))},change:function(t,e,n,r){r.currentDataSource;var a={};e&&C.a.isArray(e.name)&&(a.types=e.name),t&&(a.offset=t.pageSize*(t.current-1),a.pageSize=t.pageSize),a&&this.getHomeworkList(a)}}},V=$,A=(n(1958),n(39)),K=Object(A.a)(V,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-spin",{attrs:{spinning:t.getListLoading}},[n("a-table",{attrs:{columns:t.columns,"data-source":t.homeworksList,pagination:t.paging,rowKey:function(t){return t.id}},on:{change:t.change},scopedSlots:t._u([{key:"lesson",fn:function(t,e){return n("class-name",{attrs:{record:e}})}},{key:"name",fn:function(e,n){return[t._v(t._s(n.tasks.assessment.name))]}},{key:"item_count",fn:function(e,n){return[t._v(t._s(n.tasks.assessment.item_count))]}},{key:"finished",fn:function(e,r){return n("a",{on:{click:function(e){return t.showResultListModal("finished",r.tasks)}}},[t._v("\n        "+t._s(r.tasks.assessmentStatusNum.finished||0)+"\n      ")])}},{key:"reviewing",fn:function(e,r){return n("a",{on:{click:function(e){return t.showResultListModal("reviewing",r.tasks)}}},[t._v("\n        "+t._s(r.tasks.assessmentStatusNum.reviewing||0)+"\n      ")])}},{key:"doing",fn:function(e,r){return n("a",{on:{click:function(e){return t.showResultListModal("doing",r.tasks)}}},[t._v("\n        "+t._s(r.tasks.assessmentStatusNum.doing||0)+"\n      ")])}},{key:"startTime",fn:function(e,n){return[t._v("\n        "+t._s(t.$dateFormat(n.tasks.createdTime,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(e,r){return[n("a-space",{attrs:{size:"large"}},[n("a",{staticClass:"ant-dropdown-link",attrs:{href:"/course/"+r.tasks.courseId+"/manage/exam/activity/"+r.tasks.activityId+"/analysis",target:"_blank"}},[t._v("\n            答题分布\n          ")]),t._v(" "),n("a-button",{attrs:{type:"link","data-target":"#modal","data-toggle":"modal","data-url":"/course/"+r.tasks.courseId+"/activity/"+r.tasks.activityId+"/testpaper/graph"}},[t._v("\n            成绩分布\n          ")])],1)]}}])})],1),t._v(" "),n("a-modal",{attrs:{visible:t.modalVisible,footer:null,title:t.currentTask.assessment?t.currentTask.assessment.name:"",width:920},on:{cancel:function(e){t.modalVisible=!1}}},[n("a-tabs",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[n("a-tab-pane",{key:0,attrs:{tab:"全部"}}),t._v(" "),n("a-tab-pane",{key:1,attrs:{tab:"未批阅"}}),t._v(" "),n("a-tab-pane",{key:2,attrs:{tab:"进行中"}}),t._v(" "),n("a-tab-pane",{key:3,attrs:{tab:"已批阅"}})],1),t._v(" "),t.examResults?n("a-table",{attrs:{columns:t.resultColumns,"data-source":t.examResults.data,pagination:t.examPaging[t.status[t.currentTab]],rowKey:function(t){return t.id}},on:{change:t.handleExamTableChange},scopedSlots:t._u([{key:"nickname",fn:function(e,n){return[t._v(t._s(n.userInfo.nickname))]}},{key:"grade",fn:function(e,n){return[t._v(t._s("reviewing"===n.status?"--":t.gradeMap[n.answerReportInfo.grade]))]}},{key:"teacherInfo",fn:function(e,n){return[t._v(t._s(n.teacherInfo.nickname||"--"))]}},{key:"status",fn:function(e){return["reviewing"==e?n("span",{staticStyle:{color:"#fb8d4d"}},[t._v(t._s(t.statusMap[e]))]):"doing"==e?n("span",{staticStyle:{color:"#43bc60"}},[t._v(t._s(t.statusMap[e]))]):"finished"==e?n("span",{staticStyle:{color:"#999"}},[t._v(t._s(t.statusMap[e]))]):t._e()]}},{key:"end_time",fn:function(e){return[t._v("\n        "+t._s(t.$dateFormat(e,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(e,r){return["reviewing"===r.status?n("a",{staticClass:"ant-dropdown-link",attrs:{href:"testpaper"===t.currentTask.type?"/course/"+t.currentTask.courseId+"/manage/testpaper/"+r.id+"/check?action=check":"/course/"+t.currentTask.courseId+"/manage/homework/"+r.id+"/check?action=check",target:"_blank"}},[t._v("去批阅")]):"finished"===r.status?n("a",{staticClass:"ant-dropdown-link",attrs:{href:"/homework/result/"+r.id+"/show?action=check",target:"_blank"}},[t._v("查看结果")]):t._e()]}}],null,!1,3142312363)}):t._e()],1)],1)}),[],!1,null,null,null);e.default=K.exports},1774:function(t,e,n){},1804:function(t,e,n){"use strict";var r={name:"ClassName",props:{record:{type:Object,required:!0,default:function(){return{}}}},computed:{className:function(){var t=this.record,e=t.chapterTitle,n=t.unitTitle,r=t.title,a=t.tasks,o=t.tasks.number,i="";if("lesson"===a.mode)i="".concat(o,". ").concat(r);else{var s=o.split("-");i="".concat(o,".").concat(s[1]-1," [任务]").concat(a.title)}return n&&(i="".concat(n," ").concat(i)),e&&(i=n?"".concat(e," - ").concat(i):"".concat(e," ").concat(i)),i}}},a=n(39),o=Object(a.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-overflow"},[n("span",{attrs:{title:t.className}},[t._v(t._s(t.className))]),t._v(" "),n("br"),t._v(" "),"published"!=t.record.tasks.status?n("a-tag",{staticStyle:{"margin-top":"4px"}},[t._v("未发布")]):t._e()],1)}),[],!1,null,null,null);e.a=o.exports},1958:function(t,e,n){"use strict";var r=n(1774);n.n(r).a},27:function(t,e,n){t.exports=n(557)},34:function(t,e,n){t.exports=n(686)},387:function(t,e,n){t.exports=n(684)},4:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},49:function(t,e,n){var r=n(21);t.exports=function(t,e,n){return e in t?r(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},5:function(t,e,n){var r=n(21);function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),r(t,a.key,a)}}t.exports=function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}},684:function(t,e,n){n(685),t.exports=n(55).Reflect.deleteProperty},685:function(t,e,n){var r=n(71),a=n(279).f,o=n(133);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=a(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},686:function(t,e,n){n(687),t.exports=n(55).Object.keys},687:function(t,e,n){var r=n(216),a=n(204);n(174)("keys",(function(){return function(t){return a(r(t))}}))},688:function(t,e,n){n(689);var r=n(55).Object;t.exports=function(t,e){return r.defineProperties(t,e)}},689:function(t,e,n){var r=n(71);r(r.S+r.F*!n(126),"Object",{defineProperties:n(553)})},690:function(t,e,n){n(691),t.exports=n(55).Object.getOwnPropertyDescriptors},691:function(t,e,n){var r=n(71),a=n(692),o=n(159),i=n(279),s=n(554);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),c=i.f,u=a(r),l={},f=0;u.length>f;)void 0!==(n=c(r,e=u[f++]))&&s(l,e,n);return l}})},692:function(t,e,n){var r=n(432),a=n(388),o=n(133),i=n(114).Reflect;t.exports=i&&i.ownKeys||function(t){var e=r.f(o(t)),n=a.f;return n?e.concat(n(t)):e}},693:function(t,e,n){n(694);var r=n(55).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},694:function(t,e,n){var r=n(159),a=n(279).f;n(174)("getOwnPropertyDescriptor",(function(){return function(t,e){return a(r(t),e)}}))},695:function(t,e,n){n(389),t.exports=n(55).Object.getOwnPropertySymbols},72:function(t,e,n){t.exports=n(693)},80:function(t,e,n){t.exports=n(695)},84:function(t,e,n){t.exports=n(690)}}]);