/*! For license information please see MultiClassInspection.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[455],{1649:function(t,e,n){},1650:function(t,e,n){"use strict";var i={name:"AsideLayout",props:{breadcrumbs:{type:Array,required:!0},headerTitle:{type:String,default:""},headerTip:{type:String,default:""},titleTip:{type:String,default:""}}},r=(n(1651),n(21)),a=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"aside-layout"},[n("div",{staticClass:"aside-layout-header"},[n("a-breadcrumb",{staticClass:"pull-left aside-layout-header__breadcrumb",attrs:{separator:"/"}},t._l(t.breadcrumbs,(function(e,i){return n("a-breadcrumb-item",{key:i},[e.href?[n("a",{attrs:{href:e.href,target:"_blank"}},[t._v(t._s(e.name))])]:e.pathName?[n("a",{attrs:{href:"javascript:;"},on:{click:function(n){return t.$router.push({name:e.pathName})}}},[t._v(t._s(e.name))])]:[t._v("\n          "+t._s(e.name)+"\n        ")]],2)})),1),t._v(" "),t.headerTip?n("a-popover",{attrs:{placement:"bottomLeft"}},[n("template",{slot:"content"},[n("div",{staticClass:"aside-header-tip",domProps:{innerHTML:t._s(t.headerTip)}})]),t._v(" "),n("span",{staticClass:"aside-header-title-icon"},[n("a-icon",{attrs:{theme:"filled",type:"question-circle"}}),n("span",{staticClass:"icon-circle"},[t._v(t._s(t.headerTitle))])],1)],2):t._e(),t._v(" "),t.titleTip?n("span",{staticClass:"aside-header-title-icon"},[t._v(t._s(t.titleTip))]):t._e()],1),t._v(" "),n("div",{staticClass:"aside-layout-main"},[t._t("default")],2)])}),[],!1,null,null,null);e.a=a.exports},1651:function(t,e,n){"use strict";var i=n(1649);n.n(i).a},1654:function(t,e,n){},1665:function(t,e,n){"use strict";var i={name:"Empty",props:{description:{type:String,default:"暂无数据"},image:{type:String,default:"/static-dist/app/img/vue/empty.png"},imageStyle:{type:Object,default:function(){return{height:"200px"}}}}},r=(n(1666),n(21)),a=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-empty",{staticClass:"custom-empty",attrs:{image:t.image,"image-style":t.imageStyle}},[n("span",{staticClass:"custom-empty__description",attrs:{slot:"description"},slot:"description"},[t._v(t._s(t.description))])])}),[],!1,null,null,null);e.a=a.exports},1666:function(t,e,n){"use strict";var i=n(1654);n.n(i).a},1769:function(t,e,n){},1949:function(t,e,n){"use strict";var i=n(1769);n.n(i).a},30:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(16),r=n.n(i),a=(n(24),n(69)),o=n.n(a),s=n(51),c=n(317),l=o.a.create({timeout:15e3}),u=document.getElementsByTagName("meta")["csrf-token"];u&&localStorage.setItem("csrf-token",u.content),l.interceptors.request.use((function(t){return t.headers["X-Requested-With"]="XMLHttpRequest",t.headers["X-CSRF-Token"]=localStorage.getItem("csrf-token"),t.headers.Accept="application/vnd.edusoho.v2+json",t}),(function(t){return r.a.reject(t)}));var p=[401];l.interceptors.response.use((function(t){return t.data}),(function(t){if(!p.includes(t.response.status)){try{[4042701].includes(t.response.data.error.code)||s.a.prototype.$message.error(t.response.data.error.message)}catch(t){}return r.a.reject(t)}Object(c.a)()}))},317:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=$("#login-modal");function r(){0==$("meta[name=wechat_login_bind]").attr("content")?($(".modal").modal("hide"),i.modal("show"),$.get(i.data("url"),(function(t){i.html(t)}))):window.location.href="/login"}},527:function(t,e,n){"use strict";var i=n(30);e.a={search:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.query,t.params),n=void 0===e?{}:e;t.data;return i.a.get("/api/multi_class_inspection",{params:n})},getLiveInfoById:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.query,n=void 0===e?{}:e,r=t.params,a=void 0===r?{}:r;t.data;return i.a.get("/api/multi_class_inspection_live_info/".concat(n.id),{params:a})}}},718:function(t,e,n){"use strict";n.r(e);var i=n(16),r=n.n(i),a=n(28),o=n.n(a),s=n(19),c=n.n(s),l=n(37),u=n.n(l),p=n(14),f=n.n(p),h=n(25),d=n.n(h),v=n(22),m=n.n(v),_=n(23),g=n.n(_),y=n(1650),w=n(1665),b=n(72),L=n.n(b),x={name:"InspectionCard",components:{},props:{inspection:{type:Object,require:!0,default:function(){return{}}}},data:function(){return{ellipsis:!1}},computed:{realTimeStudent:function(){return this.inspection.liveInfo.viewerOnlineNum?this.inspection.liveInfo.viewerOnlineNum:0}},mounted:function(){var t=this.$refs.assistant;this.ellipsis=t.scrollWidth>t.clientWidth},methods:{isAttend:function(t,e){var n={teacher:this.inspection.liveInfo.speakers,assistant:this.inspection.liveInfo.assistants};return L.a.find(n[t],["userId",Number(e)])}}},C=(n(1949),n(21)),k=Object(C.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inspection-card"},[n("div",{staticClass:"inspection-card__info",class:{noborder:0==t.inspection.liveInfo.length}},[n("div",{staticClass:"inspection-card__title info text-overflow"},[t._v("班课名称："+t._s(t.inspection.multiClass.title))]),t._v(" "),n("div",{staticClass:"inspection-card__item info text-overflow"},[t._v("课时名称："+t._s(t.inspection.title))]),t._v(" "),n("div",{staticClass:"inspection-card__item info"},[t._v("开课时间："+t._s(t.$dateFormat(t.inspection.startTime,"YYYY-MM-DD HH:mm")))]),t._v(" "),n("div",{staticClass:"inspection-card__item info"},[t._v("课程时长："+t._s(t.inspection.length)+"分钟")]),t._v(" "),n("div",{staticClass:"inspection-card__item info"},[t._v("实时学员人数："+t._s(t.realTimeStudent)+"/"+t._s(t.inspection.studentNum))]),t._v(" "),n("div",{staticClass:"inspection-card__item info"},[t._v("授课教师：\n      "),n("span",{staticClass:"teacher"},[t._v("\n        "+t._s(t.inspection.teacherInfo.nickname)+"\n        "),0!==t.inspection.liveInfo.length?[t.isAttend("teacher",t.inspection.teacherInfo.id)?n("svg-icon",{staticClass:"icon-check-circle",attrs:{icon:"icon-check-circle"}}):n("svg-icon",{staticClass:"icon-a-closecircle",attrs:{icon:"icon-a-closecircle"}})]:t._e()],2)]),t._v(" "),n("div",{ref:"assistant",staticClass:"inspection-card__item info text-overflow"},[t._v("助教出席：\n      "),t._l(t.inspection.assistantInfo,(function(e){return n("span",{key:e.id,staticClass:"teacher"},[t._v("\n        "+t._s(e.nickname)+"\n        "),0!==t.inspection.liveInfo.length?[t.isAttend("assistant",e.id)?n("svg-icon",{staticClass:"icon-check-circle",attrs:{icon:"icon-check-circle"}}):n("svg-icon",{staticClass:"icon-a-closecircle",attrs:{icon:"icon-a-closecircle"}})]:t._e()],2)}))],2),t._v(" "),t.ellipsis?n("a-popover",{staticClass:"inspection-card__popover"},[n("template",{slot:"content"},t._l(t.inspection.assistantInfo,(function(e){return n("span",{key:e.id,staticClass:"teacher"},[t._v("\n          "+t._s(e.nickname)+"\n          "),0!==t.inspection.liveInfo.length?[t.isAttend("assistant",e.id)?n("svg-icon",{staticStyle:{width:"14px",height:"14px",color:"#46c37b"},attrs:{icon:"icon-check-circle"}}):n("svg-icon",{staticStyle:{width:"14px",height:"14px",color:"#ff6464"},attrs:{icon:"icon-a-closecircle"}})]:t._e()],2)})),0),t._v(" "),n("div",{staticClass:"empty-block"})],2):t._e()],1),t._v(" "),n("div",{staticClass:"inspection-card__button"},["notOnTime"===t.inspection.liveInfo.status?n("div",{staticClass:"inspection-card__button not-live-start"},[t._v("\n      直播未按时开始\n    ")]):t._e(),t._v(" "),"living"===t.inspection.liveInfo.status?n("div",{staticClass:"inspection-card__button"},[n("a",{staticClass:"live-start url-block",attrs:{href:t.inspection.liveInfo.viewUrl}},[n("svg-icon",{staticClass:"icon-live",attrs:{icon:"icon-live"}}),t._v("\n        进入直播\n      ")],1)]):t._e(),t._v(" "),"finished"===t.inspection.liveInfo.status&&"ungenerated"!==t.inspection.activityInfo.ext.replayStatus?n("div",{staticClass:"inspection-card__button live-start"},[n("a",{staticClass:"live-start url-block",attrs:{href:t.inspection.liveInfo.viewUrl}},[n("svg-icon",{staticClass:"icon-live",attrs:{icon:"icon-live-playback"}}),t._v("\n        查看回放\n      ")],1)]):t._e(),t._v(" "),"finished"===t.inspection.liveInfo.status&&"ungenerated"===t.inspection.activityInfo.ext.replayStatus?n("div",{staticClass:"inspection-card__button live-start"},[n("svg-icon",{staticClass:"icon-live",attrs:{icon:"icon-live-playback"}}),t._v("\n      直播已结束，回放生成中\n    ")],1):t._e(),t._v(" "),"unstart"===t.inspection.liveInfo.status?n("div",{staticClass:"inspection-card__button no-start-live"},[n("svg-icon",{staticClass:"icon-live",staticStyle:{width:"24px",height:"24px",top:"4px"},attrs:{icon:"icon-no-start-live"}}),t._v("\n      直播未开始\n    ")],1):t._e()])])}),[],!1,null,"3f9d346e",null).exports,I=n(527);function E(){E=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,a=m.a||function(t,e,n){t[e]=n.value},s="function"==typeof d.a?d.a:{},l=s.iterator||"@@iterator",p=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function v(t,e,n){return m()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{v({},"")}catch(t){v=function(t,e,n){return t[e]=n}}function _(t,e,n,i){var r=e&&e.prototype instanceof x?e:x,o=f()(r.prototype),s=new F(i||[]);return a(o,"_invoke",{value:$(t,n,s)}),o}function g(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=_;var y="suspendedStart",w="executing",b="completed",L={};function x(){}function C(){}function k(){}var I={};v(I,l,(function(){return this}));var T=u.a,S=T&&T(T(M([])));S&&S!==n&&i.call(S,l)&&(I=S);var j=k.prototype=x.prototype=f()(I);function N(t){["next","throw","return"].forEach((function(e){v(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(r,a,o,s){var l=g(t[r],t,a);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==c()(p)&&i.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(p).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,s)}))}s(l.arg)}var r;a(this,"_invoke",{value:function(t,i){function a(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(a,a):a()}})}function $(e,n,i){var r=y;return function(a,o){if(r===w)throw Error("Generator is already running");if(r===b){if("throw"===a)throw o;return{value:t,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var c=A(s,i);if(c){if(c===L)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===y)throw r=b,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=w;var l=g(e,n,i);if("normal"===l.type){if(r=i.done?b:"suspendedYield",l.arg===L)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=b,i.method="throw",i.arg=l.arg)}}}function A(e,n){var i=n.method,r=e.iterator[i];if(r===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),L;var a=g(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,L;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,L):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,L)}function q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function G(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(c()(e)+" is not iterable")}return C.prototype=k,a(j,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:C,configurable:!0}),C.displayName=v(k,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return o.a?o()(t,k):(t.__proto__=k,v(t,h,"GeneratorFunction")),t.prototype=f()(j),t},e.awrap=function(t){return{__await:t}},N(O.prototype),v(O.prototype,p,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,i,a,o){void 0===o&&(o=r.a);var s=new O(_(t,n,i,a),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},N(j),v(j,h,"Generator"),v(j,l,(function(){return this})),v(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=M,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(G),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(n.method="next",n.arg=t),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,L):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),L},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),G(n),L}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;G(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:M(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),L}},e}var T={name:"index",components:{AsideLayout:y.a,Empty:w.a,InspectionCard:k},data:function(){return{inspectionList:[],getListLoading:!1,headerTip:"班课巡检仅展示今天所有直播课",headerTitle:"仅支持EduSoho直播"}},created:function(){this.getMultiClassInspectionList()},methods:{getMultiClassInspectionList:function(){var t=this;return g()(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.getListLoading=!0,e.prev=1,e.next=4,I.a.search();case 4:t.inspectionList=e.sent;case 5:return e.prev=5,t.getListLoading=!1,e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})))()}}},S=Object(C.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside-layout",{attrs:{breadcrumbs:[{name:"班课巡检"}],headerTip:t.headerTip,headerTitle:t.headerTitle}},[n("a-spin",{staticClass:"multi-class-inspection",attrs:{spinning:t.getListLoading}},[n("a-row",{attrs:{gutter:[24,24]}},t._l(t.inspectionList,(function(t){return n("a-col",{key:t.id,attrs:{sm:24,lg:12,xl:8,xxl:6}},[n("inspection-card",{attrs:{inspection:t}})],1)})),1),t._v(" "),t.getListLoading||t.inspectionList.length?t._e():n("empty")],1)],1)}),[],!1,null,"0674af1b",null);e.default=S.exports}}]);