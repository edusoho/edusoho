{"version":3,"sources":["node_modules/.1.2.7@core-js/modules/$.task.js"],"names":["ctx","require","invoke","html","cel","global","process","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","counter","queue","ONREADYSTATECHANGE","defer","channel","port","run","id","hasOwnProperty","fn","listner","event","call","data","args","i","arguments","length","push","Function","nextTick","port2","port1","onmessage","postMessage","addEventListener","importScripts","appendChild","removeChild","setTimeout","module","exports","set","clear"],"mappings":"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","file":"$.task.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["var ctx                = require('./$.ctx')\n  , invoke             = require('./$.invoke')\n  , html               = require('./$.html')\n  , cel                = require('./$.dom-create')\n  , global             = require('./$.global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./$.cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};"]}