{"version":3,"sources":["app/Resources/static-src/common/select2.js"],"names":["jQuery","window","$","fn","each2","extend","c","j","i","l","length","context","call","undefined","Select2","KEY","AbstractSelect2","SingleSelect2","MultiSelect2","nextUid","sizer","lastMousePosition","x","y","$document","scrollBarDimensions","TAB","ENTER","ESC","SPACE","LEFT","UP","RIGHT","DOWN","SHIFT","CTRL","ALT","PAGE_UP","PAGE_DOWN","HOME","END","BACKSPACE","DELETE","isArrow","k","which","isControl","e","metaKey","isFunctionKey","MEASURE_SCROLLBAR_TEMPLATE","document","counter","indexOf","value","array","equal","measureScrollbar","$template","appendTo","dim","width","clientWidth","height","clientHeight","remove","a","b","constructor","String","splitVal","string","separator","val","split","trim","getSideBorderPadding","element","outerWidth","installKeyUpChangeEvent","key","on","data","removeData","trigger","pageX","pageY","installFilteredMouseMove","lastpos","target","debounce","quietMillis","ctx","timeout","args","arguments","clearTimeout","setTimeout","apply","thunk","formula","evaluated","installDebouncedScroll","threshold","notify","get","focus","$el","activeElement","el","pos","range","is","setSelectionRange","createTextRange","collapse","select","getCursorInfo","offset","selectionStart","selectionEnd","sel","selection","createRange","text","moveStart","killEvent","event","preventDefault","stopPropagation","killEventImmediately","stopImmediatePropagation","measureTextWidth","style","currentStyle","getComputedStyle","createElement","css","position","left","top","display","fontSize","fontFamily","fontStyle","fontWeight","letterSpacing","textTransform","whiteSpace","attr","append","syncCssClasses","dest","src","adapter","classes","replacements","adapted","push","join","markMatch","term","markup","escapeMarkup","match","toUpperCase","tl","substring","defaultEscapeMarkup","replace_map","replace","ajax","options","requestSequence","handler","ajaxUrl","url","self","query","requestNumber","transport","select2","ajaxDefaults","deprecated","type","cache","jsonpCallback","dataType","params","page","abort","isFunction","success","results","callback","local","dataText","tmp","item","isArray","dataItem","t","filtered","process","datum","collection","group","children","hasOwnProperty","childDatum","matcher","tags","isFunc","each","isObject","id","checkFormatter","formatter","formatterName","Error","evaluate","countResults","count","defaultTokenizer","input","selectCallback","opts","original","dupe","token","index","createSearchChoice","tokenSeparators","clazz","SuperClass","methods","prototype","parent","Object","bind","func","init","search","resultsSelector","disabled","readonly","nodeSelector","prepareOpts","destroy","container","createContainer","containerId","containerSelector","body","closest","adaptContainerCssClass","containerCss","addClass","containerCssClass","elementTabIndex","before","dropdown","find","dropdownCssClass","resultsPage","initContainer","highlightUnderEvent","loadMoreIfNeeded","mousewheel","delta","deltaX","deltaY","scrollTop","scrollHeight","updateResults","removeClass","treeview","selectHighlighted","initSelection","monitorSource","maximumInputLength","prop","enable","autofocus","propertyObserver","off","tabindex","removeAttr","show","optionToData","locked","getChildrenByIndent","$node","$children","nextUntil","$nodesToNextRoot","filterVal","expandNode","isExpandAll","slideDown","$father","prevAll","first","hasClass","treeviewExpandedClass","hide","collapseNode","slideUp","idKey","tagName","toLowerCase","populateResults","populate","result","depth","selectable","compound","node","label","innerContainer","formatted","indentCount","sortResults","lastIndexOf","indentChar","RegExp","formatResultCssClass","formatResult","html","thisIndentCount","$icon","next","treeviewInitState","treeviewCollapsedClass","prepend","click","$that","$selectedNode","selectedNodeIndentCount","$rootParent","filter","defaults","more","placeholderOption","elm","getPlaceholder","getPlaceholderOption","not","sync","enabled","adaptDropdownCssClass","mutationCallback","mutations","forEach","WebKitMutationObserver","observe","attributes","subtree","triggerSelect","evt","Event","object","isDefaultPrevented","triggerChange","details","blurOnChange","blur","isInterfaceEnabled","enabledInterface","enableInterface","_enabled","_readonly","toggleClass","close","opened","positionDropdown","$dropdown","outerHeight","dropHeight","viewPortRight","scrollLeft","viewportBottom","dropTop","dropLeft","enoughRoomBelow","enoughRoomAbove","dropWidth","enoughRoomOnRight","aboveNow","bodyOffset","above","$resultsListNode","resultsList","dropdownAutoWidth","thisWidth","dropdownCss","shouldOpen","clearDropdownAlignmentPreference","open","opening","cid","scroll","resize","orient","mask","maskCss","last","detach","selectOnBlur","noFocus","prev","_makeMaskCss","that","parents","add","Math","max","documentElement","scrollWidth","empty","clearSearch","externalSearch","getMaximumSelectionSize","maximumSelectionSize","ensureHighlightVisible","child","hb","rb","highlight","findHighlightableChoices","moveHighlight","choices","choice","countSelectableResults","below","loadMorePadding","postprocessResults","formatLoadMore","tokenize","initial","lastTerm","showSearchInput","postRender","render","maxSelSize","formatSelectionTooBig","minimumInputLength","formatInputTooShort","showSearch","formatInputTooLong","formatSearching","def","unshift","formatNoMatches","items","cancel","focusSearch","highlighted","onSelect","placeholder","firstOption","initContainerWidth","resolveContainerWidth","attrs","matches","focusser","len","minimumResultsForSearch","isFocused","openOnEnter","altKey","ctrlKey","shiftKey","allowClear","clear","setPlaceholder","removed","selected","isPlaceholderOptionSelected","updateSelection","is_match","noop","noHighlightUpdate","min","old","oldData","added","cssClass","formatSelection","formatSelectionCssClass","ids","grep","ordered","splice","selectChoice","selector","searchContainer","_this","keydowns","selectedChoice","unselect","resizeSearch","clearPlaceholder","maxWidth","getMaxSearchWidth","getVal","addSelectedChoice","tokenizer","closeOnSelect","enableChoice","enabledItem","disabledItem","replaceWith","fadeOut","dequeue","insertBefore","setVal","minimumWidth","containerLeft","searchWidth","sideBorderPadding","unique","buildChangeDetails","current","slice","changeDetails","map","onSortStart","onSortEnd","values","Array","method","multiple","allowedMethods","valueMethods","methodsMap","n","limit","pageNumber","util","single","multi"],"mappings":"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","file":"select2.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["/* eslint-disable */\nvar jQuery = window.$;\n    /*\nCopyright 2012 Igor Vaynberg\n\nVersion: 3.4.1 Timestamp: Thu Jun 27 18:02:10 PDT 2013\n\nThis software is licensed under the Apache License, Version 2.0 (the \"Apache License\") or the GNU\nGeneral Public License version 2 (the \"GPL License\"). You may choose either license to govern your\nuse of this software only upon the condition that you accept all of the terms of either the Apache\nLicense or the GPL License.\n\nYou may obtain a copy of the Apache License and the GPL License at:\n\n    http://www.apache.org/licenses/LICENSE-2.0\n    http://www.gnu.org/licenses/gpl-2.0.html\n\nUnless required by applicable law or agreed to in writing, software distributed under the\nApache License or the GPL Licesnse is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\nCONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for\nthe specific language governing permissions and limitations under the Apache License and the GPL License.\n*/\n    (function($) {\n        if (typeof $.fn.each2 == \"undefined\") {\n            $.fn.extend({\n                /*\n            * 4-10 times faster .each replacement\n            * use it carefully, as it overrides jQuery context of element on each iteration\n            */\n                each2: function(c) {\n                    var j = $([ 0 ]), i = -1, l = this.length;\n                    while (++i < l && (j.context = j[0] = this[i]) && c.call(j[0], i, j) !== false) ;\n                    return this;\n                }\n            });\n        }\n    })(jQuery);\n    (function($, undefined) {\n        \"use strict\";\n        /*global document, window, jQuery, console */\n        if (window.Select2 !== undefined) {\n            return;\n        }\n        var KEY, AbstractSelect2, SingleSelect2, MultiSelect2, nextUid, sizer, lastMousePosition = {\n            x: 0,\n            y: 0\n        }, $document, scrollBarDimensions, KEY = {\n            TAB: 9,\n            ENTER: 13,\n            ESC: 27,\n            SPACE: 32,\n            LEFT: 37,\n            UP: 38,\n            RIGHT: 39,\n            DOWN: 40,\n            SHIFT: 16,\n            CTRL: 17,\n            ALT: 18,\n            PAGE_UP: 33,\n            PAGE_DOWN: 34,\n            HOME: 36,\n            END: 35,\n            BACKSPACE: 8,\n            DELETE: 46,\n            isArrow: function(k) {\n                k = k.which ? k.which : k;\n                switch (k) {\n                  case KEY.LEFT:\n                  case KEY.RIGHT:\n                  case KEY.UP:\n                  case KEY.DOWN:\n                    return true;\n                }\n                return false;\n            },\n            isControl: function(e) {\n                var k = e.which;\n                switch (k) {\n                  case KEY.SHIFT:\n                  case KEY.CTRL:\n                  case KEY.ALT:\n                    return true;\n                }\n                if (e.metaKey) return true;\n                return false;\n            },\n            isFunctionKey: function(k) {\n                k = k.which ? k.which : k;\n                return k >= 112 && k <= 123;\n            }\n        }, MEASURE_SCROLLBAR_TEMPLATE = \"<div class='select2-measure-scrollbar'></div>\";\n        $document = $(document);\n        nextUid = function() {\n            var counter = 1;\n            return function() {\n                return counter++;\n            };\n        }();\n        function indexOf(value, array) {\n            var i = 0, l = array.length;\n            for (;i < l; i = i + 1) {\n                if (equal(value, array[i])) return i;\n            }\n            return -1;\n        }\n        function measureScrollbar() {\n            var $template = $(MEASURE_SCROLLBAR_TEMPLATE);\n            $template.appendTo(\"body\");\n            var dim = {\n                width: $template.width() - $template[0].clientWidth,\n                height: $template.height() - $template[0].clientHeight\n            };\n            $template.remove();\n            return dim;\n        }\n        /**\n     * Compares equality of a and b\n     * @param a\n     * @param b\n     */\n        function equal(a, b) {\n            if (a === b) return true;\n            if (a === undefined || b === undefined) return false;\n            if (a === null || b === null) return false;\n            // Check whether 'a' or 'b' is a string (primitive or object).\n            // The concatenation of an empty string (+'') converts its argument to a string's primitive.\n            if (a.constructor === String) return a + \"\" === b + \"\";\n            // a+'' - in case 'a' is a String object\n            if (b.constructor === String) return b + \"\" === a + \"\";\n            // b+'' - in case 'b' is a String object\n            return false;\n        }\n        /**\n     * Splits the string into an array of values, trimming each value. An empty array is returned for nulls or empty\n     * strings\n     * @param string\n     * @param separator\n     */\n        function splitVal(string, separator) {\n            var val, i, l;\n            if (string === null || string.length < 1) return [];\n            val = string.split(separator);\n            for (i = 0, l = val.length; i < l; i = i + 1) val[i] = $.trim(val[i]);\n            return val;\n        }\n        function getSideBorderPadding(element) {\n            return element.outerWidth(false) - element.width();\n        }\n        function installKeyUpChangeEvent(element) {\n            var key = \"keyup-change-value\";\n            element.on(\"keydown\", function() {\n                if ($.data(element, key) === undefined) {\n                    $.data(element, key, element.val());\n                }\n            });\n            element.on(\"keyup\", function() {\n                var val = $.data(element, key);\n                if (val !== undefined && element.val() !== val) {\n                    $.removeData(element, key);\n                    element.trigger(\"keyup-change\");\n                }\n            });\n        }\n        $document.on(\"mousemove\", function(e) {\n            lastMousePosition.x = e.pageX;\n            lastMousePosition.y = e.pageY;\n        });\n        /**\n     * filters mouse events so an event is fired only if the mouse moved.\n     *\n     * filters out mouse events that occur when mouse is stationary but\n     * the elements under the pointer are scrolled.\n     */\n        function installFilteredMouseMove(element) {\n            element.on(\"mousemove\", function(e) {\n                var lastpos = lastMousePosition;\n                if (lastpos === undefined || lastpos.x !== e.pageX || lastpos.y !== e.pageY) {\n                    $(e.target).trigger(\"mousemove-filtered\", e);\n                }\n            });\n        }\n        /**\n     * Debounces a function. Returns a function that calls the original fn function only if no invocations have been made\n     * within the last quietMillis milliseconds.\n     *\n     * @param quietMillis number of milliseconds to wait before invoking fn\n     * @param fn function to be debounced\n     * @param ctx object to be used as this reference within fn\n     * @return debounced version of fn\n     */\n        function debounce(quietMillis, fn, ctx) {\n            ctx = ctx || undefined;\n            var timeout;\n            return function() {\n                var args = arguments;\n                window.clearTimeout(timeout);\n                timeout = window.setTimeout(function() {\n                    fn.apply(ctx, args);\n                }, quietMillis);\n            };\n        }\n        /**\n     * A simple implementation of a thunk\n     * @param formula function used to lazily initialize the thunk\n     * @return {Function}\n     */\n        function thunk(formula) {\n            var evaluated = false, value;\n            return function() {\n                if (evaluated === false) {\n                    value = formula();\n                    evaluated = true;\n                }\n                return value;\n            };\n        }\n        function installDebouncedScroll(threshold, element) {\n            var notify = debounce(threshold, function(e) {\n                element.trigger(\"scroll-debounced\", e);\n            });\n            element.on(\"scroll\", function(e) {\n                if (indexOf(e.target, element.get()) >= 0) notify(e);\n            });\n        }\n        function focus($el) {\n            if ($el[0] === document.activeElement) return;\n            /* set the focus in a 0 timeout - that way the focus is set after the processing\n            of the current event has finished - which seems like the only reliable way\n            to set focus */\n            window.setTimeout(function() {\n                var el = $el[0], pos = $el.val().length, range;\n                $el.focus();\n                /* make sure el received focus so we do not error out when trying to manipulate the caret.\n                sometimes modals or others listeners may steal it after its set */\n                if ($el.is(\":visible\") && el === document.activeElement) {\n                    /* after the focus is set move the caret to the end, necessary when we val()\n                    just before setting focus */\n                    if (el.setSelectionRange) {\n                        el.setSelectionRange(pos, pos);\n                    } else if (el.createTextRange) {\n                        range = el.createTextRange();\n                        range.collapse(false);\n                        range.select();\n                    }\n                }\n            }, 0);\n        }\n        function getCursorInfo(el) {\n            el = $(el)[0];\n            var offset = 0;\n            var length = 0;\n            if (\"selectionStart\" in el) {\n                offset = el.selectionStart;\n                length = el.selectionEnd - offset;\n            } else if (\"selection\" in document) {\n                el.focus();\n                var sel = document.selection.createRange();\n                length = document.selection.createRange().text.length;\n                sel.moveStart(\"character\", -el.value.length);\n                offset = sel.text.length - length;\n            }\n            return {\n                offset: offset,\n                length: length\n            };\n        }\n        function killEvent(event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        function killEventImmediately(event) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n        }\n        function measureTextWidth(e) {\n            if (!sizer) {\n                var style = e[0].currentStyle || window.getComputedStyle(e[0], null);\n                sizer = $(document.createElement(\"div\")).css({\n                    position: \"absolute\",\n                    left: \"-10000px\",\n                    top: \"-10000px\",\n                    display: \"none\",\n                    fontSize: style.fontSize,\n                    fontFamily: style.fontFamily,\n                    fontStyle: style.fontStyle,\n                    fontWeight: style.fontWeight,\n                    letterSpacing: style.letterSpacing,\n                    textTransform: style.textTransform,\n                    whiteSpace: \"nowrap\"\n                });\n                sizer.attr(\"class\", \"select2-sizer\");\n                $(\"body\").append(sizer);\n            }\n            sizer.text(e.val());\n            return sizer.width();\n        }\n        function syncCssClasses(dest, src, adapter) {\n            var classes, replacements = [], adapted;\n            classes = dest.attr(\"class\");\n            if (classes) {\n                classes = \"\" + classes;\n                // for IE which returns object\n                $(classes.split(\" \")).each2(function() {\n                    if (this.indexOf(\"select2-\") === 0) {\n                        replacements.push(this);\n                    }\n                });\n            }\n            classes = src.attr(\"class\");\n            if (classes) {\n                classes = \"\" + classes;\n                // for IE which returns object\n                $(classes.split(\" \")).each2(function() {\n                    if (this.indexOf(\"select2-\") !== 0) {\n                        adapted = adapter(this);\n                        if (adapted) {\n                            replacements.push(this);\n                        }\n                    }\n                });\n            }\n            dest.attr(\"class\", replacements.join(\" \"));\n        }\n        function markMatch(text, term, markup, escapeMarkup) {\n            markup.push(\"<div class='select2-result-text'>\");\n            var match = text.toUpperCase().indexOf(term.toUpperCase()), tl = term.length;\n            if (match < 0) {\n                markup.push(escapeMarkup(text));\n                return;\n            }\n            markup.push(escapeMarkup(text.substring(0, match)));\n            markup.push(\"<span class='select2-match'>\");\n            markup.push(escapeMarkup(text.substring(match, match + tl)));\n            markup.push(\"</span>\");\n            markup.push(escapeMarkup(text.substring(match + tl, text.length)));\n            markup.push(\"</div>\");\n        }\n        function defaultEscapeMarkup(markup) {\n            var replace_map = {\n                \"\\\\\": \"&#92;\",\n                \"&\": \"&amp;\",\n                \"<\": \"&lt;\",\n                \">\": \"&gt;\",\n                '\"': \"&quot;\",\n                \"'\": \"&#39;\",\n                \"/\": \"&#47;\"\n            };\n            return String(markup).replace(/[&<>\"'\\/\\\\]/g, function(match) {\n                return replace_map[match];\n            });\n        }\n        /**\n     * Produces an ajax-based query function\n     *\n     * @param options object containing configuration paramters\n     * @param options.params parameter map for the transport ajax call, can contain such options as cache, jsonpCallback, etc. see $.ajax\n     * @param options.transport function that will be used to execute the ajax request. must be compatible with parameters supported by $.ajax\n     * @param options.url url for the data\n     * @param options.data a function(searchTerm, pageNumber, context) that should return an object containing query string parameters for the above url.\n     * @param options.dataType request data type: ajax, jsonp, other datatatypes supported by jQuery's $.ajax function or the transport function if specified\n     * @param options.quietMillis (optional) milliseconds to wait before making the ajaxRequest, helps debounce the ajax function if invoked too often\n     * @param options.results a function(remoteData, pageNumber) that converts data returned form the remote request to the format expected by Select2.\n     *      The expected format is an object containing the following keys:\n     *      results array of objects that will be used as choices\n     *      more (optional) boolean indicating whether there are more results available\n     *      Example: {results:[{id:1, text:'Red'},{id:2, text:'Blue'}], more:true}\n     */\n        function ajax(options) {\n            var timeout, // current scheduled but not yet executed request\n            requestSequence = 0, // sequence used to drop out-of-order responses\n            handler = null, quietMillis = options.quietMillis || 100, ajaxUrl = options.url, self = this;\n            return function(query) {\n                window.clearTimeout(timeout);\n                timeout = window.setTimeout(function() {\n                    requestSequence += 1;\n                    // increment the sequence\n                    var requestNumber = requestSequence, // this request's sequence number\n                    data = options.data, // ajax data function\n                    url = ajaxUrl, // ajax url string or function\n                    transport = options.transport || $.fn.select2.ajaxDefaults.transport, // deprecated - to be removed in 4.0  - use params instead\n                    deprecated = {\n                        type: options.type || \"GET\",\n                        // set type of request (GET or POST)\n                        cache: options.cache || false,\n                        jsonpCallback: options.jsonpCallback || undefined,\n                        dataType: options.dataType || \"json\"\n                    }, params = $.extend({}, $.fn.select2.ajaxDefaults.params, deprecated);\n                    data = data ? data.call(self, query.term, query.page, query.context) : null;\n                    url = typeof url === \"function\" ? url.call(self, query.term, query.page, query.context) : url;\n                    if (handler) {\n                        handler.abort();\n                    }\n                    if (options.params) {\n                        if ($.isFunction(options.params)) {\n                            $.extend(params, options.params.call(self));\n                        } else {\n                            $.extend(params, options.params);\n                        }\n                    }\n                    $.extend(params, {\n                        url: url,\n                        dataType: options.dataType,\n                        data: data,\n                        success: function(data) {\n                            if (requestNumber < requestSequence) {\n                                return;\n                            }\n                            // TODO - replace query.page with query so users have access to term, page, etc.\n                            var results = options.results(data, query.page);\n                            query.callback(results);\n                        }\n                    });\n                    handler = transport.call(self, params);\n                }, quietMillis);\n            };\n        }\n        /**\n     * Produces a query function that works with a local array\n     *\n     * @param options object containing configuration parameters. The options parameter can either be an array or an\n     * object.\n     *\n     * If the array form is used it is assumed that it contains objects with 'id' and 'text' keys.\n     *\n     * If the object form is used ti is assumed that it contains 'data' and 'text' keys. The 'data' key should contain\n     * an array of objects that will be used as choices. These objects must contain at least an 'id' key. The 'text'\n     * key can either be a String in which case it is expected that each element in the 'data' array has a key with the\n     * value of 'text' which will be used to match choices. Alternatively, text can be a function(item) that can extract\n     * the text.\n     */\n        function local(options) {\n            var data = options, // data elements\n            dataText, tmp, text = function(item) {\n                return \"\" + item.text;\n            };\n            // function used to retrieve the text portion of a data item that is matched against the search\n            if ($.isArray(data)) {\n                tmp = data;\n                data = {\n                    results: tmp\n                };\n            }\n            if ($.isFunction(data) === false) {\n                tmp = data;\n                data = function() {\n                    return tmp;\n                };\n            }\n            var dataItem = data();\n            if (dataItem.text) {\n                text = dataItem.text;\n                // if text is not a function we assume it to be a key name\n                if (!$.isFunction(text)) {\n                    dataText = dataItem.text;\n                    // we need to store this in a separate variable because in the next step data gets reset and data.text is no longer available\n                    text = function(item) {\n                        return item[dataText];\n                    };\n                }\n            }\n            return function(query) {\n                var t = query.term, filtered = {\n                    results: []\n                }, process;\n                if (t === \"\") {\n                    query.callback(data());\n                    return;\n                }\n                process = function(datum, collection) {\n                    var group, attr;\n                    datum = datum[0];\n                    if (datum.children) {\n                        group = {};\n                        for (attr in datum) {\n                            if (datum.hasOwnProperty(attr)) group[attr] = datum[attr];\n                        }\n                        group.children = [];\n                        $(datum.children).each2(function(i, childDatum) {\n                            process(childDatum, group.children);\n                        });\n                        if (group.children.length || query.matcher(t, text(group), datum)) {\n                            collection.push(group);\n                        }\n                    } else {\n                        if (query.matcher(t, text(datum), datum)) {\n                            collection.push(datum);\n                        }\n                    }\n                };\n                $(data().results).each2(function(i, datum) {\n                    process(datum, filtered.results);\n                });\n                query.callback(filtered);\n            };\n        }\n        // TODO javadoc\n        function tags(data) {\n            var isFunc = $.isFunction(data);\n            return function(query) {\n                var t = query.term, filtered = {\n                    results: []\n                };\n                $(isFunc ? data() : data).each(function() {\n                    var isObject = this.text !== undefined, text = isObject ? this.text : this;\n                    if (t === \"\" || query.matcher(t, text)) {\n                        filtered.results.push(isObject ? this : {\n                            id: this,\n                            text: this\n                        });\n                    }\n                });\n                query.callback(filtered);\n            };\n        }\n        /**\n     * Checks if the formatter function should be used.\n     *\n     * Throws an error if it is not a function. Returns true if it should be used,\n     * false if no formatting should be performed.\n     *\n     * @param formatter\n     */\n        function checkFormatter(formatter, formatterName) {\n            if ($.isFunction(formatter)) return true;\n            if (!formatter) return false;\n            throw new Error(formatterName + \" must be a function or a falsy value\");\n        }\n        function evaluate(val) {\n            return $.isFunction(val) ? val() : val;\n        }\n        function countResults(results) {\n            var count = 0;\n            $.each(results, function(i, item) {\n                if (item.children) {\n                    count += countResults(item.children);\n                } else {\n                    count++;\n                }\n            });\n            return count;\n        }\n        /**\n     * Default tokenizer. This function uses breaks the input on substring match of any string from the\n     * opts.tokenSeparators array and uses opts.createSearchChoice to create the choice object. Both of those\n     * two options have to be defined in order for the tokenizer to work.\n     *\n     * @param input text user has typed so far or pasted into the search field\n     * @param selection currently selected choices\n     * @param selectCallback function(choice) callback tho add the choice to selection\n     * @param opts select2's opts\n     * @return undefined/null to leave the current input unchanged, or a string to change the input to the returned value\n     */\n        function defaultTokenizer(input, selection, selectCallback, opts) {\n            var original = input, // store the original so we can compare and know if we need to tell the search to update its text\n            dupe = false, // check for whether a token we extracted represents a duplicate selected choice\n            token, // token\n            index, // position at which the separator was found\n            i, l, // looping variables\n            separator;\n            // the matched separator\n            if (!opts.createSearchChoice || !opts.tokenSeparators || opts.tokenSeparators.length < 1) return undefined;\n            while (true) {\n                index = -1;\n                for (i = 0, l = opts.tokenSeparators.length; i < l; i++) {\n                    separator = opts.tokenSeparators[i];\n                    index = input.indexOf(separator);\n                    if (index >= 0) break;\n                }\n                if (index < 0) break;\n                // did not find any token separator in the input string, bail\n                token = input.substring(0, index);\n                input = input.substring(index + separator.length);\n                if (token.length > 0) {\n                    token = opts.createSearchChoice.call(this, token, selection);\n                    if (token !== undefined && token !== null && opts.id(token) !== undefined && opts.id(token) !== null) {\n                        dupe = false;\n                        for (i = 0, l = selection.length; i < l; i++) {\n                            if (equal(opts.id(token), opts.id(selection[i]))) {\n                                dupe = true;\n                                break;\n                            }\n                        }\n                        if (!dupe) selectCallback(token);\n                    }\n                }\n            }\n            if (original !== input) return input;\n        }\n        /**\n     * Creates a new class\n     *\n     * @param superClass\n     * @param methods\n     */\n        function clazz(SuperClass, methods) {\n            var constructor = function() {};\n            constructor.prototype = new SuperClass();\n            constructor.prototype.constructor = constructor;\n            constructor.prototype.parent = SuperClass.prototype;\n            constructor.prototype = $.extend(constructor.prototype, methods);\n            return constructor;\n        }\n        AbstractSelect2 = clazz(Object, {\n            // abstract\n            bind: function(func) {\n                var self = this;\n                return function() {\n                    func.apply(self, arguments);\n                };\n            },\n            // abstract\n            init: function(opts) {\n                var results, search, resultsSelector = \".select2-results\", disabled, readonly, nodeSelector = \".select2-result\";\n                // prepare options\n                this.opts = opts = this.prepareOpts(opts);\n                this.id = opts.id;\n                // destroy if called on an existing component\n                if (opts.element.data(\"select2\") !== undefined && opts.element.data(\"select2\") !== null) {\n                    opts.element.data(\"select2\").destroy();\n                }\n                this.container = this.createContainer();\n                this.containerId = \"s2id_\" + (opts.element.attr(\"id\") || \"autogen\" + nextUid());\n                this.containerSelector = \"#\" + this.containerId.replace(/([;&,\\.\\+\\*\\~':\"\\!\\^#$%@\\[\\]\\(\\)=>\\|])/g, \"\\\\$1\");\n                this.container.attr(\"id\", this.containerId);\n                // cache the body so future lookups are cheap\n                this.body = thunk(function() {\n                    return opts.element.closest(\"body\");\n                });\n                syncCssClasses(this.container, this.opts.element, this.opts.adaptContainerCssClass);\n                this.container.css(evaluate(opts.containerCss));\n                this.container.addClass(evaluate(opts.containerCssClass));\n                this.elementTabIndex = this.opts.element.attr(\"tabindex\");\n                // swap container for the element\n                this.opts.element.data(\"select2\", this).attr(\"tabindex\", \"-1\").before(this.container);\n                this.container.data(\"select2\", this);\n                this.dropdown = this.container.find(\".select2-drop\");\n                this.dropdown.addClass(evaluate(opts.dropdownCssClass));\n                this.dropdown.data(\"select2\", this);\n                this.results = results = this.container.find(resultsSelector);\n                this.search = search = this.container.find(\"input.select2-input\");\n                this.resultsPage = 0;\n                this.context = null;\n                // initialize the container\n                this.initContainer();\n                installFilteredMouseMove(this.results);\n                this.dropdown.on(\"mousemove-filtered touchstart touchmove touchend\", resultsSelector, this.bind(this.highlightUnderEvent));\n                installDebouncedScroll(80, this.results);\n                this.dropdown.on(\"scroll-debounced\", resultsSelector, this.bind(this.loadMoreIfNeeded));\n                // do not propagate change event from the search field out of the component\n                $(this.container).on(\"change\", \".select2-input\", function(e) {\n                    e.stopPropagation();\n                });\n                $(this.dropdown).on(\"change\", \".select2-input\", function(e) {\n                    e.stopPropagation();\n                });\n                // if jquery.mousewheel plugin is installed we can prevent out-of-bounds scrolling of results via mousewheel\n                if ($.fn.mousewheel) {\n                    results.mousewheel(function(e, delta, deltaX, deltaY) {\n                        var top = results.scrollTop(), height;\n                        if (deltaY > 0 && top - deltaY <= 0) {\n                            results.scrollTop(0);\n                            killEvent(e);\n                        } else if (deltaY < 0 && results.get(0).scrollHeight - results.scrollTop() + deltaY <= results.height()) {\n                            results.scrollTop(results.get(0).scrollHeight - results.height());\n                            killEvent(e);\n                        }\n                    });\n                }\n                installKeyUpChangeEvent(search);\n                search.on(\"keyup-change input paste\", this.bind(this.updateResults));\n                search.on(\"focus\", function() {\n                    search.addClass(\"select2-focused\");\n                });\n                search.on(\"blur\", function() {\n                    search.removeClass(\"select2-focused\");\n                });\n                if (this.opts.treeview) {\n                    nodeSelector = \".select2-result-text\";\n                }\n                this.dropdown.on(\"mouseup\", nodeSelector, this.bind(function(e) {\n                    if ($(e.target).closest(\".select2-result-selectable\").length > 0) {\n                        this.highlightUnderEvent(e);\n                        this.selectHighlighted(e);\n                    }\n                }));\n                // trap all mouse events from leaving the dropdown. sometimes there may be a modal that is listening\n                // for mouse events outside of itself so it can close itself. since the dropdown is now outside the select2's\n                // dom it will trigger the popup close, which is not what we want\n                this.dropdown.on(\"click mouseup mousedown\", function(e) {\n                    e.stopPropagation();\n                });\n                if ($.isFunction(this.opts.initSelection)) {\n                    // initialize selection based on the current value of the source element\n                    this.initSelection();\n                    // if the user has provided a function that can set selection based on the value of the source element\n                    // we monitor the change event on the element and trigger it, allowing for two way synchronization\n                    this.monitorSource();\n                }\n                if (opts.maximumInputLength !== null) {\n                    this.search.attr(\"maxlength\", opts.maximumInputLength);\n                }\n                var disabled = opts.element.prop(\"disabled\");\n                if (disabled === undefined) disabled = false;\n                this.enable(!disabled);\n                var readonly = opts.element.prop(\"readonly\");\n                if (readonly === undefined) readonly = false;\n                this.readonly(readonly);\n                // Calculate size of scrollbar\n                scrollBarDimensions = scrollBarDimensions || measureScrollbar();\n                this.autofocus = opts.element.prop(\"autofocus\");\n                opts.element.prop(\"autofocus\", false);\n                if (this.autofocus) this.focus();\n            },\n            // abstract\n            destroy: function() {\n                var element = this.opts.element, select2 = element.data(\"select2\");\n                if (this.propertyObserver) {\n                    delete this.propertyObserver;\n                    this.propertyObserver = null;\n                }\n                if (select2 !== undefined) {\n                    select2.container.remove();\n                    select2.dropdown.remove();\n                    element.removeClass(\"select2-offscreen\").removeData(\"select2\").off(\".select2\").prop(\"autofocus\", this.autofocus || false);\n                    if (this.elementTabIndex) {\n                        element.attr({\n                            tabindex: this.elementTabIndex\n                        });\n                    } else {\n                        element.removeAttr(\"tabindex\");\n                    }\n                    element.show();\n                }\n            },\n            // abstract\n            optionToData: function(element) {\n                if (element.is(\"option\")) {\n                    return {\n                        id: element.prop(\"value\"),\n                        text: element.text(),\n                        element: element.get(),\n                        css: element.attr(\"class\"),\n                        disabled: element.prop(\"disabled\"),\n                        locked: equal(element.attr(\"locked\"), \"locked\") || equal(element.data(\"locked\"), true)\n                    };\n                } else if (element.is(\"optgroup\")) {\n                    return {\n                        text: element.attr(\"label\"),\n                        children: [],\n                        element: element.get(),\n                        css: element.attr(\"class\")\n                    };\n                }\n            },\n            // abstract\n            getChildrenByIndent: function($node) {\n                var $children = $node.nextUntil('[data-indent-count=\"' + $node.data('indent-count') + '\"]');\n                var $nodesToNextRoot = $node.nextUntil('[data-indent-count=\"0\"]');\n                /**\n                 * fix status blow\n                 * 0\n                 *  1\n                 *   2\n                 *    3\n                 *  1\n                 * when get level 2's children, last level 1 node was included\n                 */\n                if ($children.length > $nodesToNextRoot.length) {\n                    return $nodesToNextRoot;\n                }\n                return $children;\n            },\n            // abstract\n            filterVal: function(val) {\n                return val.replace(/[\\.]/g, '-').replace(/-$/g, '');\n            },\n            // abstract\n            expandNode: function($node, isExpandAll) {\n                var self = this;\n                var $children = self.getChildrenByIndent($node);\n                $children.slideDown();\n                $children.each2(function() {\n                    var $father = $(this).prevAll('[data-indent-count=\"' + ($(this).data('indent-count') - 1) + '\"]').first();\n                    if ($father.hasClass('collapsed')) {\n                        if (isExpandAll) {\n                            $father.removeClass('collapsed').addClass('expanded');\n                            $father.find('.select2-tree-icon').addClass(self.opts.treeviewExpandedClass);\n                        } else {\n                            $(this).hide();\n                        }\n                    }\n                });\n            },\n            // abstract\n            collapseNode: function($node) {\n                var $children = this.getChildrenByIndent($node);\n                $children.slideUp();\n            },\n            // abstract\n            prepareOpts: function(opts) {\n                var element, select, idKey, ajaxUrl, self = this;\n                element = opts.element;\n                if (element.get(0).tagName.toLowerCase() === \"select\") {\n                    this.select = select = opts.element;\n                }\n                if (select) {\n                    // these options are not allowed when attached to a select because they are picked up off the element itself\n                    $.each([ \"id\", \"multiple\", \"ajax\", \"query\", \"createSearchChoice\", \"initSelection\", \"data\", \"tags\" ], function() {\n                        if (this in opts) {\n                            throw new Error(\"Option '\" + this + \"' is not allowed for Select2 when attached to a <select> element.\");\n                        }\n                    });\n                }\n                opts = $.extend({}, {\n                    populateResults: function(container, results, query) {\n                        var populate, data, result, children, id = this.opts.id;\n                        populate = function(results, container, depth) {\n                            var i, l, result, selectable, disabled, compound, node, label, innerContainer, formatted, indentCount = 0;\n                            results = opts.sortResults(results, container, query);\n                            for (i = 0, l = results.length; i < l; i = i + 1) {\n                                result = results[i];\n                                disabled = result.disabled === true;\n                                selectable = !disabled && id(result) !== undefined;\n                                compound = result.children && result.children.length > 0;\n                                if (opts.treeview) {\n                                    indentCount = result.text.lastIndexOf(opts.indentChar) + 1;\n                                    result.text = result.text.replace(new RegExp(\"^\" + opts.indentChar + \"*\"), '');\n                                }\n                                node = $(\"<li></li>\");\n                                node.attr(\"id\", \"select2-result-\" + self.filterVal(result.id));\n                                node.attr(\"data-indent-count\", indentCount);\n                                node.addClass(\"select2-results-dept-\" + depth);\n                                node.addClass(\"select2-result\");\n                                node.addClass(selectable ? \"select2-result-selectable\" : \"select2-result-unselectable\");\n                                if (disabled) {\n                                    node.addClass(\"select2-disabled\");\n                                }\n                                if (compound) {\n                                    node.addClass(\"select2-result-with-children\");\n                                }\n                                node.addClass(self.opts.formatResultCssClass(result));\n                                label = $(document.createElement(\"div\"));\n                                label.addClass(\"select2-result-label\");\n                                label.css({'padding-left': 5 + 15 * indentCount});\n                                formatted = opts.formatResult(result, label, query, self.opts.escapeMarkup);\n                                if (formatted !== undefined) {\n                                    label.html(formatted);\n                                }\n                                node.append(label);\n                                if (compound) {\n                                    innerContainer = $(\"<ul></ul>\");\n                                    innerContainer.addClass(\"select2-result-sub\");\n                                    populate(result.children, innerContainer, depth + 1);\n                                    node.append(innerContainer);\n                                }\n                                node.data(\"select2-data\", result);\n                                container.append(node);\n                            }\n                        };\n                        populate(results, container, 0);\n\n                        //treeview\n                        if (opts.treeview) {\n                            // init tree state\n                            $('.select2-result').each2(function() {\n                                var thisIndentCount = $(this).data('indent-count');\n                                var $icon = $('<i class=\"select2-tree-icon\"></i>');\n                                if ($(this).next().length > 0 && $(this).next().data('indentCount') > thisIndentCount) {\n                                    var $children = self.getChildrenByIndent($(this));\n                                    if ($children.length > 0) {\n                                        $(this).addClass('select2-result-parent');\n                                        if (opts.treeviewInitState == 'expanded' || query.term) {\n                                            $(this).addClass('expanded');\n                                            $icon.addClass(opts.treeviewExpandedClass);\n                                        } else {\n                                            $(this).addClass('collapsed');\n                                            $children.hide();\n                                            $icon.addClass(opts.treeviewCollapsedClass);\n                                        }\n                                    }\n                                }\n                                $(this).find('.select2-result-label').prepend($icon);\n                            });\n\n                            $('.select2-tree-icon').click(function() {\n                                var $that = $(this);\n                                var $node = $that.closest('li.select2-result');\n                                \n                                if ($node.hasClass('expanded')) {\n                                    $node.removeClass('expanded').addClass('collapsed');\n                                    $that.removeClass(opts.treeviewExpandedClass).addClass(opts.treeviewCollapsedClass);\n                                    //collapse\n                                    self.collapseNode($node);\n                                } else {\n                                    $node.removeClass('collapsed').addClass('expanded');\n                                    $that.removeClass(opts.treeviewCollapsedClass).addClass(opts.treeviewExpandedClass);\n                                    //expand\n                                    self.expandNode($node, false);\n                                }\n                                \n                            });\n\n                            //auto expand current selected node's all parent when dropdown\n                            if (self.opts.element.val()) {\n                                var $selectedNode = $('#select2-result-' + self.filterVal(self.opts.element.val()));\n                                var selectedNodeIndentCount = $selectedNode.data('indentCount');\n\n                                // show brother node\n                                // $selectedNode.show();\n                                // $selectedNode.nextUntil('[data-indent-count=\"' + (selectedNodeIndentCount - 1 ) + '\"]').show();\n\n                                //show all parent node\n                                // var $rootParent;\n                                // for (var i = selectedNodeIndentCount - 1; i >= 0; i--) {\n                                //     var $parent = $selectedNode.prevAll('[data-indent-count=\"' + i + '\"]').filter('.select2-result-parent').first();\n                                //     if ($parent.length > 0) {\n                                //         $rootParent = $parent;\n                                //     }\n                                // }\n                                \n                                if (selectedNodeIndentCount > 0) {\n                                    var $rootParent = $selectedNode.prevAll('[data-indent-count=\"0\"]').filter('.select2-result-parent').first();\n                                    self.expandNode($rootParent, true);\n                                }\n                                \n                            }\n                        }\n                    }\n                }, $.fn.select2.defaults, opts);\n                if (typeof opts.id !== \"function\") {\n                    idKey = opts.id;\n                    opts.id = function(e) {\n                        return e[idKey];\n                    };\n                }\n                if ($.isArray(opts.element.data(\"select2Tags\"))) {\n                    if (\"tags\" in opts) {\n                        throw \"tags specified as both an attribute 'data-select2-tags' and in options of Select2 \" + opts.element.attr(\"id\");\n                    }\n                    opts.tags = opts.element.data(\"select2Tags\");\n                }\n                if (select) {\n                    opts.query = this.bind(function(query) {\n                        var data = {\n                            results: [],\n                            more: false\n                        }, term = query.term, children, placeholderOption, process;\n                        process = function(element, collection) {\n                            var group;\n                            if (element.is(\"option\")) {\n                                if (query.matcher(term, element.text(), element)) {\n                                    collection.push(self.optionToData(element));\n                                }\n                            } else if (element.is(\"optgroup\")) {\n                                group = self.optionToData(element);\n                                element.children().each2(function(i, elm) {\n                                    process(elm, group.children);\n                                });\n                                if (group.children.length > 0) {\n                                    collection.push(group);\n                                }\n                            }\n                        };\n                        children = element.children();\n                        // ignore the placeholder option if there is one\n                        if (this.getPlaceholder() !== undefined && children.length > 0) {\n                            placeholderOption = this.getPlaceholderOption();\n                            if (placeholderOption) {\n                                children = children.not(placeholderOption);\n                            }\n                        }\n                        children.each2(function(i, elm) {\n                            process(elm, data.results);\n                        });\n                        query.callback(data);\n                    });\n                    // this is needed because inside val() we construct choices from options and there id is hardcoded\n                    opts.id = function(e) {\n                        return e.id;\n                    };\n                    opts.formatResultCssClass = function(data) {\n                        return data.css;\n                    };\n                } else {\n                    if (!(\"query\" in opts)) {\n                        if (\"ajax\" in opts) {\n                            ajaxUrl = opts.element.data(\"ajax-url\");\n                            if (ajaxUrl && ajaxUrl.length > 0) {\n                                opts.ajax.url = ajaxUrl;\n                            }\n                            opts.query = ajax.call(opts.element, opts.ajax);\n                        } else if (\"data\" in opts) {\n                            opts.query = local(opts.data);\n                        } else if (\"tags\" in opts) {\n                            opts.query = tags(opts.tags);\n                            if (opts.createSearchChoice === undefined) {\n                                opts.createSearchChoice = function(term) {\n                                    return {\n                                        id: term,\n                                        text: term\n                                    };\n                                };\n                            }\n                            if (opts.initSelection === undefined) {\n                                opts.initSelection = function(element, callback) {\n                                    var data = [];\n                                    $(splitVal(element.val(), opts.separator)).each(function() {\n                                        var id = this, text = this, tags = opts.tags;\n                                        if ($.isFunction(tags)) tags = tags();\n                                        $(tags).each(function() {\n                                            if (equal(this.id, id)) {\n                                                text = this.text;\n                                                return false;\n                                            }\n                                        });\n                                        data.push({\n                                            id: id,\n                                            text: text\n                                        });\n                                    });\n                                    callback(data);\n                                };\n                            }\n                        }\n                    }\n                }\n                if (typeof opts.query !== \"function\") {\n                    throw \"query function not defined for Select2 \" + opts.element.attr(\"id\");\n                }\n                return opts;\n            },\n            /**\n         * Monitor the original element for changes and update select2 accordingly\n         */\n            // abstract\n            monitorSource: function() {\n                var el = this.opts.element, sync;\n                el.on(\"change.select2\", this.bind(function(e) {\n                    if (this.opts.element.data(\"select2-change-triggered\") !== true) {\n                        this.initSelection();\n                    }\n                }));\n                sync = this.bind(function() {\n                    var enabled, readonly, self = this;\n                    // sync enabled state\n                    var disabled = el.prop(\"disabled\");\n                    if (disabled === undefined) disabled = false;\n                    this.enable(!disabled);\n                    var readonly = el.prop(\"readonly\");\n                    if (readonly === undefined) readonly = false;\n                    this.readonly(readonly);\n                    syncCssClasses(this.container, this.opts.element, this.opts.adaptContainerCssClass);\n                    this.container.addClass(evaluate(this.opts.containerCssClass));\n                    syncCssClasses(this.dropdown, this.opts.element, this.opts.adaptDropdownCssClass);\n                    this.dropdown.addClass(evaluate(this.opts.dropdownCssClass));\n                });\n                // mozilla and IE\n                el.on(\"propertychange.select2 DOMAttrModified.select2\", sync);\n                // hold onto a reference of the callback to work around a chromium bug\n                if (this.mutationCallback === undefined) {\n                    this.mutationCallback = function(mutations) {\n                        mutations.forEach(sync);\n                    };\n                }\n                // safari and chrome\n                if (typeof WebKitMutationObserver !== \"undefined\") {\n                    if (this.propertyObserver) {\n                        delete this.propertyObserver;\n                        this.propertyObserver = null;\n                    }\n                    this.propertyObserver = new WebKitMutationObserver(this.mutationCallback);\n                    this.propertyObserver.observe(el.get(0), {\n                        attributes: true,\n                        subtree: false\n                    });\n                }\n            },\n            // abstract\n            triggerSelect: function(data) {\n                var evt = $.Event(\"select2-selecting\", {\n                    val: this.id(data),\n                    object: data\n                });\n                this.opts.element.trigger(evt);\n                return !evt.isDefaultPrevented();\n            },\n            /**\n         * Triggers the change event on the source element\n         */\n            // abstract\n            triggerChange: function(details) {\n                details = details || {};\n                details = $.extend({}, details, {\n                    type: \"change\",\n                    val: this.val()\n                });\n                // prevents recursive triggering\n                this.opts.element.data(\"select2-change-triggered\", true);\n                this.opts.element.trigger(details);\n                this.opts.element.data(\"select2-change-triggered\", false);\n                // some validation frameworks ignore the change event and listen instead to keyup, click for selects\n                // so here we trigger the click event manually\n                this.opts.element.click();\n                // ValidationEngine ignorea the change event and listens instead to blur\n                // so here we trigger the blur event manually if so desired\n                if (this.opts.blurOnChange) this.opts.element.blur();\n            },\n            //abstract\n            isInterfaceEnabled: function() {\n                return this.enabledInterface === true;\n            },\n            // abstract\n            enableInterface: function() {\n                var enabled = this._enabled && !this._readonly, disabled = !enabled;\n                if (enabled === this.enabledInterface) return false;\n                this.container.toggleClass(\"select2-container-disabled\", disabled);\n                this.close();\n                this.enabledInterface = enabled;\n                return true;\n            },\n            // abstract\n            enable: function(enabled) {\n                if (enabled === undefined) enabled = true;\n                if (this._enabled === enabled) return false;\n                this._enabled = enabled;\n                this.opts.element.prop(\"disabled\", !enabled);\n                this.enableInterface();\n                return true;\n            },\n            // abstract\n            readonly: function(enabled) {\n                if (enabled === undefined) enabled = false;\n                if (this._readonly === enabled) return false;\n                this._readonly = enabled;\n                this.opts.element.prop(\"readonly\", enabled);\n                this.enableInterface();\n                return true;\n            },\n            // abstract\n            opened: function() {\n                return this.container.hasClass(\"select2-dropdown-open\");\n            },\n            // abstract\n            positionDropdown: function() {\n                var $dropdown = this.dropdown, offset = this.container.offset(), height = this.container.outerHeight(false), width = this.container.outerWidth(false), dropHeight = $dropdown.outerHeight(false), viewPortRight = $(window).scrollLeft() + $(window).width(), viewportBottom = $(window).scrollTop() + $(window).height(), dropTop = offset.top + height, dropLeft = offset.left, enoughRoomBelow = dropTop + dropHeight <= viewportBottom, enoughRoomAbove = offset.top - dropHeight >= this.body().scrollTop(), dropWidth = 0, enoughRoomOnRight = dropLeft + dropWidth <= viewPortRight, aboveNow = $dropdown.hasClass(\"select2-drop-above\"), bodyOffset, above, css, $resultsListNode, resultsList;\n                if (this.opts.dropdownAutoWidth) {\n                    $resultsListNode = $(\".select2-result\", $dropdown);\n                    $dropdown.addClass(\"select2-drop-auto-width\");\n                    $dropdown.css(\"width\", \"\");\n                    // set dropdown width to longest node content's width\n                    $resultsListNode.each2(function() {\n                        var thisWidth = $(this).data('indentCount') * 25 + $(this).find('.select2-result-text').text().length * 14;\n                        dropWidth = dropWidth > thisWidth ? dropWidth : thisWidth;\n                    });\n                    resultsList = $(\".select2-results\", $dropdown)[0];\n                    dropWidth += (resultsList.scrollHeight === resultsList.clientHeight ? 0 : scrollBarDimensions.width);\n                    \n                    dropWidth > width ? width = dropWidth : dropWidth = width;\n                    enoughRoomOnRight = dropLeft + dropWidth <= viewPortRight;\n                } else {\n                    this.container.removeClass(\"select2-drop-auto-width\");\n                }\n                //console.log(\"below/ droptop:\", dropTop, \"dropHeight\", dropHeight, \"sum\", (dropTop+dropHeight)+\" viewport bottom\", viewportBottom, \"enough?\", enoughRoomBelow);\n                //console.log(\"above/ offset.top\", offset.top, \"dropHeight\", dropHeight, \"top\", (offset.top-dropHeight), \"scrollTop\", this.body().scrollTop(), \"enough?\", enoughRoomAbove);\n                // fix positioning when body has an offset and is not position: static\n                if (this.body().css(\"position\") !== \"static\") {\n                    bodyOffset = this.body().offset();\n                    dropTop -= bodyOffset.top;\n                    dropLeft -= bodyOffset.left;\n                }\n                // always prefer the current above/below alignment, unless there is not enough room\n                if (aboveNow) {\n                    above = true;\n                    if (!enoughRoomAbove && enoughRoomBelow) above = false;\n                } else {\n                    above = false;\n                    if (!enoughRoomBelow && enoughRoomAbove) above = true;\n                }\n                if (!enoughRoomOnRight) {\n                    dropLeft = offset.left + width - dropWidth;\n                }\n                if (above) {\n                    dropTop = offset.top - dropHeight;\n                    this.container.addClass(\"select2-drop-above\");\n                    $dropdown.addClass(\"select2-drop-above\");\n                } else {\n                    this.container.removeClass(\"select2-drop-above\");\n                    $dropdown.removeClass(\"select2-drop-above\");\n                }\n                css = $.extend({\n                    top: dropTop,\n                    left: dropLeft,\n                    width: width\n                }, evaluate(this.opts.dropdownCss));\n                $dropdown.css(css);\n            },\n            // abstract\n            shouldOpen: function() {\n                var event;\n                if (this.opened()) return false;\n                if (this._enabled === false || this._readonly === true) return false;\n                event = $.Event(\"select2-opening\");\n                this.opts.element.trigger(event);\n                return !event.isDefaultPrevented();\n            },\n            // abstract\n            clearDropdownAlignmentPreference: function() {\n                // clear the classes used to figure out the preference of where the dropdown should be opened\n                this.container.removeClass(\"select2-drop-above\");\n                this.dropdown.removeClass(\"select2-drop-above\");\n            },\n            /**\n         * Opens the dropdown\n         *\n         * @return {Boolean} whether or not dropdown was opened. This method will return false if, for example,\n         * the dropdown is already open, or if the 'open' event listener on the element called preventDefault().\n         */\n            // abstract\n            open: function() {\n                if (!this.shouldOpen()) return false;\n                this.opening();\n                return true;\n            },\n            /**\n         * Performs the opening of the dropdown\n         */\n            // abstract\n            opening: function() {\n                var cid = this.containerId, scroll = \"scroll.\" + cid, resize = \"resize.\" + cid, orient = \"orientationchange.\" + cid, mask, maskCss;\n                this.container.addClass(\"select2-dropdown-open\").addClass(\"select2-container-active\");\n                this.clearDropdownAlignmentPreference();\n                if (this.dropdown[0] !== this.body().children().last()[0]) {\n                    this.dropdown.detach().appendTo(this.body());\n                }\n                // create the dropdown mask if doesnt already exist\n                mask = $(\"#select2-drop-mask\");\n                if (mask.length == 0) {\n                    mask = $(document.createElement(\"div\"));\n                    mask.attr(\"id\", \"select2-drop-mask\").attr(\"class\", \"select2-drop-mask\");\n                    mask.hide();\n                    mask.appendTo(this.body());\n                    mask.on(\"mousedown touchstart click\", function(e) {\n                        var dropdown = $(\"#select2-drop\"), self;\n                        if (dropdown.length > 0) {\n                            self = dropdown.data(\"select2\");\n                            if (self.opts.selectOnBlur) {\n                                self.selectHighlighted({\n                                    noFocus: true\n                                });\n                            }\n                            self.close();\n                            e.preventDefault();\n                            e.stopPropagation();\n                        }\n                    });\n                }\n                // ensure the mask is always right before the dropdown\n                if (this.dropdown.prev()[0] !== mask[0]) {\n                    this.dropdown.before(mask);\n                }\n                // move the global id to the correct dropdown\n                $(\"#select2-drop\").removeAttr(\"id\");\n                this.dropdown.attr(\"id\", \"select2-drop\");\n                // show the elements\n                maskCss = _makeMaskCss();\n                mask.css(maskCss).show();\n                this.dropdown.show();\n                this.positionDropdown();\n                this.dropdown.addClass(\"select2-drop-active\");\n                // attach listeners to events that can change the position of the container and thus require\n                // the position of the dropdown to be updated as well so it does not come unglued from the container\n                var that = this;\n                this.container.parents().add(window).each(function() {\n                    $(this).on(resize + \" \" + scroll + \" \" + orient, function(e) {\n                        var maskCss = _makeMaskCss();\n                        $(\"#select2-drop-mask\").css(maskCss);\n                        that.positionDropdown();\n                    });\n                });\n                function _makeMaskCss() {\n                    return {\n                        width: Math.max(document.documentElement.scrollWidth, $(window).width()),\n                        height: Math.max(document.documentElement.scrollHeight, $(window).height())\n                    };\n                }\n            },\n            // abstract\n            close: function() {\n                if (!this.opened()) return;\n                var cid = this.containerId, scroll = \"scroll.\" + cid, resize = \"resize.\" + cid, orient = \"orientationchange.\" + cid;\n                // unbind event listeners\n                this.container.parents().add(window).each(function() {\n                    $(this).off(scroll).off(resize).off(orient);\n                });\n                this.clearDropdownAlignmentPreference();\n                $(\"#select2-drop-mask\").hide();\n                this.dropdown.removeAttr(\"id\");\n                // only the active dropdown has the select2-drop id\n                this.dropdown.hide();\n                this.container.removeClass(\"select2-dropdown-open\");\n                this.results.empty();\n                this.clearSearch();\n                this.search.removeClass(\"select2-active\");\n                this.opts.element.trigger($.Event(\"select2-close\"));\n            },\n            /**\n         * Opens control, sets input value, and updates results.\n         */\n            // abstract\n            externalSearch: function(term) {\n                this.open();\n                this.search.val(term);\n                this.updateResults(false);\n            },\n            // abstract\n            clearSearch: function() {},\n            //abstract\n            getMaximumSelectionSize: function() {\n                return evaluate(this.opts.maximumSelectionSize);\n            },\n            // abstract\n            ensureHighlightVisible: function() {\n                var results = this.results, children, index, child, hb, rb, y, more;\n                index = this.highlight();\n                if (index < 0) return;\n                if (index == 0) {\n                    // if the first element is highlighted scroll all the way to the top,\n                    // that way any unselectable headers above it will also be scrolled\n                    // into view\n                    results.scrollTop(0);\n                    return;\n                }\n                children = this.findHighlightableChoices().find(\".select2-result-label\");\n                child = $(children[index]);\n                hb = child.offset().top + child.outerHeight(true);\n                // if this is the last child lets also make sure select2-more-results is visible\n                if (index === children.length - 1) {\n                    more = results.find(\"li.select2-more-results\");\n                    if (more.length > 0) {\n                        hb = more.offset().top + more.outerHeight(true);\n                    }\n                }\n                rb = results.offset().top + results.outerHeight(true);\n                if (hb > rb) {\n                    results.scrollTop(results.scrollTop() + (hb - rb));\n                }\n                y = child.offset().top - results.offset().top;\n                // make sure the top of the element is visible\n                if (y < 0 && child.css(\"display\") != \"none\") {\n                    results.scrollTop(results.scrollTop() + y);\n                }\n            },\n            // abstract\n            findHighlightableChoices: function() {\n                return this.results.find(\".select2-result-selectable:not(.select2-selected):not(.select2-disabled)\");\n            },\n            // abstract\n            moveHighlight: function(delta) {\n                var choices = this.findHighlightableChoices(), index = this.highlight();\n                while (index > -1 && index < choices.length) {\n                    index += delta;\n                    var choice = $(choices[index]);\n                    if (choice.hasClass(\"select2-result-selectable\") && !choice.hasClass(\"select2-disabled\") && !choice.hasClass(\"select2-selected\")) {\n                        this.highlight(index);\n                        break;\n                    }\n                }\n            },\n            // abstract\n            highlight: function(index) {\n                var choices = this.findHighlightableChoices(), choice, data;\n                if (arguments.length === 0) {\n                    return indexOf(choices.filter(\".select2-highlighted\")[0], choices.get());\n                }\n                if (index >= choices.length) index = choices.length - 1;\n                if (index < 0) index = 0;\n                this.results.find(\".select2-highlighted\").removeClass(\"select2-highlighted\");\n                choice = $(choices[index]);\n                choice.addClass(\"select2-highlighted\");\n                this.ensureHighlightVisible();\n                data = choice.data(\"select2-data\");\n                if (data) {\n                    this.opts.element.trigger({\n                        type: \"select2-highlight\",\n                        val: this.id(data),\n                        choice: data\n                    });\n                }\n            },\n            // abstract\n            countSelectableResults: function() {\n                return this.findHighlightableChoices().length;\n            },\n            // abstract\n            highlightUnderEvent: function(event) {\n                var el = $(event.target).closest(\".select2-result-selectable\");\n                if (el.length > 0 && !el.is(\".select2-highlighted\")) {\n                    var choices = this.findHighlightableChoices();\n                    this.highlight(choices.index(el));\n                } else if (el.length == 0) {\n                    // if we are over an unselectable item remove al highlights\n                    this.results.find(\".select2-highlighted\").removeClass(\"select2-highlighted\");\n                }\n            },\n            // abstract\n            loadMoreIfNeeded: function() {\n                var results = this.results, more = results.find(\"li.select2-more-results\"), below, // pixels the element is below the scroll fold, below==0 is when the element is starting to be visible\n                offset = -1, // index of first element without data\n                page = this.resultsPage + 1, self = this, term = this.search.val(), context = this.context;\n                if (more.length === 0) return;\n                below = more.offset().top - results.offset().top - results.height();\n                if (below <= this.opts.loadMorePadding) {\n                    more.addClass(\"select2-active\");\n                    this.opts.query({\n                        element: this.opts.element,\n                        term: term,\n                        page: page,\n                        context: context,\n                        matcher: this.opts.matcher,\n                        callback: this.bind(function(data) {\n                            // ignore a response if the select2 has been closed before it was received\n                            if (!self.opened()) return;\n                            self.opts.populateResults.call(this, results, data.results, {\n                                term: term,\n                                page: page,\n                                context: context\n                            });\n                            self.postprocessResults(data, false, false);\n                            if (data.more === true) {\n                                more.detach().appendTo(results).text(self.opts.formatLoadMore(page + 1));\n                                window.setTimeout(function() {\n                                    self.loadMoreIfNeeded();\n                                }, 10);\n                            } else {\n                                more.remove();\n                            }\n                            self.positionDropdown();\n                            self.resultsPage = page;\n                            self.context = data.context;\n                        })\n                    });\n                }\n            },\n            /**\n         * Default tokenizer function which does nothing\n         */\n            tokenize: function() {},\n            /**\n         * @param initial whether or not this is the call to this method right after the dropdown has been opened\n         */\n            // abstract\n            updateResults: function(initial) {\n                var search = this.search, results = this.results, opts = this.opts, data, self = this, input, term = search.val(), lastTerm = $.data(this.container, \"select2-last-term\");\n                // prevent duplicate queries against the same term\n                if (initial !== true && lastTerm && equal(term, lastTerm)) return;\n                $.data(this.container, \"select2-last-term\", term);\n                // if the search is currently hidden we do not alter the results\n                if (initial !== true && (this.showSearchInput === false || !this.opened())) {\n                    return;\n                }\n                function postRender() {\n                    search.removeClass(\"select2-active\");\n                    self.positionDropdown();\n                }\n                function render(html) {\n                    results.html(html);\n                    postRender();\n                }\n                var maxSelSize = this.getMaximumSelectionSize();\n                if (maxSelSize >= 1) {\n                    data = this.data();\n                    if ($.isArray(data) && data.length >= maxSelSize && checkFormatter(opts.formatSelectionTooBig, \"formatSelectionTooBig\")) {\n                        render(\"<li class='select2-selection-limit'>\" + opts.formatSelectionTooBig(maxSelSize) + \"</li>\");\n                        return;\n                    }\n                }\n                if (search.val().length < opts.minimumInputLength) {\n                    if (checkFormatter(opts.formatInputTooShort, \"formatInputTooShort\")) {\n                        render(\"<li class='select2-no-results'>\" + opts.formatInputTooShort(search.val(), opts.minimumInputLength) + \"</li>\");\n                    } else {\n                        render(\"\");\n                    }\n                    if (initial && this.showSearch) this.showSearch(true);\n                    return;\n                }\n                if (opts.maximumInputLength && search.val().length > opts.maximumInputLength) {\n                    if (checkFormatter(opts.formatInputTooLong, \"formatInputTooLong\")) {\n                        render(\"<li class='select2-no-results'>\" + opts.formatInputTooLong(search.val(), opts.maximumInputLength) + \"</li>\");\n                    } else {\n                        render(\"\");\n                    }\n                    return;\n                }\n                if (opts.formatSearching && this.findHighlightableChoices().length === 0) {\n                    render(\"<li class='select2-searching'>\" + opts.formatSearching() + \"</li>\");\n                }\n                search.addClass(\"select2-active\");\n                // give the tokenizer a chance to pre-process the input\n                input = this.tokenize();\n                if (input != undefined && input != null) {\n                    search.val(input);\n                }\n                this.resultsPage = 1;\n                opts.query({\n                    element: opts.element,\n                    term: search.val(),\n                    page: this.resultsPage,\n                    context: null,\n                    matcher: opts.matcher,\n                    callback: this.bind(function(data) {\n                        var def;\n                        // default choice\n                        // ignore a response if the select2 has been closed before it was received\n                        if (!this.opened()) {\n                            this.search.removeClass(\"select2-active\");\n                            return;\n                        }\n                        // save context, if any\n                        this.context = data.context === undefined ? null : data.context;\n                        // create a default choice and prepend it to the list\n                        if (this.opts.createSearchChoice && search.val() !== \"\") {\n                            def = this.opts.createSearchChoice.call(self, search.val(), data.results);\n                            if (def !== undefined && def !== null && self.id(def) !== undefined && self.id(def) !== null) {\n                                if ($(data.results).filter(function() {\n                                    return equal(self.id(this), self.id(def));\n                                }).length === 0) {\n                                    data.results.unshift(def);\n                                }\n                            }\n                        }\n                        if (data.results.length === 0 && checkFormatter(opts.formatNoMatches, \"formatNoMatches\")) {\n                            render(\"<li class='select2-no-results'>\" + opts.formatNoMatches(search.val()) + \"</li>\");\n                            return;\n                        }\n                        results.empty();\n                        self.opts.populateResults.call(this, results, data.results, {\n                            term: search.val(),\n                            page: this.resultsPage,\n                            context: null\n                        });\n                        if (data.more === true && checkFormatter(opts.formatLoadMore, \"formatLoadMore\")) {\n                            results.append(\"<li class='select2-more-results'>\" + self.opts.escapeMarkup(opts.formatLoadMore(this.resultsPage)) + \"</li>\");\n                            window.setTimeout(function() {\n                                self.loadMoreIfNeeded();\n                            }, 10);\n                        }\n                        this.postprocessResults(data, initial);\n                        postRender();\n                        this.opts.element.trigger({\n                            type: \"select2-loaded\",\n                            items: data\n                        });\n                    })\n                });\n            },\n            // abstract\n            cancel: function() {\n                this.close();\n            },\n            // abstract\n            blur: function() {\n                // if selectOnBlur == true, select the currently highlighted option\n                if (this.opts.selectOnBlur) this.selectHighlighted({\n                    noFocus: true\n                });\n                this.close();\n                this.container.removeClass(\"select2-container-active\");\n                // synonymous to .is(':focus'), which is available in jquery >= 1.6\n                if (this.search[0] === document.activeElement) {\n                    this.search.blur();\n                }\n                this.clearSearch();\n                this.selection.find(\".select2-search-choice-focus\").removeClass(\"select2-search-choice-focus\");\n            },\n            // abstract\n            focusSearch: function() {\n                focus(this.search);\n            },\n            // abstract\n            selectHighlighted: function(options) {\n                var index = this.highlight(), highlighted = this.results.find(\".select2-highlighted\"), data = highlighted.closest(\".select2-result\").data(\"select2-data\");\n                if (data) {\n                    this.highlight(index);\n                    this.onSelect(data, options);\n                } else if (options && options.noFocus) {\n                    this.close();\n                }\n            },\n            // abstract\n            getPlaceholder: function() {\n                var placeholderOption;\n                return this.opts.element.attr(\"placeholder\") || this.opts.element.attr(\"data-placeholder\") || // jquery 1.4 compat\n                this.opts.element.data(\"placeholder\") || this.opts.placeholder || ((placeholderOption = this.getPlaceholderOption()) !== undefined ? placeholderOption.text() : undefined);\n            },\n            // abstract\n            getPlaceholderOption: function() {\n                if (this.select) {\n                    var firstOption = this.select.children().first();\n                    if (this.opts.placeholderOption !== undefined) {\n                        //Determine the placeholder option based on the specified placeholderOption setting\n                        return this.opts.placeholderOption === \"first\" && firstOption || typeof this.opts.placeholderOption === \"function\" && this.opts.placeholderOption(this.select);\n                    } else if (firstOption.text() === \"\" && firstOption.val() === \"\") {\n                        //No explicit placeholder option specified, use the first if it's blank\n                        return firstOption;\n                    }\n                }\n            },\n            /**\n         * Get the desired width for the container element.  This is\n         * derived first from option `width` passed to select2, then\n         * the inline 'style' on the original element, and finally\n         * falls back to the jQuery calculated element width.\n         */\n            // abstract\n            initContainerWidth: function() {\n                function resolveContainerWidth() {\n                    var style, attrs, matches, i, l;\n                    if (this.opts.width === \"off\") {\n                        return null;\n                    } else if (this.opts.width === \"element\") {\n                        return this.opts.element.outerWidth(false) === 0 ? \"auto\" : this.opts.element.outerWidth(false) + \"px\";\n                    } else if (this.opts.width === \"copy\" || this.opts.width === \"resolve\") {\n                        // check if there is inline style on the element that contains width\n                        style = this.opts.element.attr(\"style\");\n                        if (style !== undefined) {\n                            attrs = style.split(\";\");\n                            for (i = 0, l = attrs.length; i < l; i = i + 1) {\n                                matches = attrs[i].replace(/\\s/g, \"\").match(/width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);\n                                if (matches !== null && matches.length >= 1) return matches[1];\n                            }\n                        }\n                        if (this.opts.width === \"resolve\") {\n                            // next check if css('width') can resolve a width that is percent based, this is sometimes possible\n                            // when attached to input type=hidden or elements hidden via css\n                            style = this.opts.element.css(\"width\");\n                            if (style.indexOf(\"%\") > 0) return style;\n                            // finally, fallback on the calculated width of the element\n                            return this.opts.element.outerWidth(false) === 0 ? \"auto\" : this.opts.element.outerWidth(false) + \"px\";\n                        }\n                        return null;\n                    } else if ($.isFunction(this.opts.width)) {\n                        return this.opts.width();\n                    } else {\n                        return this.opts.width;\n                    }\n                }\n                var width = resolveContainerWidth.call(this);\n                if (width !== null) {\n                    this.container.css(\"width\", width);\n                }\n            }\n        });\n        SingleSelect2 = clazz(AbstractSelect2, {\n            // single\n            createContainer: function() {\n                var container = $(document.createElement(\"div\")).attr({\n                    \"class\": \"select2-container\"\n                }).html([ \"<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>\", \"   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>\", \"   <span class='select2-arrow'><b></b></span>\", \"</a>\", \"<input class='select2-focusser select2-offscreen' type='text'/>\", \"<div class='select2-drop select2-display-none'>\", \"   <div class='select2-search'>\", \"       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>\", \"   </div>\", \"   <ul class='select2-results'>\", \"   </ul>\", \"</div>\" ].join(\"\"));\n                return container;\n            },\n            // single\n            enableInterface: function() {\n                if (this.parent.enableInterface.apply(this, arguments)) {\n                    this.focusser.prop(\"disabled\", !this.isInterfaceEnabled());\n                }\n            },\n            // single\n            opening: function() {\n                var el, range, len;\n                if (this.opts.minimumResultsForSearch >= 0) {\n                    this.showSearch(true);\n                }\n                this.parent.opening.apply(this, arguments);\n                if (this.showSearchInput !== false) {\n                    // IE appends focusser.val() at the end of field :/ so we manually insert it at the beginning using a range\n                    // all other browsers handle this just fine\n                    this.search.val(this.focusser.val());\n                }\n                this.search.focus();\n                // move the cursor to the end after focussing, otherwise it will be at the beginning and\n                // new text will appear *before* focusser.val()\n                el = this.search.get(0);\n                if (el.createTextRange) {\n                    range = el.createTextRange();\n                    range.collapse(false);\n                    range.select();\n                } else if (el.setSelectionRange) {\n                    len = this.search.val().length;\n                    el.setSelectionRange(len, len);\n                }\n                this.focusser.prop(\"disabled\", true).val(\"\");\n                this.updateResults(true);\n                this.opts.element.trigger($.Event(\"select2-open\"));\n            },\n            // single\n            close: function() {\n                if (!this.opened()) return;\n                this.parent.close.apply(this, arguments);\n                this.focusser.removeAttr(\"disabled\");\n                this.focusser.focus();\n            },\n            // single\n            focus: function() {\n                if (this.opened()) {\n                    this.close();\n                } else {\n                    this.focusser.removeAttr(\"disabled\");\n                    this.focusser.focus();\n                }\n            },\n            // single\n            isFocused: function() {\n                return this.container.hasClass(\"select2-container-active\");\n            },\n            // single\n            cancel: function() {\n                this.parent.cancel.apply(this, arguments);\n                this.focusser.removeAttr(\"disabled\");\n                this.focusser.focus();\n            },\n            // single\n            initContainer: function() {\n                var selection, container = this.container, dropdown = this.dropdown;\n                if (this.opts.minimumResultsForSearch < 0) {\n                    this.showSearch(false);\n                } else {\n                    this.showSearch(true);\n                }\n                this.selection = selection = container.find(\".select2-choice\");\n                this.focusser = container.find(\".select2-focusser\");\n                // rewrite labels from original element to focusser\n                this.focusser.attr(\"id\", \"s2id_autogen\" + nextUid());\n                $(\"label[for='\" + this.opts.element.attr(\"id\") + \"']\").attr(\"for\", this.focusser.attr(\"id\"));\n                this.focusser.attr(\"tabindex\", this.elementTabIndex);\n                this.search.on(\"keydown\", this.bind(function(e) {\n                    if (!this.isInterfaceEnabled()) return;\n                    if (e.which === KEY.PAGE_UP || e.which === KEY.PAGE_DOWN) {\n                        // prevent the page from scrolling\n                        killEvent(e);\n                        return;\n                    }\n                    switch (e.which) {\n                      case KEY.UP:\n                      case KEY.DOWN:\n                        this.moveHighlight(e.which === KEY.UP ? -1 : 1);\n                        killEvent(e);\n                        return;\n\n                      case KEY.ENTER:\n                        this.selectHighlighted();\n                        killEvent(e);\n                        return;\n\n                      case KEY.TAB:\n                        this.selectHighlighted({\n                            noFocus: true\n                        });\n                        return;\n\n                      case KEY.ESC:\n                        this.cancel(e);\n                        killEvent(e);\n                        return;\n                    }\n                }));\n                this.search.on(\"blur\", this.bind(function(e) {\n                    // a workaround for chrome to keep the search field focussed when the scroll bar is used to scroll the dropdown.\n                    // without this the search field loses focus which is annoying\n                    if (document.activeElement === this.body().get(0)) {\n                        window.setTimeout(this.bind(function() {\n                            this.search.focus();\n                        }), 0);\n                    }\n                }));\n                this.focusser.on(\"keydown\", this.bind(function(e) {\n                    if (!this.isInterfaceEnabled()) return;\n                    if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC) {\n                        return;\n                    }\n                    if (this.opts.openOnEnter === false && e.which === KEY.ENTER) {\n                        killEvent(e);\n                        return;\n                    }\n                    if (e.which == KEY.DOWN || e.which == KEY.UP || e.which == KEY.ENTER && this.opts.openOnEnter) {\n                        if (e.altKey || e.ctrlKey || e.shiftKey || e.metaKey) return;\n                        this.open();\n                        killEvent(e);\n                        return;\n                    }\n                    if (e.which == KEY.DELETE || e.which == KEY.BACKSPACE) {\n                        if (this.opts.allowClear) {\n                            this.clear();\n                        }\n                        killEvent(e);\n                        return;\n                    }\n                }));\n                installKeyUpChangeEvent(this.focusser);\n                this.focusser.on(\"keyup-change input\", this.bind(function(e) {\n                    if (this.opts.minimumResultsForSearch >= 0) {\n                        e.stopPropagation();\n                        if (this.opened()) return;\n                        this.open();\n                    }\n                }));\n                selection.on(\"mousedown\", \"abbr\", this.bind(function(e) {\n                    if (!this.isInterfaceEnabled()) return;\n                    this.clear();\n                    killEventImmediately(e);\n                    this.close();\n                    this.selection.focus();\n                }));\n                selection.on(\"mousedown\", this.bind(function(e) {\n                    if (!this.container.hasClass(\"select2-container-active\")) {\n                        this.opts.element.trigger($.Event(\"select2-focus\"));\n                    }\n                    if (this.opened()) {\n                        this.close();\n                    } else if (this.isInterfaceEnabled()) {\n                        this.open();\n                    }\n                    killEvent(e);\n                }));\n                dropdown.on(\"mousedown\", this.bind(function() {\n                    this.search.focus();\n                }));\n                selection.on(\"focus\", this.bind(function(e) {\n                    killEvent(e);\n                }));\n                this.focusser.on(\"focus\", this.bind(function() {\n                    if (!this.container.hasClass(\"select2-container-active\")) {\n                        this.opts.element.trigger($.Event(\"select2-focus\"));\n                    }\n                    this.container.addClass(\"select2-container-active\");\n                })).on(\"blur\", this.bind(function() {\n                    if (!this.opened()) {\n                        this.container.removeClass(\"select2-container-active\");\n                        this.opts.element.trigger($.Event(\"select2-blur\"));\n                    }\n                }));\n                this.search.on(\"focus\", this.bind(function() {\n                    if (!this.container.hasClass(\"select2-container-active\")) {\n                        this.opts.element.trigger($.Event(\"select2-focus\"));\n                    }\n                    this.container.addClass(\"select2-container-active\");\n                }));\n                this.initContainerWidth();\n                this.opts.element.addClass(\"select2-offscreen\");\n                this.setPlaceholder();\n            },\n            // single\n            clear: function(triggerChange) {\n                var data = this.selection.data(\"select2-data\");\n                if (data) {\n                    // guard against queued quick consecutive clicks\n                    var placeholderOption = this.getPlaceholderOption();\n                    this.opts.element.val(placeholderOption ? placeholderOption.val() : \"\");\n                    this.selection.find(\".select2-chosen\").empty();\n                    this.selection.removeData(\"select2-data\");\n                    this.setPlaceholder();\n                    if (triggerChange !== false) {\n                        this.opts.element.trigger({\n                            type: \"select2-removed\",\n                            val: this.id(data),\n                            choice: data\n                        });\n                        this.triggerChange({\n                            removed: data\n                        });\n                    }\n                }\n            },\n            /**\n         * Sets selection based on source element's value\n         */\n            // single\n            initSelection: function() {\n                var selected;\n                if (this.isPlaceholderOptionSelected()) {\n                    this.updateSelection([]);\n                    this.close();\n                    this.setPlaceholder();\n                } else {\n                    var self = this;\n                    this.opts.initSelection.call(null, this.opts.element, function(selected) {\n                        if (selected !== undefined && selected !== null) {\n                            self.updateSelection(selected);\n                            self.close();\n                            self.setPlaceholder();\n                        }\n                    });\n                }\n            },\n            isPlaceholderOptionSelected: function() {\n                var placeholderOption;\n                return (placeholderOption = this.getPlaceholderOption()) !== undefined && placeholderOption.is(\":selected\") || this.opts.element.val() === \"\" || this.opts.element.val() === undefined || this.opts.element.val() === null;\n            },\n            // single\n            prepareOpts: function() {\n                var opts = this.parent.prepareOpts.apply(this, arguments), self = this;\n                if (opts.element.get(0).tagName.toLowerCase() === \"select\") {\n                    // install the selection initializer\n                    opts.initSelection = function(element, callback) {\n                        var selected = element.find(\":selected\");\n                        // a single select box always has a value, no need to null check 'selected'\n                        callback(self.optionToData(selected));\n                    };\n                } else if (\"data\" in opts) {\n                    // install default initSelection when applied to hidden input and data is local\n                    opts.initSelection = opts.initSelection || function(element, callback) {\n                        var id = element.val();\n                        //search in data by id, storing the actual matching item\n                        var match = null;\n                        opts.query({\n                            matcher: function(term, text, el) {\n                                var is_match = equal(id, opts.id(el));\n                                if (is_match) {\n                                    match = el;\n                                }\n                                return is_match;\n                            },\n                            callback: !$.isFunction(callback) ? $.noop : function() {\n                                callback(match);\n                            }\n                        });\n                    };\n                }\n                return opts;\n            },\n            // single\n            getPlaceholder: function() {\n                // if a placeholder is specified on a single select without a valid placeholder option ignore it\n                if (this.select) {\n                    if (this.getPlaceholderOption() === undefined) {\n                        return undefined;\n                    }\n                }\n                return this.parent.getPlaceholder.apply(this, arguments);\n            },\n            // single\n            setPlaceholder: function() {\n                var placeholder = this.getPlaceholder();\n                if (this.isPlaceholderOptionSelected() && placeholder !== undefined) {\n                    // check for a placeholder option if attached to a select\n                    if (this.select && this.getPlaceholderOption() === undefined) return;\n                    this.selection.find(\".select2-chosen\").html(this.opts.escapeMarkup(placeholder));\n                    this.selection.addClass(\"select2-default\");\n                    this.container.removeClass(\"select2-allowclear\");\n                }\n            },\n            // single\n            postprocessResults: function(data, initial, noHighlightUpdate) {\n                var selected = 0, self = this, showSearchInput = true;\n                // find the selected element in the result list\n                this.findHighlightableChoices().each2(function(i, elm) {\n                    if (equal(self.id(elm.data(\"select2-data\")), self.opts.element.val())) {\n                        selected = i;\n                        return false;\n                    }\n                });\n                // and highlight it\n                if (noHighlightUpdate !== false) {\n                    if (initial === true && selected >= 0) {\n                        this.highlight(selected);\n                    } else {\n                        this.highlight(0);\n                    }\n                }\n                // hide the search box if this is the first we got the results and there are enough of them for search\n                if (initial === true) {\n                    var min = this.opts.minimumResultsForSearch;\n                    if (min >= 0) {\n                        this.showSearch(countResults(data.results) >= min);\n                    }\n                }\n            },\n            // single\n            showSearch: function(showSearchInput) {\n                if (this.showSearchInput === showSearchInput) return;\n                this.showSearchInput = showSearchInput;\n                this.dropdown.find(\".select2-search\").toggleClass(\"select2-search-hidden\", !showSearchInput);\n                this.dropdown.find(\".select2-search\").toggleClass(\"select2-offscreen\", !showSearchInput);\n                //add \"select2-with-searchbox\" to the container if search box is shown\n                $(this.dropdown, this.container).toggleClass(\"select2-with-searchbox\", showSearchInput);\n            },\n            // single\n            onSelect: function(data, options) {\n                if (!this.triggerSelect(data)) {\n                    return;\n                }\n                var old = this.opts.element.val(), oldData = this.data();\n                this.opts.element.val(this.id(data));\n                this.updateSelection(data);\n                this.opts.element.trigger({\n                    type: \"select2-selected\",\n                    val: this.id(data),\n                    choice: data\n                });\n                this.close();\n                if (!options || !options.noFocus) this.selection.focus();\n                if (!equal(old, this.id(data))) {\n                    this.triggerChange({\n                        added: data,\n                        removed: oldData\n                    });\n                }\n            },\n            // single\n            updateSelection: function(data) {\n                var container = this.selection.find(\".select2-chosen\"), formatted, cssClass;\n                this.selection.data(\"select2-data\", data);\n                container.empty();\n                formatted = this.opts.formatSelection(data, container, this.opts.escapeMarkup);\n                if (this.opts.treeview) {\n                    formatted = formatted.replace(new RegExp(\"^\" + this.opts.indentChar + \"*\"), '');\n                }\n                if (formatted !== undefined) {\n                    container.append(formatted);\n                }\n                cssClass = this.opts.formatSelectionCssClass(data, container);\n                if (cssClass !== undefined) {\n                    container.addClass(cssClass);\n                }\n                this.selection.removeClass(\"select2-default\");\n                if (this.opts.allowClear && this.getPlaceholder() !== undefined) {\n                    this.container.addClass(\"select2-allowclear\");\n                }\n            },\n            // single\n            val: function() {\n                var val, triggerChange = false, data = null, self = this, oldData = this.data();\n                if (arguments.length === 0) {\n                    return this.opts.element.val();\n                }\n                val = arguments[0];\n                if (arguments.length > 1) {\n                    triggerChange = arguments[1];\n                }\n                if (this.select) {\n                    this.select.val(val).find(\":selected\").each2(function(i, elm) {\n                        data = self.optionToData(elm);\n                        return false;\n                    });\n                    this.updateSelection(data);\n                    this.setPlaceholder();\n                    if (triggerChange) {\n                        this.triggerChange({\n                            added: data,\n                            removed: oldData\n                        });\n                    }\n                } else {\n                    // val is an id. !val is true for [undefined,null,'',0] - 0 is legal\n                    if (!val && val !== 0) {\n                        this.clear(triggerChange);\n                        return;\n                    }\n                    if (this.opts.initSelection === undefined) {\n                        throw new Error(\"cannot call val() if initSelection() is not defined\");\n                    }\n                    this.opts.element.val(val);\n                    this.opts.initSelection(this.opts.element, function(data) {\n                        self.opts.element.val(!data ? \"\" : self.id(data));\n                        self.updateSelection(data);\n                        self.setPlaceholder();\n                        if (triggerChange) {\n                            self.triggerChange({\n                                added: data,\n                                removed: oldData\n                            });\n                        }\n                    });\n                }\n            },\n            // single\n            clearSearch: function() {\n                this.search.val(\"\");\n                this.focusser.val(\"\");\n            },\n            // single\n            data: function(value, triggerChange) {\n                var data;\n                if (arguments.length === 0) {\n                    data = this.selection.data(\"select2-data\");\n                    if (data == undefined) data = null;\n                    return data;\n                } else {\n                    if (!value || value === \"\") {\n                        this.clear(triggerChange);\n                    } else {\n                        data = this.data();\n                        this.opts.element.val(!value ? \"\" : this.id(value));\n                        this.updateSelection(value);\n                        if (triggerChange) {\n                            this.triggerChange({\n                                added: value,\n                                removed: data\n                            });\n                        }\n                    }\n                }\n            }\n        });\n        MultiSelect2 = clazz(AbstractSelect2, {\n            // multi\n            createContainer: function() {\n                var container = $(document.createElement(\"div\")).attr({\n                    \"class\": \"select2-container select2-container-multi\"\n                }).html([ \"<ul class='select2-choices'>\", \"  <li class='select2-search-field'>\", \"    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>\", \"  </li>\", \"</ul>\", \"<div class='select2-drop select2-drop-multi select2-display-none'>\", \"   <ul class='select2-results'>\", \"   </ul>\", \"</div>\" ].join(\"\"));\n                return container;\n            },\n            // multi\n            prepareOpts: function() {\n                var opts = this.parent.prepareOpts.apply(this, arguments), self = this;\n                // TODO validate placeholder is a string if specified\n                if (opts.element.get(0).tagName.toLowerCase() === \"select\") {\n                    // install sthe selection initializer\n                    opts.initSelection = function(element, callback) {\n                        var data = [];\n                        element.find(\":selected\").each2(function(i, elm) {\n                            data.push(self.optionToData(elm));\n                        });\n                        callback(data);\n                    };\n                } else if (\"data\" in opts) {\n                    // install default initSelection when applied to hidden input and data is local\n                    opts.initSelection = opts.initSelection || function(element, callback) {\n                        var ids = splitVal(element.val(), opts.separator);\n                        //search in data by array of ids, storing matching items in a list\n                        var matches = [];\n                        opts.query({\n                            matcher: function(term, text, el) {\n                                var is_match = $.grep(ids, function(id) {\n                                    return equal(id, opts.id(el));\n                                }).length;\n                                if (is_match) {\n                                    matches.push(el);\n                                }\n                                return is_match;\n                            },\n                            callback: !$.isFunction(callback) ? $.noop : function() {\n                                // reorder matches based on the order they appear in the ids array because right now\n                                // they are in the order in which they appear in data array\n                                var ordered = [];\n                                for (var i = 0; i < ids.length; i++) {\n                                    var id = ids[i];\n                                    for (var j = 0; j < matches.length; j++) {\n                                        var match = matches[j];\n                                        if (equal(id, opts.id(match))) {\n                                            ordered.push(match);\n                                            matches.splice(j, 1);\n                                            break;\n                                        }\n                                    }\n                                }\n                                callback(ordered);\n                            }\n                        });\n                    };\n                }\n                return opts;\n            },\n            selectChoice: function(choice) {\n                var selected = this.container.find(\".select2-search-choice-focus\");\n                if (selected.length && choice && choice[0] == selected[0]) {} else {\n                    if (selected.length) {\n                        this.opts.element.trigger(\"choice-deselected\", selected);\n                    }\n                    selected.removeClass(\"select2-search-choice-focus\");\n                    if (choice && choice.length) {\n                        this.close();\n                        choice.addClass(\"select2-search-choice-focus\");\n                        this.opts.element.trigger(\"choice-selected\", choice);\n                    }\n                }\n            },\n            // multi\n            initContainer: function() {\n                var selector = \".select2-choices\", selection;\n                this.searchContainer = this.container.find(\".select2-search-field\");\n                this.selection = selection = this.container.find(selector);\n                var _this = this;\n                this.selection.on(\"mousedown\", \".select2-search-choice\", function(e) {\n                    //killEvent(e);\n                    _this.search[0].focus();\n                    _this.selectChoice($(this));\n                });\n                // rewrite labels from original element to focusser\n                this.search.attr(\"id\", \"s2id_autogen\" + nextUid());\n                $(\"label[for='\" + this.opts.element.attr(\"id\") + \"']\").attr(\"for\", this.search.attr(\"id\"));\n                this.search.on(\"input paste\", this.bind(function() {\n                    if (!this.isInterfaceEnabled()) return;\n                    if (!this.opened()) {\n                        this.open();\n                    }\n                }));\n                this.search.attr(\"tabindex\", this.elementTabIndex);\n                this.keydowns = 0;\n                this.search.on(\"keydown\", this.bind(function(e) {\n                    if (!this.isInterfaceEnabled()) return;\n                    ++this.keydowns;\n                    var selected = selection.find(\".select2-search-choice-focus\");\n                    var prev = selected.prev(\".select2-search-choice:not(.select2-locked)\");\n                    var next = selected.next(\".select2-search-choice:not(.select2-locked)\");\n                    var pos = getCursorInfo(this.search);\n                    if (selected.length && (e.which == KEY.LEFT || e.which == KEY.RIGHT || e.which == KEY.BACKSPACE || e.which == KEY.DELETE || e.which == KEY.ENTER)) {\n                        var selectedChoice = selected;\n                        if (e.which == KEY.LEFT && prev.length) {\n                            selectedChoice = prev;\n                        } else if (e.which == KEY.RIGHT) {\n                            selectedChoice = next.length ? next : null;\n                        } else if (e.which === KEY.BACKSPACE) {\n                            this.unselect(selected.first());\n                            this.search.width(10);\n                            selectedChoice = prev.length ? prev : next;\n                        } else if (e.which == KEY.DELETE) {\n                            this.unselect(selected.first());\n                            this.search.width(10);\n                            selectedChoice = next.length ? next : null;\n                        } else if (e.which == KEY.ENTER) {\n                            selectedChoice = null;\n                        }\n                        this.selectChoice(selectedChoice);\n                        killEvent(e);\n                        if (!selectedChoice || !selectedChoice.length) {\n                            this.open();\n                        }\n                        return;\n                    } else if ((e.which === KEY.BACKSPACE && this.keydowns == 1 || e.which == KEY.LEFT) && pos.offset == 0 && !pos.length) {\n                        this.selectChoice(selection.find(\".select2-search-choice:not(.select2-locked)\").last());\n                        killEvent(e);\n                        return;\n                    } else {\n                        this.selectChoice(null);\n                    }\n                    if (this.opened()) {\n                        switch (e.which) {\n                          case KEY.UP:\n                          case KEY.DOWN:\n                            this.moveHighlight(e.which === KEY.UP ? -1 : 1);\n                            killEvent(e);\n                            return;\n\n                          case KEY.ENTER:\n                            this.selectHighlighted();\n                            killEvent(e);\n                            return;\n\n                          case KEY.TAB:\n                            this.selectHighlighted({\n                                noFocus: true\n                            });\n                            this.close();\n                            return;\n\n                          case KEY.ESC:\n                            this.cancel(e);\n                            killEvent(e);\n                            return;\n                        }\n                    }\n                    if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.BACKSPACE || e.which === KEY.ESC) {\n                        return;\n                    }\n                    if (e.which === KEY.ENTER) {\n                        if (this.opts.openOnEnter === false) {\n                            return;\n                        } else if (e.altKey || e.ctrlKey || e.shiftKey || e.metaKey) {\n                            return;\n                        }\n                    }\n                    this.open();\n                    if (e.which === KEY.PAGE_UP || e.which === KEY.PAGE_DOWN) {\n                        // prevent the page from scrolling\n                        killEvent(e);\n                    }\n                    if (e.which === KEY.ENTER) {\n                        // prevent form from being submitted\n                        killEvent(e);\n                    }\n                }));\n                this.search.on(\"keyup\", this.bind(function(e) {\n                    this.keydowns = 0;\n                    this.resizeSearch();\n                }));\n                this.search.on(\"blur\", this.bind(function(e) {\n                    this.container.removeClass(\"select2-container-active\");\n                    this.search.removeClass(\"select2-focused\");\n                    this.selectChoice(null);\n                    if (!this.opened()) this.clearSearch();\n                    e.stopImmediatePropagation();\n                    this.opts.element.trigger($.Event(\"select2-blur\"));\n                }));\n                this.container.on(\"click\", selector, this.bind(function(e) {\n                    if (!this.isInterfaceEnabled()) return;\n                    if ($(e.target).closest(\".select2-search-choice\").length > 0) {\n                        // clicked inside a select2 search choice, do not open\n                        return;\n                    }\n                    this.selectChoice(null);\n                    this.clearPlaceholder();\n                    if (!this.container.hasClass(\"select2-container-active\")) {\n                        this.opts.element.trigger($.Event(\"select2-focus\"));\n                    }\n                    this.open();\n                    this.focusSearch();\n                    e.preventDefault();\n                }));\n                this.container.on(\"focus\", selector, this.bind(function() {\n                    if (!this.isInterfaceEnabled()) return;\n                    if (!this.container.hasClass(\"select2-container-active\")) {\n                        this.opts.element.trigger($.Event(\"select2-focus\"));\n                    }\n                    this.container.addClass(\"select2-container-active\");\n                    this.dropdown.addClass(\"select2-drop-active\");\n                    this.clearPlaceholder();\n                }));\n                this.initContainerWidth();\n                this.opts.element.addClass(\"select2-offscreen\");\n                // set the placeholder if necessary\n                this.clearSearch();\n            },\n            // multi\n            enableInterface: function() {\n                if (this.parent.enableInterface.apply(this, arguments)) {\n                    this.search.prop(\"disabled\", !this.isInterfaceEnabled());\n                }\n            },\n            // multi\n            initSelection: function() {\n                var data;\n                if (this.opts.element.val() === \"\" && this.opts.element.text() === \"\") {\n                    this.updateSelection([]);\n                    this.close();\n                    // set the placeholder if necessary\n                    this.clearSearch();\n                }\n                if (this.select || this.opts.element.val() !== \"\") {\n                    var self = this;\n                    this.opts.initSelection.call(null, this.opts.element, function(data) {\n                        if (data !== undefined && data !== null) {\n                            self.updateSelection(data);\n                            self.close();\n                            // set the placeholder if necessary\n                            self.clearSearch();\n                        }\n                    });\n                }\n            },\n            // multi\n            clearSearch: function() {\n                var placeholder = this.getPlaceholder(), maxWidth = this.getMaxSearchWidth();\n                if (placeholder !== undefined && this.getVal().length === 0 && this.search.hasClass(\"select2-focused\") === false) {\n                    this.search.val(placeholder).addClass(\"select2-default\");\n                    // stretch the search box to full width of the container so as much of the placeholder is visible as possible\n                    // we could call this.resizeSearch(), but we do not because that requires a sizer and we do not want to create one so early because of a firefox bug, see #944\n                    this.search.width(maxWidth > 0 ? maxWidth : this.container.css(\"width\"));\n                } else {\n                    this.search.val(\"\").width(10);\n                }\n            },\n            // multi\n            clearPlaceholder: function() {\n                if (this.search.hasClass(\"select2-default\")) {\n                    this.search.val(\"\").removeClass(\"select2-default\");\n                }\n            },\n            // multi\n            opening: function() {\n                this.clearPlaceholder();\n                // should be done before super so placeholder is not used to search\n                this.resizeSearch();\n                this.parent.opening.apply(this, arguments);\n                this.focusSearch();\n                this.updateResults(true);\n                this.search.focus();\n                this.opts.element.trigger($.Event(\"select2-open\"));\n            },\n            // multi\n            close: function() {\n                if (!this.opened()) return;\n                this.parent.close.apply(this, arguments);\n            },\n            // multi\n            focus: function() {\n                this.close();\n                this.search.focus();\n            },\n            // multi\n            isFocused: function() {\n                return this.search.hasClass(\"select2-focused\");\n            },\n            // multi\n            updateSelection: function(data) {\n                var ids = [], filtered = [], self = this;\n                // filter out duplicates\n                $(data).each(function() {\n                    if (indexOf(self.id(this), ids) < 0) {\n                        ids.push(self.id(this));\n                        filtered.push(this);\n                    }\n                });\n                data = filtered;\n                this.selection.find(\".select2-search-choice\").remove();\n                $(data).each(function() {\n                    self.addSelectedChoice(this);\n                });\n                self.postprocessResults();\n            },\n            // multi\n            tokenize: function() {\n                var input = this.search.val();\n                input = this.opts.tokenizer.call(this, input, this.data(), this.bind(this.onSelect), this.opts);\n                if (input != null && input != undefined) {\n                    this.search.val(input);\n                    if (input.length > 0) {\n                        this.open();\n                    }\n                }\n            },\n            // multi\n            onSelect: function(data, options) {\n                if (!this.triggerSelect(data)) {\n                    return;\n                }\n                this.addSelectedChoice(data);\n                this.opts.element.trigger({\n                    type: \"selected\",\n                    val: this.id(data),\n                    choice: data\n                });\n                if (this.select || !this.opts.closeOnSelect) this.postprocessResults();\n                if (this.opts.closeOnSelect) {\n                    this.close();\n                    this.search.width(10);\n                } else {\n                    if (this.countSelectableResults() > 0) {\n                        this.search.width(10);\n                        this.resizeSearch();\n                        if (this.getMaximumSelectionSize() > 0 && this.val().length >= this.getMaximumSelectionSize()) {\n                            // if we reached max selection size repaint the results so choices\n                            // are replaced with the max selection reached message\n                            this.updateResults(true);\n                        }\n                        this.positionDropdown();\n                    } else {\n                        // if nothing left to select close\n                        this.close();\n                        this.search.width(10);\n                    }\n                }\n                // since its not possible to select an element that has already been\n                // added we do not need to check if this is a new element before firing change\n                this.triggerChange({\n                    added: data\n                });\n                if (!options || !options.noFocus) this.focusSearch();\n            },\n            // multi\n            cancel: function() {\n                this.close();\n                this.focusSearch();\n            },\n            addSelectedChoice: function(data) {\n                var enableChoice = !data.locked, enabledItem = $(\"<li class='select2-search-choice'>\" + \"    <div></div>\" + \"    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a>\" + \"</li>\"), disabledItem = $(\"<li class='select2-search-choice select2-locked'>\" + \"<div></div>\" + \"</li>\");\n                var choice = enableChoice ? enabledItem : disabledItem, id = this.id(data), val = this.getVal(), formatted, cssClass;\n                formatted = this.opts.formatSelection(data, choice.find(\"div\"), this.opts.escapeMarkup);\n                if (formatted != undefined) {\n                    choice.find(\"div\").replaceWith(\"<div>\" + formatted + \"</div>\");\n                }\n                cssClass = this.opts.formatSelectionCssClass(data, choice.find(\"div\"));\n                if (cssClass != undefined) {\n                    choice.addClass(cssClass);\n                }\n                if (enableChoice) {\n                    choice.find(\".select2-search-choice-close\").on(\"mousedown\", killEvent).on(\"click dblclick\", this.bind(function(e) {\n                        if (!this.isInterfaceEnabled()) return;\n                        $(e.target).closest(\".select2-search-choice\").fadeOut(\"fast\", this.bind(function() {\n                            this.unselect($(e.target));\n                            this.selection.find(\".select2-search-choice-focus\").removeClass(\"select2-search-choice-focus\");\n                            this.close();\n                            this.focusSearch();\n                        })).dequeue();\n                        killEvent(e);\n                    })).on(\"focus\", this.bind(function() {\n                        if (!this.isInterfaceEnabled()) return;\n                        this.container.addClass(\"select2-container-active\");\n                        this.dropdown.addClass(\"select2-drop-active\");\n                    }));\n                }\n                choice.data(\"select2-data\", data);\n                choice.insertBefore(this.searchContainer);\n                val.push(id);\n                this.setVal(val);\n            },\n            // multi\n            unselect: function(selected) {\n                var val = this.getVal(), data, index;\n                selected = selected.closest(\".select2-search-choice\");\n                if (selected.length === 0) {\n                    throw \"Invalid argument: \" + selected + \". Must be .select2-search-choice\";\n                }\n                data = selected.data(\"select2-data\");\n                if (!data) {\n                    // prevent a race condition when the 'x' is clicked really fast repeatedly the event can be queued\n                    // and invoked on an element already removed\n                    return;\n                }\n                index = indexOf(this.id(data), val);\n                if (index >= 0) {\n                    val.splice(index, 1);\n                    this.setVal(val);\n                    if (this.select) this.postprocessResults();\n                }\n                selected.remove();\n                this.opts.element.trigger({\n                    type: \"removed\",\n                    val: this.id(data),\n                    choice: data\n                });\n                this.triggerChange({\n                    removed: data\n                });\n            },\n            // multi\n            postprocessResults: function(data, initial, noHighlightUpdate) {\n                var val = this.getVal(), choices = this.results.find(\".select2-result\"), compound = this.results.find(\".select2-result-with-children\"), self = this;\n                choices.each2(function(i, choice) {\n                    var id = self.id(choice.data(\"select2-data\"));\n                    if (indexOf(id, val) >= 0) {\n                        choice.addClass(\"select2-selected\");\n                        // mark all children of the selected parent as selected\n                        choice.find(\".select2-result-selectable\").addClass(\"select2-selected\");\n                    }\n                });\n                compound.each2(function(i, choice) {\n                    // hide an optgroup if it doesnt have any selectable children\n                    if (!choice.is(\".select2-result-selectable\") && choice.find(\".select2-result-selectable:not(.select2-selected)\").length === 0) {\n                        choice.addClass(\"select2-selected\");\n                    }\n                });\n                if (this.highlight() == -1 && noHighlightUpdate !== false) {\n                    self.highlight(0);\n                }\n                //If all results are chosen render formatNoMAtches\n                if (!this.opts.createSearchChoice && !choices.filter(\".select2-result:not(.select2-selected)\").length > 0) {\n                    if (!data || data && !data.more && this.results.find(\".select2-no-results\").length === 0) {\n                        if (checkFormatter(self.opts.formatNoMatches, \"formatNoMatches\")) {\n                            this.results.append(\"<li class='select2-no-results'>\" + self.opts.formatNoMatches(self.search.val()) + \"</li>\");\n                        }\n                    }\n                }\n            },\n            // multi\n            getMaxSearchWidth: function() {\n                return this.selection.width() - getSideBorderPadding(this.search);\n            },\n            // multi\n            resizeSearch: function() {\n                var minimumWidth, left, maxWidth, containerLeft, searchWidth, sideBorderPadding = getSideBorderPadding(this.search);\n                minimumWidth = measureTextWidth(this.search) + 10;\n                left = this.search.offset().left;\n                maxWidth = this.selection.width();\n                containerLeft = this.selection.offset().left;\n                searchWidth = maxWidth - (left - containerLeft) - sideBorderPadding;\n                if (searchWidth < minimumWidth) {\n                    searchWidth = maxWidth - sideBorderPadding;\n                }\n                if (searchWidth < 40) {\n                    searchWidth = maxWidth - sideBorderPadding;\n                }\n                if (searchWidth <= 0) {\n                    searchWidth = minimumWidth;\n                }\n                this.search.width(searchWidth);\n            },\n            // multi\n            getVal: function() {\n                var val;\n                if (this.select) {\n                    val = this.select.val();\n                    return val === null ? [] : val;\n                } else {\n                    val = this.opts.element.val();\n                    return splitVal(val, this.opts.separator);\n                }\n            },\n            // multi\n            setVal: function(val) {\n                var unique;\n                if (this.select) {\n                    this.select.val(val);\n                } else {\n                    unique = [];\n                    // filter out duplicates\n                    $(val).each(function() {\n                        if (indexOf(this, unique) < 0) unique.push(this);\n                    });\n                    this.opts.element.val(unique.length === 0 ? \"\" : unique.join(this.opts.separator));\n                }\n            },\n            // multi\n            buildChangeDetails: function(old, current) {\n                var current = current.slice(0), old = old.slice(0);\n                // remove intersection from each array\n                for (var i = 0; i < current.length; i++) {\n                    for (var j = 0; j < old.length; j++) {\n                        if (equal(this.opts.id(current[i]), this.opts.id(old[j]))) {\n                            current.splice(i, 1);\n                            i--;\n                            old.splice(j, 1);\n                            j--;\n                        }\n                    }\n                }\n                return {\n                    added: current,\n                    removed: old\n                };\n            },\n            // multi\n            val: function(val, triggerChange) {\n                var oldData, self = this, changeDetails;\n                if (arguments.length === 0) {\n                    return this.getVal();\n                }\n                oldData = this.data();\n                if (!oldData.length) oldData = [];\n                // val is an id. !val is true for [undefined,null,'',0] - 0 is legal\n                if (!val && val !== 0) {\n                    this.opts.element.val(\"\");\n                    this.updateSelection([]);\n                    this.clearSearch();\n                    if (triggerChange) {\n                        this.triggerChange({\n                            added: this.data(),\n                            removed: oldData\n                        });\n                    }\n                    return;\n                }\n                // val is a list of ids\n                this.setVal(val);\n                if (this.select) {\n                    this.opts.initSelection(this.select, this.bind(this.updateSelection));\n                    if (triggerChange) {\n                        this.triggerChange(this.buildChangeDetails(oldData, this.data()));\n                    }\n                } else {\n                    if (this.opts.initSelection === undefined) {\n                        throw new Error(\"val() cannot be called if initSelection() is not defined\");\n                    }\n                    this.opts.initSelection(this.opts.element, function(data) {\n                        var ids = $.map(data, self.id);\n                        self.setVal(ids);\n                        self.updateSelection(data);\n                        self.clearSearch();\n                        if (triggerChange) {\n                            self.triggerChange(this.buildChangeDetails(oldData, this.data()));\n                        }\n                    });\n                }\n                this.clearSearch();\n            },\n            // multi\n            onSortStart: function() {\n                if (this.select) {\n                    throw new Error(\"Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.\");\n                }\n                // collapse search field into 0 width so its container can be collapsed as well\n                this.search.width(0);\n                // hide the container\n                this.searchContainer.hide();\n            },\n            // multi\n            onSortEnd: function() {\n                var val = [], self = this;\n                // show search and move it to the end of the list\n                this.searchContainer.show();\n                // make sure the search container is the last item in the list\n                this.searchContainer.appendTo(this.searchContainer.parent());\n                // since we collapsed the width in dragStarted, we resize it here\n                this.resizeSearch();\n                // update selection\n                this.selection.find(\".select2-search-choice\").each(function() {\n                    val.push(self.opts.id($(this).data(\"select2-data\")));\n                });\n                this.setVal(val);\n                this.triggerChange();\n            },\n            // multi\n            data: function(values, triggerChange) {\n                var self = this, ids, old;\n                if (arguments.length === 0) {\n                    return this.selection.find(\".select2-search-choice\").map(function() {\n                        return $(this).data(\"select2-data\");\n                    }).get();\n                } else {\n                    old = this.data();\n                    if (!values) {\n                        values = [];\n                    }\n                    ids = $.map(values, function(e) {\n                        return self.opts.id(e);\n                    });\n                    this.setVal(ids);\n                    this.updateSelection(values);\n                    this.clearSearch();\n                    if (triggerChange) {\n                        this.triggerChange(this.buildChangeDetails(old, this.data()));\n                    }\n                }\n            }\n        });\n        $.fn.select2 = function() {\n            var args = Array.prototype.slice.call(arguments, 0), opts, select2, method, value, multiple, allowedMethods = [ \"val\", \"destroy\", \"opened\", \"open\", \"close\", \"focus\", \"isFocused\", \"container\", \"dropdown\", \"onSortStart\", \"onSortEnd\", \"enable\", \"readonly\", \"positionDropdown\", \"data\", \"search\" ], valueMethods = [ \"val\", \"opened\", \"isFocused\", \"container\", \"data\" ], methodsMap = {\n                search: \"externalSearch\"\n            };\n            this.each(function() {\n                if (args.length === 0 || typeof args[0] === \"object\") {\n                    opts = args.length === 0 ? {} : $.extend({}, args[0]);\n                    opts.element = $(this);\n                    if (opts.element.get(0).tagName.toLowerCase() === \"select\") {\n                        multiple = opts.element.prop(\"multiple\");\n                    } else {\n                        multiple = opts.multiple || false;\n                        if (\"tags\" in opts) {\n                            opts.multiple = multiple = true;\n                        }\n                    }\n                    select2 = multiple ? new MultiSelect2() : new SingleSelect2();\n                    select2.init(opts);\n                } else if (typeof args[0] === \"string\") {\n                    if (indexOf(args[0], allowedMethods) < 0) {\n                        throw \"Unknown method: \" + args[0];\n                    }\n                    value = undefined;\n                    select2 = $(this).data(\"select2\");\n                    if (select2 === undefined) return;\n                    method = args[0];\n                    if (method === \"container\") {\n                        value = select2.container;\n                    } else if (method === \"dropdown\") {\n                        value = select2.dropdown;\n                    } else {\n                        if (methodsMap[method]) method = methodsMap[method];\n                        value = select2[method].apply(select2, args.slice(1));\n                    }\n                    if (indexOf(args[0], valueMethods) >= 0) {\n                        return false;\n                    }\n                } else {\n                    throw \"Invalid arguments to select2 plugin: \" + args;\n                }\n            });\n            return value === undefined ? this : value;\n        };\n        // plugin defaults, accessible to users\n        $.fn.select2.defaults = {\n            width: \"copy\",\n            indentChar: \"\",\n            treeview: false,\n            treeviewInitState: \"expanded\",\n            treeviewExpandedClass: \"glyphicon glyphicon-chevron-down\",\n            treeviewCollapsedClass: \"glyphicon glyphicon-chevron-right\",\n            loadMorePadding: 0,\n            closeOnSelect: true,\n            openOnEnter: true,\n            containerCss: {},\n            dropdownCss: {},\n            containerCssClass: \"\",\n            dropdownCssClass: \"\",\n            formatResult: function(result, container, query, escapeMarkup) {\n                var markup = [];\n                markMatch(result.text, query.term, markup, escapeMarkup);\n                return markup.join(\"\");\n            },\n            formatSelection: function(data, container, escapeMarkup) {\n                return data ? escapeMarkup(data.text) : undefined;\n            },\n            sortResults: function(results, container, query) {\n                return results;\n            },\n            formatResultCssClass: function(data) {\n                return undefined;\n            },\n            formatSelectionCssClass: function(data, container) {\n                return undefined;\n            },\n            formatNoMatches: function() {\n                return \"No matches found\";\n            },\n            formatInputTooShort: function(input, min) {\n                var n = min - input.length;\n                return \"Please enter \" + n + \" more character\" + (n == 1 ? \"\" : \"s\");\n            },\n            formatInputTooLong: function(input, max) {\n                var n = input.length - max;\n                return \"Please delete \" + n + \" character\" + (n == 1 ? \"\" : \"s\");\n            },\n            formatSelectionTooBig: function(limit) {\n                return \"You can only select \" + limit + \" item\" + (limit == 1 ? \"\" : \"s\");\n            },\n            formatLoadMore: function(pageNumber) {\n                return \"Loading more results...\";\n            },\n            formatSearching: function() {\n                return \"Searching...\";\n            },\n            minimumResultsForSearch: 0,\n            minimumInputLength: 0,\n            maximumInputLength: null,\n            maximumSelectionSize: 0,\n            id: function(e) {\n                return e.id;\n            },\n            matcher: function(term, text) {\n                return (\"\" + text).toUpperCase().indexOf((\"\" + term).toUpperCase()) >= 0;\n            },\n            separator: \",\",\n            tokenSeparators: [],\n            tokenizer: defaultTokenizer,\n            escapeMarkup: defaultEscapeMarkup,\n            blurOnChange: false,\n            selectOnBlur: false,\n            adaptContainerCssClass: function(c) {\n                return c;\n            },\n            adaptDropdownCssClass: function(c) {\n                return null;\n            }\n        };\n        $.fn.select2.ajaxDefaults = {\n            transport: $.ajax,\n            params: {\n                type: \"GET\",\n                cache: false,\n                dataType: \"json\"\n            }\n        };\n        // exports\n        window.Select2 = {\n            query: {\n                ajax: ajax,\n                local: local,\n                tags: tags\n            },\n            util: {\n                debounce: debounce,\n                markMatch: markMatch,\n                escapeMarkup: defaultEscapeMarkup\n            },\n            \"class\": {\n                \"abstract\": AbstractSelect2,\n                single: SingleSelect2,\n                multi: MultiSelect2\n            }\n        };\n    })(jQuery);\n/* eslint-disable */\n\n"]}