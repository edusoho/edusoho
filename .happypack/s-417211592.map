{"version":3,"sources":["node_modules/.0.14.8@react/lib/getNodeForCharacterOffset.js"],"names":["getLeafNode","node","firstChild","getSiblingNode","nextSibling","parentNode","getNodeForCharacterOffset","root","offset","nodeStart","nodeEnd","nodeType","textContent","length","module","exports"],"mappings":"AAAA;;;;;;;;;;;AAWA;;AAEA;;;;;;;AAMA,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AACzB,SAAOA,QAAQA,KAAKC,UAApB,EAAgC;AAC9BD,WAAOA,KAAKC,UAAZ;AACD;AACD,SAAOD,IAAP;AACD;;AAED;;;;;;;AAOA,SAASE,cAAT,CAAwBF,IAAxB,EAA8B;AAC5B,SAAOA,IAAP,EAAa;AACX,QAAIA,KAAKG,WAAT,EAAsB;AACpB,aAAOH,KAAKG,WAAZ;AACD;AACDH,WAAOA,KAAKI,UAAZ;AACD;AACF;;AAED;;;;;;;AAOA,SAASC,yBAAT,CAAmCC,IAAnC,EAAyCC,MAAzC,EAAiD;AAC/C,MAAIP,OAAOD,YAAYO,IAAZ,CAAX;AACA,MAAIE,YAAY,CAAhB;AACA,MAAIC,UAAU,CAAd;;AAEA,SAAOT,IAAP,EAAa;AACX,QAAIA,KAAKU,QAAL,KAAkB,CAAtB,EAAyB;AACvBD,gBAAUD,YAAYR,KAAKW,WAAL,CAAiBC,MAAvC;;AAEA,UAAIJ,aAAaD,MAAb,IAAuBE,WAAWF,MAAtC,EAA8C;AAC5C,eAAO;AACLP,gBAAMA,IADD;AAELO,kBAAQA,SAASC;AAFZ,SAAP;AAID;;AAEDA,kBAAYC,OAAZ;AACD;;AAEDT,WAAOD,YAAYG,eAAeF,IAAf,CAAZ,CAAP;AACD;AACF;;AAEDa,OAAOC,OAAP,GAAiBT,yBAAjB","file":"getNodeForCharacterOffset.js","sourceRoot":"/Users/kz/projects/edusoho","sourcesContent":["/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule getNodeForCharacterOffset\n */\n\n'use strict';\n\n/**\n * Given any node return the first leaf node without children.\n *\n * @param {DOMElement|DOMTextNode} node\n * @return {DOMElement|DOMTextNode}\n */\nfunction getLeafNode(node) {\n  while (node && node.firstChild) {\n    node = node.firstChild;\n  }\n  return node;\n}\n\n/**\n * Get the next sibling within a container. This will walk up the\n * DOM if a node's siblings have been exhausted.\n *\n * @param {DOMElement|DOMTextNode} node\n * @return {?DOMElement|DOMTextNode}\n */\nfunction getSiblingNode(node) {\n  while (node) {\n    if (node.nextSibling) {\n      return node.nextSibling;\n    }\n    node = node.parentNode;\n  }\n}\n\n/**\n * Get object describing the nodes which contain characters at offset.\n *\n * @param {DOMElement|DOMTextNode} root\n * @param {number} offset\n * @return {?object}\n */\nfunction getNodeForCharacterOffset(root, offset) {\n  var node = getLeafNode(root);\n  var nodeStart = 0;\n  var nodeEnd = 0;\n\n  while (node) {\n    if (node.nodeType === 3) {\n      nodeEnd = nodeStart + node.textContent.length;\n\n      if (nodeStart <= offset && nodeEnd >= offset) {\n        return {\n          node: node,\n          offset: offset - nodeStart\n        };\n      }\n\n      nodeStart = nodeEnd;\n    }\n\n    node = getLeafNode(getSiblingNode(node));\n  }\n}\n\nmodule.exports = getNodeForCharacterOffset;"]}